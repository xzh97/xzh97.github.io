<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>è¿½æ¢¦çš„èš‚èš</title>
  
  <subtitle>ä½•é¡»ä»°æœ›ä»–äººï¼Œè‡ªå·±äº¦æ˜¯é£æ™¯</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://xzh97.github.io/"/>
  <updated>2025-11-24T08:23:41.555Z</updated>
  <id>https://xzh97.github.io/</id>
  
  <author>
    <name>xzh</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ã€Webpackã€‘é¡¹ç›®ä¼˜åŒ–</title>
    <link href="https://xzh97.github.io/2020/12/03/learn-webpack-optimization/"/>
    <id>https://xzh97.github.io/2020/12/03/learn-webpack-optimization/</id>
    <published>2020-12-03T08:52:46.000Z</published>
    <updated>2025-11-24T08:23:41.555Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•ç”¨webpackæ¥ä¼˜åŒ–é¡¹ç›®ã€‚</p><h2 id="ä¼˜åŒ–æ–¹å¼"><a class="header-anchor" href="#ä¼˜åŒ–æ–¹å¼"></a>ä¼˜åŒ–æ–¹å¼</h2><h3 id="ä¼˜åŒ–æ— ç”¨çš„css"><a class="header-anchor" href="#ä¼˜åŒ–æ— ç”¨çš„css"></a>ä¼˜åŒ–æ— ç”¨çš„css</h3><p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŠŠæ²¡æœ‰ç”¨åˆ°çš„cssæ ·å¼ä¼˜åŒ–æ‰ï¼Œå¯ä»¥å‡å°‘æ„å»ºåŒ…çš„å¤§å°</p><p>ä¸»è¦æ˜¯é€šè¿‡æ’ä»¶<code>purgecss-webpack-plugin</code>æ¥å®ç°ã€‚</p><ul><li><a href="https://www.purgecss.cn/guides/vue.html#use-the-vue-cli-plugin" target="_blank" rel="noopener">vue-cli3ä½¿ç”¨PurgecssWebpackPlugin</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œæƒ³å¼„ä¸ªæ —å­çš„ï¼Œä½†æ˜¯è¿™ä¸ª`vue-cli-plugin-purgecss`çš„æ’ä»¶ä¸€ç›´è£…ä¸ä¸Šåªèƒ½ä½œç½¢</span></span><br></pre></td></tr></table></figure><ul><li><a href="https://www.purgecss.cn/plugins/webpack.html#%E5%AE%89%E8%A3%85" target="_blank" rel="noopener">webpackä½¿ç”¨PurgecssWebpackPlugin</a></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£å¸¸æ–¹å¼ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> PATHS = &#123;</span><br><span class="line">  src: path.join(__dirname, <span class="string">'src'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> PurgecssWebpackPlugin(&#123;</span><br><span class="line">            <span class="comment">// å¯ä»¥ç›´æ¥è¿™æ ·ç”¨</span></span><br><span class="line">            paths: glob.sync(<span class="string">`<span class="subst">$&#123;PATHS.src&#125;</span>/**/*`</span>, &#123;<span class="attr">nodir</span>: <span class="literal">true</span>&#125;),</span><br><span class="line">            <span class="comment">// ä¹Ÿå¯ä»¥ç”¨globAllæ¥é€‰æ‹©å…·ä½“ä½¿ç”¨çš„ç›®å½•</span></span><br><span class="line">            paths: globAll.sync([</span><br><span class="line">                <span class="string">`<span class="subst">$&#123;PATHS.src&#125;</span>/index.html`</span>,</span><br><span class="line">                <span class="string">`<span class="subst">$&#123;PATHS.src&#125;</span>/styles/*`</span>,</span><br><span class="line">                <span class="string">`<span class="subst">$&#123;PATHS.src&#125;</span>/*/*.vue`</span>,</span><br><span class="line">            ]),</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æå–CSSåˆ°å•ç‹¬çš„æ–‡ä»¶é‡Œ"><a class="header-anchor" href="#æå–CSSåˆ°å•ç‹¬çš„æ–‡ä»¶é‡Œ"></a>æå–CSSåˆ°å•ç‹¬çš„æ–‡ä»¶é‡Œ</h3><p>ä¸ºä»€ä¹ˆè¦æå–cssåˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­å‘¢ï¼Ÿé¡¹ç›®æ¯”è¾ƒå¤§æ—¶ï¼Œæ ·å¼ä¼šç‰¹åˆ«å¤šä¸”ç‰¹åˆ«å¤æ‚ã€‚å¦‚æœä»ç„¶ç”¨<code>'style-loader', 'css-loader',  'sass-loader'</code>è¿™ç§æ–¹å¼çš„è¯ä¼šå¤§å¹…å»¶é•¿é¦–é¡µåŠ è½½æ—¶é—´ï¼Œä¸”å¾ˆå¤šæ ·å¼å¹¶ä¸éœ€è¦åœ¨é¦–é¡µåŠ è½½ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹CSSåšä¼˜åŒ–ä¸”ä¼˜åŒ–ç‚¹å°±åœ¨äºåˆ†ç¦»ä¸åŒæ¨¡å—çš„æ ·å¼ä¸”æœ€å¥½åˆ†ç¦»å‡ºçš„æ¨¡å—èƒ½å¤ŸæŒ‰éœ€åŠ è½½ã€‚</p><p>è¿™é‡Œå°±éœ€è¦ç”¨åˆ°ä¸€ä¸ªæ’ä»¶æ¥å¯¹è¿™ç§ç°è±¡è¿›è¡Œä¼˜åŒ–ï¼šwebpack4çš„è¯ä½¿ç”¨<code>mini-css-extract-plugin</code>ï¼Œwebpack3çš„è¯ä½¿ç”¨<code>extract-text-webpack-plugin</code>ã€‚<br>è¿™ä¸¤ä¸ªæ’ä»¶çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å‰è€…åŠŸèƒ½æ›´åŠ å®Œå–„ï¼ˆæ¯•ç«Ÿæ˜¯åé¢å‡ºçš„ï¼Œè‚¯å®šä¼˜åŒ–æ›´å¥½ä¸€äº›ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PATHS = &#123;</span><br><span class="line">  src: path.join(__dirname, <span class="string">'src'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> isDev = process.env.NODE_ENV === <span class="string">'development'</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="comment">// MiniCssExtractPluginæ’ä»¶æ”¯æŒcssæŒ‰éœ€åŠ è½½å’ŒsourceMap</span></span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: isDev ? [name].css : [name].[contentHash].css,</span><br><span class="line">            chunkFilename: isDev ? [id].css : [id].[contentHash].css</span><br><span class="line">        &#125;),</span><br><span class="line">    ],</span><br><span class="line">    modules:&#123;</span><br><span class="line">        rules:[</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">                use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>, <span class="string">'sass-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªåŠ¨æ·»åŠ å‰ç¼€"><a class="header-anchor" href="#è‡ªåŠ¨æ·»åŠ å‰ç¼€"></a>è‡ªåŠ¨æ·»åŠ å‰ç¼€</h3><p>ç”±äºæ ·å¼å¯èƒ½ä¼šå­˜åœ¨æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šéœ€è¦åœ¨æ ·å¼ä¸­æ·»åŠ å‰ç¼€ï¼Œä½†æ˜¯ä½ ä¹Ÿä¸å¯èƒ½æ‰€æœ‰çš„æ ·å¼éƒ½å†™ä¸€è¾¹ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>postcss</code>æ¥åšè¿™ä»¶äº‹æƒ…ï¼Œé‚£ä¹ˆåœ¨webpackä¸­æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°<code>postcss-loader</code>å’Œ<code>autoprefixer</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="comment">// MiniCssExtractPluginæ’ä»¶æ”¯æŒæŒ‰éœ€åŠ è½½å’ŒsourceMap</span></span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">            filename: [name].[contentHash].css,</span><br><span class="line">            chunkFilename: [id].[contentHash].css</span><br><span class="line">        &#125;),</span><br><span class="line">        autoPrefixer(&#123;</span><br><span class="line">            browser: [</span><br><span class="line">                <span class="string">'last 10 Chrome versions'</span>,</span><br><span class="line">                <span class="string">'last 5 Firefox versions'</span>,</span><br><span class="line">                <span class="string">'Safari &gt;= 6'</span>, </span><br><span class="line">                <span class="string">'ie&gt; 8'</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;)</span><br><span class="line">    ],</span><br><span class="line">    modules:&#123;</span><br><span class="line">        rules:[</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">                use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">                use: [MiniCssExtractPlugin.loader, <span class="string">'css-loader'</span>,  <span class="string">'sass-loader'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‹ç¼©æ–‡ä»¶"><a class="header-anchor" href="#å‹ç¼©æ–‡ä»¶"></a>å‹ç¼©æ–‡ä»¶</h3><p>é¦–å…ˆï¼Œwebpack4ä¸­é»˜è®¤åœ¨<code>production</code>æ—¶ä¼šå¼€å¯å‹ç¼©ã€‚ä½†æ˜¯è¿™ä¸ªå‹ç¼©æ˜¯å¯¹jsæ–‡ä»¶çš„å‹ç¼©ï¼Œæ‰€ä»¥cssæ–‡ä»¶æˆ‘ä»¬éœ€è¦é€šè¿‡<code>optimize-css-assets-webpack-plugin</code>æ¥å®Œæˆã€‚Butï¼Œç”±äºé…ç½®csså‹ç¼©æ—¶ä¼šè¦†ç›–æ‰webpackçš„é»˜è®¤å‹ç¼©é…ç½®ï¼Œ æ‰€ä»¥éœ€è¦é¢å¤–å¼•å…¥jså‹ç¼©æ’ä»¶<code>terser-webpack-plugin</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OptimizeCssAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> TerserPlugin = <span class="built_in">require</span>(<span class="string">'terser-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    optimization:&#123;</span><br><span class="line">        minimize: <span class="literal">true</span>,</span><br><span class="line">        minimizer:&#123;</span><br><span class="line">            <span class="keyword">new</span> TerserPlugin(&#123;</span><br><span class="line">                parallel: <span class="number">4</span>, <span class="comment">// å¹¶è¡Œå‹ç¼©</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="keyword">new</span> OptimizeCssAssetsPlugin(&#123;&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JSæŠ½å–å…¬å…±ä»£ç "><a class="header-anchor" href="#JSæŠ½å–å…¬å…±ä»£ç "></a>JSæŠ½å–å…¬å…±ä»£ç </h3><p>å¾ˆå¤šæ—¶å€™ï¼Œä¸€äº›å…¬å…±çš„ä»£ç /åº“ä¼šåœ¨åº”ç”¨å†…å„ä¸ªæ¨¡å—å†…éƒ½ç”¨åˆ°ã€‚ä½†æ˜¯æŒ‰ç…§ä¹‹å‰çš„é€»è¾‘ï¼Œwebpackæ‰“åŒ…çš„æ—¶å€™ä¼šæŠŠè¿™äº›ä»£ç å¤šæ¬¡æ‰“å…¥è¿›å»ã€‚è¿™æ ·å°±ä¼šä½¿å¾—æ„å»ºåŒ…çš„ä½“ç§¯å¢å¤§ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤ŸæŠŠå…¬å…±ä»£ç æå–å‡ºæ¥ï¼Œè¿™æ ·å­åªéœ€è¦åŠ è½½ä¸€æ¬¡ï¼Œå…¶å®ƒåœ°æ–¹ç”¨çš„æ—¶å€™éƒ½è¦ä¸éœ€è¦é‡å¤åŠ è½½ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„æ˜¯<code>splitChunkPlugin</code>æ¥æŠ½å–å…¬å…±ä»£ç ï¼Œä¸è¿‡è¿™ä¸ªæ’ä»¶ä¸éœ€è¦æˆ‘ä»¬æ˜¾å¼çš„å¼•å…¥ä½¿ç”¨ï¼Œåœ¨webpack4ä¸­å¯ä»¥é€šè¿‡<code>optimization.splitChunks</code>æ¥é…ç½®ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpackå®˜ç½‘ç»™çš„é»˜è®¤é…ç½®ã€‚</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    optimization:&#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            chunks: <span class="string">'async'</span>,</span><br><span class="line">            minSize: <span class="number">30000</span>,</span><br><span class="line">            maxSize: <span class="number">0</span>,</span><br><span class="line">            minChunks: <span class="number">1</span>,</span><br><span class="line">            maxAsyncRequests: <span class="number">5</span>,</span><br><span class="line">            maxInitialRequests: <span class="number">3</span>,</span><br><span class="line">            automaticNameDelimiter: <span class="string">'~'</span>,</span><br><span class="line">            name: <span class="literal">true</span>,</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">                vendors: &#123;</span><br><span class="line">                    test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">                    priority: <span class="number">-10</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="keyword">default</span>: &#123;</span><br><span class="line">                    minChunks: <span class="number">2</span>,</span><br><span class="line">                    priority: <span class="number">-20</span>,</span><br><span class="line">                    reuseExistingChunk: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="chunks"><a class="header-anchor" href="#chunks"></a>chunks</h4><p>chunkså†…æœ‰<code>['all', 'async', 'initial']</code>ä¸‰ç§æ¨¡å¼ï¼Œ é»˜è®¤ä¸º<code>async</code>ã€‚</p><ul><li>asyncï¼šåªä»å¼‚æ­¥åŠ è½½çš„æ¨¡å—é‡Œè¿›è¡Œæ‹†åˆ†</li><li>initialï¼šåªä»å…¥å£æ¨¡å—è¿›è¡Œæ‹†åˆ†</li><li>allï¼šæ—¢ä»å¼‚æ­¥åŠ è½½çš„æ¨¡å—é‡Œè¿›è¡Œæ‹†åˆ†ä¹Ÿä»å…¥å£æ¨¡å—è¿›è¡Œæ‹†åˆ†</li></ul><h3 id="é…ç½®å¤šå…¥å£"><a class="header-anchor" href="#é…ç½®å¤šå…¥å£"></a>é…ç½®å¤šå…¥å£</h3><p>å¤šå…¥å£å…¶å®æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§åˆ†ç¦»ä»£ç çš„æ–¹å¼ã€‚ä¹Ÿæ˜¯å‡å°‘åˆå§‹åŒ–éœ€è¦åŠ è½½çš„å†…å®¹æ•°é‡ã€‚ç„¶åæ˜¯åˆ©ç”¨<code>webpack.config.entry</code>æ¥é…ç½®ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="comment">// ä¸¤ä¸ªå…¥å£ mainï¼Œother</span></span><br><span class="line">    entry:&#123;</span><br><span class="line">        main: <span class="string">'main.js'</span>,</span><br><span class="line">        other: <span class="string">'other.js'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    output:&#123;</span><br><span class="line">        <span class="comment">// åªéœ€è¦è¿™æ ·å­å†™å°±å¯ä»¥äº†ã€‚ è¾“å‡ºçš„ä¹Ÿæ˜¯mainï¼Œother</span></span><br><span class="line">        filename: <span class="string">'[name].js'</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="noParse"><a class="header-anchor" href="#noParse"></a>noParse</h3><p>å¯¹äºä¸€äº›å¼•ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°çŸ¥é“å®ƒä¸ä¼šå’Œå…¶å®ƒæ¨¡å—äº§ç”Ÿä¾èµ–æ—¶ã€‚å°±å¯ä»¥ç”¨åˆ°<code>noParse</code>ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯è®©webpackä¸å»è§£æè¿™äº›åº“çš„ä¾èµ–å…³ç³»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="built_in">module</span>:&#123;</span><br><span class="line">        noParse: <span class="regexp">/jquery|bootstrap/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="IgnorePlugin"><a class="header-anchor" href="#IgnorePlugin"></a>IgnorePlugin</h3><p>å¯¹äºå¼•ç”¨çš„ä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œä¾‹å¦‚<code>momentjsï¼Œdayjs</code>ã€‚ä»–ä»¬å†…éƒ¨éƒ½æ˜¯è‡ªå¸¦å›½é™…åŒ–å¤„ç†çš„ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å¾ˆå¤šå¯¹åº”çš„è¯­è¨€åŒ…ã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¾€å¾€ä¸éœ€è¦è¿™äº›è¯­è¨€åŒ…ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä½¿ç”¨<code>IgnorePlugin</code>æ¥å¿½ç•¥æ‰æ‰€æœ‰çš„è¯­è¨€åŒ…ï¼Œå½“ç„¶ï¼Œåœ¨è¿™ä¹‹åæˆ‘ä»¬è¿˜å¾—æŒ‰éœ€å¼•å…¥å®é™…è¦ç”¨åˆ°çš„è¯­è¨€åŒ…ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entry.js</span></span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span>;</span><br><span class="line"><span class="comment">// è®¾ç½®ä¸ºä¸­æ–‡</span></span><br><span class="line">moment.locale(<span class="string">'zh-CN'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨è¿™ä¹‹å‰æˆ‘ä»¬å¾—é€šè¿‡é˜…è¯»æºç æ‰¾åˆ°momentçš„è¯­è¨€åŒ…ç›®å½•ã€‚è¿™é‡Œä¸ç»†è®²äº†ã€‚</span></span><br><span class="line"><span class="comment">// æœ€åå¯ä»¥æ‰¾åˆ°momentçš„è¯­è¨€åŒ…ç›®å½•æ˜¯ /locale</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="comment">// ...å…¶å®ƒæ’ä»¶</span></span><br><span class="line">        <span class="keyword">new</span> webpack.IgnorePlugin(<span class="regexp">/\.\/locale/</span>, /moment/)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// entry.js</span></span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span>;</span><br><span class="line"><span class="comment">// éœ€è¦æ‰‹åŠ¨å¼•å…¥è¯¥è¯­è¨€åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'moment/locale/zh-cn'</span>;</span><br><span class="line"><span class="comment">// è®¾ç½®ä¸ºä¸­æ–‡</span></span><br><span class="line">moment.locale(<span class="string">'zh-CN'</span>);</span><br></pre></td></tr></table></figure><h3 id="DLLé¢„ç¼–è¯‘ä¼˜åŒ–"><a class="header-anchor" href="#DLLé¢„ç¼–è¯‘ä¼˜åŒ–"></a>DLLé¢„ç¼–è¯‘ä¼˜åŒ–</h3><p>å¯¹äºä¸€äº›ä¸ä¼šç»å¸¸æ›´æ–°çš„åº“ï¼Œä¾‹å¦‚<code>vueï¼Œreact</code>ç­‰ç­‰ã€‚è¿™äº›åº“æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šæ›´æ–°ç‰ˆæœ¬ï¼Œä½†æ˜¯æ¯æ¬¡æ‰“åŒ…æ—¶éƒ½è¦è§£æã€‚è¿™æ ·æ˜¯ä¼šå½±å“åˆ°webpackçš„æ‰“åŒ…é€Ÿåº¦çš„ã€‚è€Œä¸”å°±ç®—æˆ‘ä»¬åšäº†æ‹†åˆ†ï¼Œæå‡çš„ä¹Ÿåªæ˜¯åœ¨é¡µé¢ä¸­è®¿é—®çš„é€Ÿåº¦ï¼Œè€Œä¸æ˜¯webpackæ‰“åŒ…çš„é€Ÿåº¦ã€‚æ‰€ä»¥ä¸ºäº†æé«˜webpackæ„å»ºçš„é€Ÿåº¦ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ç±»ä¼¼äºdllï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰çš„æ–¹å¼æ¥æå‡æ„å»ºé€Ÿåº¦ã€‚</p><p>è¿™æ ·å­åšçš„æœ¬è´¨å…¶å®å°±æ˜¯ç›¸å½“äºæˆ‘æå‰æŠŠè¿™ä¸€éƒ¨åˆ†ä¸ä¼šç»å¸¸æ›´æ–°çš„åº“å…ˆæ‰“åŒ…ä¸€éï¼Œè¿™æ ·å­æˆ‘ä¹‹åwebpackæ‰“åŒ…å°±åªéœ€è¦æ‰“åŒ…å¦å¤–ä¸€éƒ¨åˆ†å†…å®¹ã€‚ç›¸å½“äºå‡å°‘äº†æ‰“åŒ…çš„å·¥ä½œé‡ã€‚</p><p>DLLä¼˜åŒ–ä¸­æˆ‘ä»¬ä¸»è¦ä¼šç”¨åˆ°ä¸¤ä¸ªæ’ä»¶ï¼Œä¸€ä¸ªæ˜¯<code>DLLPlugin</code>ï¼Œä¸€ä¸ªæ˜¯<code>DLLReferencePlugin</code>ã€‚<br><code>DLLPlugin</code>å‘¢ä¸»è¦æ˜¯ç”¨æ¥ç”Ÿæˆdllå†…å®¹çš„ã€‚dllå†…å®¹åŒ…æ‹¬æ‰“åŒ…ç”Ÿæˆçš„<code>js</code>æ–‡ä»¶ä»¥åŠ<code>manifest.json</code>ï¼ˆ<code>DLLReferencePlugin</code>ä¼šä½¿ç”¨è¯¥jsonæ–‡ä»¶æ¥åšæ˜ å°„ä¾èµ–æ€§ï¼ŒåŒæ—¶webpacké€šè¿‡è¿™ä¸ªæ–‡ä»¶å¯ä»¥çŸ¥é“å“ªäº›æ–‡ä»¶å·²ç»æå–æ‰“åŒ…å¥½äº†ï¼‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dll.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode: <span class="string">'none'</span>,</span><br><span class="line">    entry:&#123;</span><br><span class="line">        vue: [</span><br><span class="line">            <span class="string">'vue/dist/vue'</span>,</span><br><span class="line">            <span class="string">'vue-router'</span>,</span><br><span class="line">            <span class="string">'vuex'</span>,</span><br><span class="line">            <span class="string">'axios'</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    output:&#123;</span><br><span class="line">        path: path.resolve(__dirname, <span class="string">'./public/static/dll'</span>),</span><br><span class="line">        filename: <span class="string">'[name]_[hash].dll.js'</span>,</span><br><span class="line">        library: <span class="string">'[name]_[hash]'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="keyword">new</span> webpack.DllPlugin(&#123;</span><br><span class="line">            name: <span class="string">'[name]_[hash]'</span>,</span><br><span class="line">            path: path.resolve(__dirname, <span class="string">'./public/static/dll'</span>, <span class="string">'[name]-manifest.json'</span>),</span><br><span class="line">            context: __dirname</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="comment">// å¼•å…¥ä¹‹å‰ç”Ÿæˆçš„manifest.json</span></span><br><span class="line"><span class="keyword">const</span> dllJson = <span class="built_in">require</span>(<span class="string">'./public/static/dll/vue-manifest.json'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="comment">// ... å…¶å®ƒæ’ä»¶</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œåªæ˜¯æˆåŠŸçš„å¼•å…¥äº†dllä¾èµ–å…³ç³»ï¼Œå¹¶æ²¡æœ‰åŠ¨æ€çš„æŠŠå®ƒå¯¼å…¥åˆ°é¡¹ç›®é‡Œã€‚</span></span><br><span class="line">        <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">            manifest: dllJson,</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">'index.html'</span>,</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¯¼å…¥dllåˆ°htmlä¸­æ–¹æ¡ˆ1</span></span><br><span class="line">            vendor: <span class="string">'/static/dll/'</span> + dllJson.name + <span class="string">'.dll.js'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¯¼å…¥dllåˆ°htmlä¸­æ–¹æ¡ˆ2</span></span><br><span class="line">        <span class="keyword">new</span> AddAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">            filepath: path.resolve(__dirname, <span class="string">`../dist/static/dll/<span class="subst">$&#123;dllJson.name&#125;</span>_dll.js`</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯¼å…¥dllåˆ°htmlä¸­æ–¹æ¡ˆ1</span></span><br><span class="line"><span class="comment">// index.html æ³¨å…¥dll.js </span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;div id='app'&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;script src="&lt;%= htmlWebpackPlugin.options.vendor %&gt;"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure><h3 id="TreeShaking"><a class="header-anchor" href="#TreeShaking"></a>TreeShaking</h3><p><code>TreeShaking</code>çš„æ„æ€å°±æ˜¯åˆ é™¤æ²¡æœ‰ç”¨åˆ°çš„å†—ä½™ä»£ç ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæçº¯æ“ä½œã€‚æŠŠä½¿ç”¨åˆ°çš„ä»£ç æå–å‡ºæ¥ç„¶ååœ¨æ‰“åŒ…ã€‚å¯ä»¥é€šè¿‡<code>package.json</code>ä¸­çš„<code>sideEffects</code>å±æ€§æˆ–è€…æ˜¯<code>webpack.config.module.rules</code>æ¥è®¾ç½®ã€‚</p><p><code>sideEffects</code>æœ‰ä¸‰ä¸ªå€¼ï¼š</p><ul><li>trueï¼š ä¸åštree-shaking</li><li>falseï¼š éƒ½å¯ä»¥åštree-shaing</li><li>[]ï¼šå¯¹ä¸ç¬¦åˆæ•°ç»„å†…ç»“æœçš„å†…å®¹åštree-shaking</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ç¬¦åˆè¯¥åŒ¹é…ç»“æœçš„éƒ½ä¼šåštree-shaking</span></span><br><span class="line"><span class="string">"sideEffects"</span>: [</span><br><span class="line">    <span class="string">"./src/some-side-effectful-file.js"</span>,</span><br><span class="line">    <span class="string">"*.css"</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="built_in">module</span>:&#123;</span><br><span class="line">        rules:[</span><br><span class="line">            &#123;</span><br><span class="line">                include: path.resolve(<span class="string">"node_modules"</span>, <span class="string">"lodash"</span>),</span><br><span class="line">                <span class="comment">// åštree-shaking</span></span><br><span class="line">                sideEffects: <span class="literal">false</span>, </span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                include: path.resolve(<span class="string">"src/view/home/index.vue"</span>),</span><br><span class="line">                <span class="comment">// ä¸åštree-shaking</span></span><br><span class="line">                sideEffects: <span class="literal">true</span>, </span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­è¿˜æœ‰ï¼Œä¸ºäº†æ›´å¥½çš„tree-shakingã€‚æˆ‘ä»¬åœ¨å¹³æ—¶codingçš„æ—¶å€™ï¼Œå¯ä»¥è¿™æ ·å­åšï¼š</p><ul><li><code>import {cloneDeep} from 'lodash'</code> ä»£æ›¿ <code>import _ from 'lodash'</code></li><li><code>import cloneDeep from 'lodash/cloneDeep'</code> ä»£æ›¿ <code>import _ from 'lodash'</code></li><li>åƒé¡¹ç›®é‡Œå¸¸ç”¨çš„çš„æ–¹æ³•åº“è¿™ç§ï¼Œå°½é‡è¿™æ ·å­å†™ä¹Ÿæœ‰åŠ©äºtree-shaking  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export const foo()&#123;</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">&#125;</span><br><span class="line">export const foo1()&#123;</span><br><span class="line">    &#x2F;&#x2F; ...</span><br><span class="line">&#125;</span><br><span class="line">export default &#123;</span><br><span class="line">    foo,</span><br><span class="line">    foo1,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="å¤šè¿›ç¨‹ä¼˜åŒ–æ„å»º"><a class="header-anchor" href="#å¤šè¿›ç¨‹ä¼˜åŒ–æ„å»º"></a>å¤šè¿›ç¨‹ä¼˜åŒ–æ„å»º</h3><p>é¦–å…ˆï¼Œç”±äºjsæœ¬èº«æ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„è¯­è¨€ï¼Œæ‰€ä»¥webpackæ‰“åŒ…çš„æ—¶å€™ï¼Œä»»åŠ¡åªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„å®Œæˆã€‚ä½†æ˜¯æˆ‘ä»¬åˆæƒ³è¦webpackèƒ½å¤ŸåŒæ—¶å®Œæˆå¤šä¸ªä»»åŠ¡ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>HappyPackï¼Œthread-loaderï¼ˆå®˜æ–¹æ¨èï¼‰</code>ç­‰æ’ä»¶æ¥ä½¿å¾—webpackèƒ½å¤Ÿåšåˆ°å¤šçº¿æ“ä½œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isDev = process.env.NODE_ENV === <span class="string">'development'</span>;</span><br><span class="line"><span class="keyword">const</span> HappyPack = <span class="built_in">require</span>(<span class="string">'happypack'</span>);</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">'os'</span>);</span><br><span class="line"><span class="keyword">const</span> HappyThreadPool = HappyPack.ThreadPool(&#123;<span class="attr">size</span>: os.cpus().length&#125;);</span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="built_in">module</span>:&#123;</span><br><span class="line">        rules:[</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_mudoles/</span>,</span><br><span class="line">                use: <span class="string">'happypack/loader?id=happyBabel'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">                use: <span class="string">'happypack/loader?id=happyScss'</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">new</span> HappyPack(&#123;</span><br><span class="line">            id: <span class="string">'happyBabel'</span>, <span class="comment">// loaderså£°æ˜çš„å¯¹åº”çš„id</span></span><br><span class="line">            threads: <span class="number">4</span>, <span class="comment">// çº¿ç¨‹æ•°</span></span><br><span class="line">            loaders:[<span class="string">'babel-loader'</span>] <span class="comment">// loaders</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> HappyPack(&#123;</span><br><span class="line">            id: <span class="string">'happyScss'</span>,</span><br><span class="line">            threads: <span class="number">2</span>, </span><br><span class="line">            loaders:[isDev ? <span class="string">'style-loader'</span> : MinicssExtractPlugin.loader,<span class="string">'css-loader'</span>,<span class="string">'sass-loader'</span>]</span><br><span class="line">        &#125;),</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨ï¼šç”±äºhappyPackä½œè€…è‡ªèº«åŸå› ï¼ˆå¯¹äºjsé€æ¸ç¼ºå°‘å…´è¶£ï¼‰ï¼Œhappypackç°åœ¨å·²ç»åœæ­¢ç»´æŠ¤ã€‚webpack4åŠä»¥åå®˜æ–¹éƒ½æ¨èä½¿ç”¨thread-loaderã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isDev = process.env.NODE_ENV === <span class="string">'development'</span>;</span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="built_in">module</span>:&#123;</span><br><span class="line">        rules:[</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_mudoles/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'thread-loader'</span>,</span><br><span class="line">                        options:&#123;</span><br><span class="line">                            workers: <span class="number">2</span>,</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">                use: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        loader: <span class="string">'thread-loader'</span>,</span><br><span class="line">                        options:&#123;</span><br><span class="line">                            workers: <span class="number">2</span>,</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    isDev ? <span class="string">'style-loader'</span> : MinicssExtractPlugin.loader,</span><br><span class="line">                    <span class="string">'css-loader'</span>,</span><br><span class="line">                    <span class="string">'sass-loader'</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¦æ³¨ï¼šç”±äºè¿›ç¨‹å¯åŠ¨å¤§æ¦‚éœ€è¦600msï¼Œä¸”è¿›ç¨‹çš„é€šä¿¡ä¹Ÿæ˜¯æœ‰å¼€é”€çš„ã€‚æ‰€ä»¥éœ€è¦åšä¸€ä¸ªå–èˆã€‚å¦‚æœé¡¹ç›®æ¯”è¾ƒå°çš„è¯ï¼Œå¤šè¿›ç¨‹å¯ä»¥ä¸å¼€ã€‚</strong></p><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶å®æ€»çš„æ¥è¯´ï¼Œä¼˜åŒ–å…¶å®å¯ä»¥åˆ†ä¸ºå‡ ä¸ªå¤§çš„æ–¹é¢ã€‚</p><p>ç¬¬ä¸€æ˜¯å¯¹åŒ…ä½“ç§¯çš„ä¼˜åŒ–ï¼Œä¸»è¦åŒ…æ‹¬ä¼˜åŒ–å†—ä½™cssï¼Œæå–å…¬å…±ä»£ç ï¼Œtree-shakingï¼Œå‹ç¼©æ–‡ä»¶ï¼‰ç­‰ç­‰æ–¹å¼ã€‚å…¶ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†ä½¿bundleåŒ…æ›´å°ã€‚</p><p>ç¬¬äºŒçš„è¯å°±æ˜¯ä¼˜åŒ–å¯¹bundleåŒ…çš„åŠ è½½ï¼ˆå…¶å®ä¹Ÿå°±æ˜¯ä¼˜åŒ–é¦–é¡µåŠ è½½ï¼‰ï¼Œä¼˜åŒ–åŠ è½½çš„æ ¸å¿ƒæ€æƒ³æˆ‘è®¤ä¸ºæ˜¯åˆ†ç¦»å’ŒæŒ‰éœ€ã€‚ä¸»è¦å°±æ˜¯åˆ†å‰²å®Œæ•´ä»£ç æˆå¤šä¸ªä»£ç ç‰‡ï¼ˆå…¶å®å°±æ˜¯main.js ==&gt; bundle1.js,bundle2.jsè¿™æ ·ï¼‰ï¼Œåˆ†å‰²å‡ºæ¥çš„æ–‡ä»¶é¢—ç²’åº¦æ›´ç»†ã€‚ç„¶åå†æŒ‰éœ€åŠ è½½ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åˆ†å‰²å‡ºçš„æ–‡ä»¶åªåœ¨æˆ‘éœ€è¦ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šåŠ è½½ã€‚ä¸»è¦åŒ…æ‹¬æå–cssåˆ°å•ç‹¬æ–‡ä»¶ä¸­ï¼ˆå‡å°äº†é¦–é¡µjså¤§å°ï¼‰ã€‚</p><p>è¿˜æœ‰ä¸€äº›å…¶å®ƒçš„ä¼˜åŒ–æ–¹å¼ï¼Œæ„Ÿè§‰ä¸å±äºä»¥ä¸Šä¸¤ç§ã€‚ä½†æ˜¯æ„Ÿè§‰ç°åœ¨è‡ªå·±è¯´ä¸å¤ªæ˜ç™½ã€‚ä¸èƒ½å¾ˆå¥½çš„è¡¨è¾¾ï¼Œæš‚æ—¶å…ˆä¸å¤šåšèµ˜è¿°äº†ã€‚</p><p>æœ€åæƒ³è¯´çš„å°±æ˜¯ï¼Œä¼˜åŒ–ä¹Ÿæ˜¯ä¸€é—¨æŠ€æœ¯æ´»ã€‚éœ€è¦æ‡‚å¾—çµæ´»è¿ç”¨ã€‚è€Œä¸æ˜¯å•¥ä¹Ÿä¸ç®¡ç›´æ¥æŠŠæ‰€æœ‰çš„ä¼˜åŒ–æ–¹å¼éƒ½å¼„è¿›æ¥ã€‚éœ€è¦æ ¹æ®é¡¹ç›®å¤§å°å’Œè¿›åº¦æ¥è¿›è¡Œè°ƒæ•´ã€‚</p><h2 id="ç›¸å…³æ–‡ç« "><a class="header-anchor" href="#ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h2><p><a href="https://xzh97.github.io/2020/11/20/learn-webpack/">ã€Webpackã€‘åŸºç¡€é…ç½®</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ å¦‚ä½•ç”¨webpackæ¥ä¼˜åŒ–é¡¹ç›®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¼˜åŒ–æ–¹å¼&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#ä¼˜åŒ–æ–¹
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="webpack" scheme="https://xzh97.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>ã€Webpackã€‘åŸºç¡€é…ç½®</title>
    <link href="https://xzh97.github.io/2020/11/20/learn-webpack/"/>
    <id>https://xzh97.github.io/2020/11/20/learn-webpack/</id>
    <published>2020-11-20T03:51:23.000Z</published>
    <updated>2025-11-24T08:23:41.555Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>é¦‹<code>webpack</code>å·²ç»å¾ˆä¹…äº†ï¼Œä»Šå¤©å°±æ¥å­¦å­¦å§ã€‚ğŸ˜œã€‚</p><p>ï¼ˆç¬¬ä¸€ç‰ˆå…¶å®æ˜¯2æœˆä»½çš„æ–‡ç« äº†ï¼Œä½†æ˜¯æœ€è¿‘è¿™ä¸ªæœˆå†³å®šé‡æ–°å­¦webpackï¼Œæ‰€ä»¥å†³å®šæŠŠæ—¥æœŸæ”¹æˆæœ€è¿‘çš„æ—¶é—´ï¼‰</p><h2 id="æ¦‚å¿µ"><a class="header-anchor" href="#æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>Webpackæ˜¯ä¸€ä¸ªå‰ç«¯èµ„æºåŠ è½½/æ‰“åŒ…å·¥å…·ï¼Œä¹Ÿæ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„ä½“ç°ã€‚</p><h2 id="WebpackåŸºç¡€é…ç½®"><a class="header-anchor" href="#WebpackåŸºç¡€é…ç½®"></a>WebpackåŸºç¡€é…ç½®</h2><h3 id="mode"><a class="header-anchor" href="#mode"></a>mode</h3><p><code>mode</code>ç”¨æ¥å‘ŠçŸ¥<code>webpack</code>éœ€è¦é‡‡ç”¨å¯¹åº”æ¨¡å¼çš„å†…ç½®ä¼˜åŒ–ã€‚å¯ä»¥åœ¨<code>webpack.config.js</code>é‡Œè®¾ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨<code>npm</code>å‘½ä»¤é‡Œæ·»åŠ  <code>--mode</code>å‚æ•°æ¥è®¾ç½®ã€‚æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p><ul><li>development  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.development.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">mode: &#39;development&#39;</span><br><span class="line">plugins: [</span><br><span class="line">    new webpack.NamedModulesPlugin(),</span><br><span class="line">    new webpack.DefinePlugin(&#123; &quot;process.env.NODE_ENV&quot;: JSON.stringify(&quot;development&quot;) &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>production  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; webpack.production.config.js</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">mode: &#39;production&#39;,</span><br><span class="line">plugins: [</span><br><span class="line">    new UglifyJsPlugin(&#x2F;* ... *&#x2F;),</span><br><span class="line">    new webpack.DefinePlugin(&#123; &quot;process.env.NODE_ENV&quot;: JSON.stringify(&quot;production&quot;) &#125;),</span><br><span class="line">    new webpack.optimize.ModuleConcatenationPlugin(),</span><br><span class="line">    new webpack.NoEmitOnErrorsPlugin()</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>è®¾ç½®modeæ—¶åŒæ—¶ä¼šæŠŠ process.env.NODE_ENVè®¾ç½®ä¸ºå½“å‰ç¯å¢ƒçš„å€¼</strong></p><h4 id="entry"><a class="header-anchor" href="#entry"></a>entry</h4><p><code>entry</code>å…¶å®å°±æ˜¯æŒ‡å®š<code>webpack</code>è¯»å–é¡¹ç›®çš„èµ·å§‹ç‚¹ï¼Œé…ç½®æ–¹å¼æœ‰ä»¥ä¸‹è¿™äº›ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="comment">// å•å…¥å£</span></span><br><span class="line">    entry: <span class="string">'./entry1'</span>,</span><br><span class="line">    <span class="comment">//å¤šå…¥å£</span></span><br><span class="line">    entry: [</span><br><span class="line">        <span class="string">'./entry1'</span>,</span><br><span class="line">        <span class="string">'./entry2'</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// å¤šå…¥å£æ—¶</span></span><br><span class="line">    entry:&#123;</span><br><span class="line">        a: <span class="string">'./entry1'</span>,</span><br><span class="line">        <span class="comment">//è‹¥bæœ‰å¤šä¸ªå…¥å£</span></span><br><span class="line">        b: [<span class="string">'./entry2-a'</span>, <span class="string">'./entry2-b'</span>,],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="loader"><a class="header-anchor" href="#loader"></a>loader</h3><p>é¦–å…ˆï¼Œ<code>webpack</code>æœ¬èº«çš„æ‰“åŒ…åªæ˜¯å¯¹jsæ–‡ä»¶çš„æ‰“åŒ…ï¼Œé‚£ä¹ˆéjsæ–‡ä»¶æ€ä¹ˆæ‰“åŒ…è¿›æ¥å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™<code>loader</code>çš„ä½œç”¨å°±ä½“ç°å‡ºæ¥äº†ã€‚<code>loader</code>å°±æ˜¯ä¸€ä¸ªè½¬è¯‘å™¨ï¼Œ<strong>å®ƒå¯ä»¥æŠŠéjsæ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œç„¶åä½¿å¾—éjsæ–‡ä»¶å¯ä»¥è¿›å…¥æ„å»ºåŒ…å†…ã€‚</strong></p><p><a href="https://www.webpackjs.com/api/loaders/" target="_blank" rel="noopener">æƒ³äº†è§£æ›´å¤šçš„loaderä¿¡æ¯å¯ç‚¹å‡»æ­¤å¤„</a></p><p>é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨<code>loader</code>å‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    modules:&#123;</span><br><span class="line">        rules:[</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.css$/</span>, </span><br><span class="line">                <span class="comment">// 1. loaderä¸éœ€è¦åšå…¶å®ƒé…ç½®æ—¶</span></span><br><span class="line">                use: <span class="string">'css-loader'</span>,</span><br><span class="line">                <span class="comment">// 2. loaderéœ€è¦ä¼ å…¥å‚æ•°é…ç½®</span></span><br><span class="line">                use: [</span><br><span class="line">                    loader: <span class="string">'css-loader'</span>,</span><br><span class="line">                    options:&#123;</span><br><span class="line">                        modules: <span class="literal">true</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®è¿˜å¯ä»¥åœ¨<code>cli</code>å‘½ä»¤é‡ŒåŠ å…¥ä»¥ä¸‹<code>--module bind 'css=style-loader!css-loader'</code>ä»¥åŠåœ¨æºç ä¸­ç›´æ¥å¯¼å…¥ <code>loader</code>çš„ä¸œè¥¿ï¼Œä½†æ˜¯è¿™ä¸¤ç§æ–¹å¼éƒ½ä¸å¤ªå¥½ï¼Œå®¹æ˜“å¯¼è‡´æ„å¤–çš„é”™è¯¯ä¸”ä¸æ˜“è°ƒè¯•ã€‚</p><p>æ‰€ä»¥è¿˜æ˜¯æ¨èå†™åœ¨<code>modules.rules</code>ã€‚</p><p>è¿™é‡Œå°±ç®€å•åˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„loader</p><ul><li><code>css-loader</code>: è§£æ<code>css</code>æ–‡ä»¶</li><li><code>style-loader</code>: æŠŠè§£æå¥½çš„<code>css</code>ç”¨<code>style</code>æ ‡ç­¾æ˜¾ç¤ºå‡ºæ¥</li><li><code>babel-loader</code>: æŠŠ<code>es6</code>åŠä¹‹åçš„è¯­æ³•è§£ææˆ<code>es5</code>è¯­æ³•ï¼Œæœ€å¤§çš„ä½œç”¨å°±æ˜¯å…¼å®¹æµè§ˆå™¨ã€‚</li><li><code>url-loader</code>,<code>file-loader</code>: <code>webpack</code>åŠ è½½å›¾ç‰‡, <code>url-loader</code>æ›´åƒæ˜¯<code>file-loader</code>çš„å¢å¼ºç‰ˆã€‚å½“è®¾ç½®<code>limit</code>æ—¶ï¼Œè¶…å‡ºæ­¤èŒƒå›´åˆ™ç”¨<code>file-loader</code>è§£æï¼Œå°äºåˆ™è¿”å›<code>base64</code>æ ¼å¼ã€‚</li><li><code>raw-loader</code>: è¯»å–æ–‡ä»¶å†…çš„å†…å®¹ï¼Œå¹¶ä½œä¸ºå­—ç¬¦ä¸²è¿”å›</li><li><code>sass-loader</code>,<code>less-loader</code>: cssé¢„ç¼–è¯‘æ–‡ä»¶è§£æã€‚</li><li><code>vue-loader</code>: è§£æ<code>.vue</code>æ–‡ä»¶</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    modulesï¼š&#123;</span><br><span class="line">        rules:[</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">                use:[<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'scss-loader'</span>]</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨å¤šä¸ªloaderæ—¶æ˜¯æœ‰é¡ºåºçš„ï¼Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ã€‚ä½†å®é™…è°ƒç”¨è¿‡ç¨‹ä¸Šå¦‚ä¸‹æ‰€ç¤º</span></span><br><span class="line"><span class="comment">// pitchæ–¹æ³•æ„ä¸ºè·³è¿‡</span></span><br><span class="line">|- a-loader <span class="string">`pitch`</span></span><br><span class="line">  |- b-loader <span class="string">`pitch`</span></span><br><span class="line">    |- c-loader <span class="string">`pitch`</span></span><br><span class="line">      |- requested <span class="built_in">module</span> is picked up <span class="keyword">as</span> a dependency</span><br><span class="line">    |- c-loader normal execution</span><br><span class="line">  |- b-loader normal execution</span><br><span class="line">|- a-loader normal execution</span><br></pre></td></tr></table></figure><h3 id="plugins"><a class="header-anchor" href="#plugins"></a>plugins</h3><p>é¦–å…ˆï¼Œ<code>plugin</code>çš„æœºåˆ¶æ¥è¯´æˆ‘ä¸ªäººè§‰å¾—å’Œæµè§ˆå™¨å†…çš„äº¤äº’äº‹ä»¶å…¶å®æ¯”è¾ƒç±»ä¼¼ã€‚å› ä¸º<code>webpack</code>åœ¨è¿è¡Œå‘¨æœŸæ—¶åŒæ ·ä¼šæœ‰å¾ˆå¤šçš„äº‹ä»¶ï¼Œæ‰€ä»¥<code>plugins</code>çš„ä½œç”¨å¯ä»¥ç±»æ¯”äºæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­å¯¹å…ƒç´ çš„äº‹ä»¶ç›‘å¬å¤„ç†ã€‚å…¶å®å°±æ˜¯æˆ‘ä»¬è°ƒç”¨<code>webpack</code>çš„åº•å±‚<code>api</code>æ¥ç¼–å†™å…·ä½“åŠŸèƒ½çš„å®ç°ã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªæ„å»ºæ—¶çš„å¤„ç†ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è¾“å‡ºç»“æœçš„ä¼˜åŒ–ï¼ˆå…¶å®å°±æ˜¯æ‰“åŒ…ä¼˜åŒ–ï¼‰ï¼Œè¿˜å¯ä»¥å¯¹å¼•å…¥èµ„æºè¿›è¡Œç®¡ç†ã€‚ä»è¿™é‡Œæ¥çœ‹ï¼Œ<code>plugins</code>çš„åŠŸèƒ½èŒƒå›´å¯¹æ¯”èµ·<code>loader</code>æ¥è¯´æ˜¯æ›´åŠ å¹¿æ³›çš„ã€‚</p><p><a href="https://www.webpackjs.com/api/plugins/" target="_blank" rel="noopener">æƒ³äº†è§£æ›´å¤šçš„pluginsä¿¡æ¯å¯ç‚¹å‡»æ­¤å¤„</a></p><p>é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨<code>plugins</code>å‘¢ï¼Ÿ å…¶å®åªéœ€è¦åœ¨<code>webpack.config.js</code>é‡Œçš„<code>plugins</code>å‚æ•°é‡Œè®¾ç½®å°±å¯ä»¥äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="comment">// å¼•å…¥æ’ä»¶ç„¶ååœ¨è¿™é‡Œä¼ å…¥æ’ä»¶çš„å®ä¾‹åŒ–å¯¹è±¡ï¼Œ</span></span><br><span class="line">        <span class="comment">// new plugin(&#123;//æ’ä»¶å‚æ•°...&#125;)</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸¾ä¸ªå…·ä½“çš„æ —å­ï¼š</span></span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">            template: <span class="string">'./index.html'</span>,</span><br><span class="line">            </span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹åˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„æ’ä»¶ï¼š</p><ul><li><code>mini-css-extract-plugin</code> &amp; <code>extract-text-webpack-plugin</code><ul><li>ä½œç”¨ï¼šæŠ½ç¦»<code>css</code>åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­å¹¶ä»¥<code>link</code>å¼•å…¥åˆ°<code>html</code>ä¸­ä½¿ç”¨ã€‚</li><li>ä½¿ç”¨ï¼š<code>webpack &gt;= 4.0 ? mini-css-extract-plugin : extract-text-webpack-plugin</code></li></ul></li><li><code>html-webpack-plugin</code>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins:[</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        template: <span class="string">'./index.html'</span>, <span class="comment">// æ¨¡æ¿html,</span></span><br><span class="line">        filename: <span class="string">'index.html'</span>, <span class="comment">// ç›®æ ‡html</span></span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><code>mini-css-extract-plugin</code><ul><li>æ‰“åŒ…çš„æ—¶å€™æå–<code>css</code>åˆ°å•ç‹¬çš„æ–‡ä»¶ï¼Œå¹¶ä¸”æ”¯æŒæŒ‰éœ€åŠ è½½å’Œ<code>sourceMap</code></li></ul></li><li><code>progress-bar-webpack-plugin</code><ul><li><code>vue-cli 3</code>æ‰“åŒ…çš„æ—¶å€™æ— æ³•æ˜¾ç¤ºå‡ºæ‰“åŒ…æ‰€èŠ±è´¹çš„æ—¶é—´ï¼ŒåŠ è¿™ä¸ªå¯ä»¥æ˜¾ç¤ºå‡ºæ¥</li></ul></li><li><code>purge-css-webpack-plugin</code><ul><li>åˆ é™¤æœªä½¿ç”¨çš„<code>css</code></li></ul></li><li><code>DLLPluginå’ŒDLLReferencePlugin</code><ul><li><code>DLLPlugin</code>ä¸»è¦ä½œç”¨æ˜¯æŠŠä¸€äº›ä¸ç»å¸¸å˜åŒ–çš„ç¬¬ä¸‰æ–¹åº“å•ç‹¬æ‰“åŒ…å‡ºæ¥ï¼Œç„¶åä¼šç”Ÿæˆä¸€ä¸ª<code>manifest.json</code>ï¼Œç„¶åé€šè¿‡<code>DLLReferencePlugin</code>å»å¼•ç”¨ã€‚å¯ä»¥æå‡æ„å»ºé€Ÿåº¦</li></ul></li><li><code>add-asset-html-webpack-plugin</code><ul><li>é¡µé¢æ‰“åŒ…åï¼Œæ’å…¥æˆ‘ä»¬ç‰¹å®š<code>script</code>çš„å¼•ç”¨ï¼Œæ¥è¾¾åˆ°å…¨å±€å˜é‡çš„æ•ˆæœï¼ˆæš´éœ²åœ¨<code>Window</code>ä¸‹ï¼‰</li></ul></li><li><code>commons-chunk-plugin</code>&amp;<code>split-chunk-plugin</code><ul><li>ä¸¤è€…ä¸»è¦æ˜¯ç”¨æ¥æå–ç¬¬ä¸‰æ–¹åº“å’Œå…¬å…±æ¨¡å—ä»£ç ï¼Œé¿å…é¦–å±åŠ è½½çš„bundleæ–‡ä»¶æˆ–è€…æŒ‰éœ€åŠ è½½çš„bundleæ–‡ä»¶ä½“ç§¯è¿‡å¤§ï¼Œä»è€Œå¯¼è‡´åŠ è½½æ—¶é—´è¿‡é•¿ã€‚</li><li>åè€…æ˜¯å‰è€…çš„å‡çº§ç‰ˆï¼Œè§£å†³äº†å‰è€…åœ¨æå–å…¬å…±ä»£ç çš„é‡å¤é—®é¢˜ã€‚ä¸”webpack4ä¸­å·²ç»åˆ é™¤äº†<code>commons-chunk-plugin</code>æ”¹ç”¨äº†<code>split-chunk-plugin</code>ã€‚</li></ul>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; commonså’Œsplitçš„å¯¹æ¯”</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; commons-chunk-plugin</span><br><span class="line">chunk-a: react, react-dom, a-comp</span><br><span class="line">chunk-b: react, react-dom, b-comp</span><br><span class="line">&#x2F;&#x2F; ä¼šå‡ºç°é‡å¤ä»£ç </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; split-chunk-plugin</span><br><span class="line">chunk-a ~ chunk-b : react, react-dom,</span><br><span class="line">chunk-a: a-comp</span><br><span class="line">chunk-b: b-comp</span><br><span class="line">&#x2F;&#x2F; ä¸ä¼šå‡ºç°é‡å¤ä»£ç </span><br></pre></td></tr></table></figure></li></ul><h3 id="resolve"><a class="header-anchor" href="#resolve"></a>resolve</h3><p><code>resolve</code>çš„ä½œç”¨æ˜¯è®¾ç½®æ¨¡å—æ€ä¹ˆè¢«è§£æï¼Œæ•°æ®ç»“æ„æ˜¯<code>Object</code>ã€‚æ¥ä¸‹æ¥åˆ—ä¸¾ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„å±æ€§ã€‚</p><h4 id="alias"><a class="header-anchor" href="#alias"></a>alias</h4><p><code>alias</code>ä½œç”¨æ˜¯è®¾ç½®åˆ«åï¼Œå¯ä»¥ä½¿å¾—å¼•å…¥æ¨¡å—å˜å¾—æ›´åŠ ç®€å•ã€‚ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    resolve:&#123;</span><br><span class="line">        alias:&#123;</span><br><span class="line">            <span class="comment">// path.resolveæ¥ç¡®å®šå¼•å…¥è·¯å¾„ä¸ä¼šå‡ºé—®é¢˜</span></span><br><span class="line">            <span class="string">"@"</span>: path.resolve(__dirname, <span class="string">'./src'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥æ¨¡å—æ—¶</span></span><br><span class="line"><span class="keyword">import</span> HomeView <span class="keyword">from</span> <span class="string">'@/views/home/index.vue'</span>;</span><br></pre></td></tr></table></figure><h4 id="extensions"><a class="header-anchor" href="#extensions"></a>extensions</h4><p><code>extensions</code>ä½œç”¨æ˜¯è‡ªåŠ¨æ‰©å±•ï¼Œå¯ä»¥è‡ªåŠ¨è§£æç¡®å®šçš„æ‰©å±•ã€‚ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    resolve:&#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤é€‰é¡¹æ˜¯.js .json</span></span><br><span class="line">        extensions: [<span class="string">'.js'</span>, <span class="string">'json'</span>, <span class="string">'.vue'</span>],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•å…¥æ¨¡å—æ—¶å¯ä»¥ä¸æŒ‡å®šæ‰©å±•ï¼ˆä¹Ÿå°±æ˜¯æ–‡ä»¶åç¼€åï¼‰</span></span><br><span class="line"><span class="keyword">import</span> HomeView <span class="keyword">from</span> <span class="string">'@/views/home/index'</span>;</span><br></pre></td></tr></table></figure><h4 id="modules"><a class="header-anchor" href="#modules"></a>modules</h4><p><code>modules</code>ä½œç”¨æ˜¯å‘Šè¯‰webpackè§£ææ—¶åº”è¯¥æœç´¢çš„ç›®å½•ã€‚ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    resolve:&#123;</span><br><span class="line">        <span class="comment">// æ„æ€æ˜¯webpackæœç´¢ç›®å½•ä¼˜å…ˆæ‰¾srcç›®å½•ä¸‹çš„ï¼Œæ²¡æœ‰å†ä»node_modulesæ‰¾</span></span><br><span class="line">        modules: [path.resolve(__dirname, <span class="string">'./src/'</span>), <span class="string">'node_modules'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ­¤æ—¶ä¹Ÿå¯ä»¥ä¸å†™å‰é¢çš„ '@/'ï¼Œå’Œaliasæœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™</span></span><br><span class="line"><span class="keyword">import</span> HomeView <span class="keyword">from</span> <span class="string">'views/home/index.vue'</span>;</span><br></pre></td></tr></table></figure><h3 id="devServer"><a class="header-anchor" href="#devServer"></a>devServer</h3><p><code>devServer</code>æ˜¯å¼€å‘ä¸­ç”¨æ¥å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œæ–¹ä¾¿å¼€å‘ã€‚ä¸‹é¢ä¸¾ä¸ªæ —å­æ¥è¯´æ˜å„å±æ€§ä½œç”¨ğŸ˜‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        open: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">        port: <span class="number">8080</span>, <span class="comment">// æœ¬åœ°æœåŠ¡å¯ç”¨ç«¯å£</span></span><br><span class="line">        <span class="comment">// webpackä¸­æœ‰ä¸€ä¸ªhotModuleReplacementPlugin, hoté€‰é¡¹å…¶å®å°±å¯ä»¥å½“ä½œæ˜¯å¦å¯ç”¨äº†è¿™ä¸ªæ’ä»¶ã€‚</span></span><br><span class="line">        hot: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¯ç”¨çƒ­æ›´æ–°</span></span><br><span class="line">        compress: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¯ç”¨gzipå‹ç¼©</span></span><br><span class="line">        https: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¯ç”¨https</span></span><br><span class="line">        <span class="comment">// æ˜¯å¦å¼€å¯ä»£ç†</span></span><br><span class="line">        proxy: &#123;</span><br><span class="line">            <span class="string">'/api'</span>: &#123;</span><br><span class="line">                target: <span class="string">'localhost:3000/'</span>, <span class="comment">// å¯¹åº”è‡ªå·±çš„åç«¯æ¥å£</span></span><br><span class="line">                changeOrigin: <span class="literal">true</span>, <span class="comment">// è¯·æ±‚å¤´ä¸­æ˜¾ç¤ºtarget</span></span><br><span class="line">                ws: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦ä»£ç†websocket</span></span><br><span class="line">                pathRewrite: &#123;</span><br><span class="line">                  <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// æ˜¯å¦æŒ‡å®šé™æ€æ–‡ä»¶ç›®å½•ï¼Œ</span></span><br><span class="line">        contentBase: path.join(__dirname, <span class="string">"public"</span>), </span><br><span class="line">        publicPath: <span class="string">'/'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="externals"><a class="header-anchor" href="#externals"></a>externals</h3><p>æŒ‰ç…§<code>webpack</code>å®˜ç½‘é‡Œçš„è§£é‡Šï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¼•ç”¨ä¸€ä¸ªåº“ï¼Œä½†æ˜¯åˆä¸æƒ³æŠŠ<code>webpack</code>æŠŠå®ƒæ‰“è¿›åŒ…é‡Œä¸”æˆ‘ä»¬å¸Œæœ›å¯ä»¥æ­£å¸¸å¼•ç”¨è¿™ä¸ªåº“ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨<code>externals</code>é…ç½®ã€‚ä¾‹å¦‚å®˜ç½‘ä¸­çš„æ —å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.html</span></span><br><span class="line">&lt;script</span><br><span class="line">  src=<span class="string">"https://code.jquery.com/jquery-3.1.0.js"</span></span><br><span class="line">  integrity=<span class="string">"sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="</span></span><br><span class="line">  crossorigin=<span class="string">"anonymous"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/webpack.config.js</span></span><br><span class="line"><span class="regexp">const config = &#123;</span></span><br><span class="line"><span class="regexp">    externals: &#123;</span></span><br><span class="line"><span class="regexp">        jquery: jQuery</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ å¼•ç”¨</span></span><br><span class="line"><span class="regexp">import $ from 'jquery';</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">$('.my-element').animate(...);</span></span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³æ–‡ç« "><a class="header-anchor" href="#ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h2><p><a href="https://xzh97.github.io/2020/12/03/learn-webpack-optimization/">ã€Webpackã€‘é¡¹ç›®ä¼˜åŒ–</a></p><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h2><p>å…¶å®çœ‹äº†è¿™äº›é…ç½®ï¼ŒåŸºç¡€çš„webpacké…ç½®å·²ç»æ²¡æœ‰å•¥å¤§é—®é¢˜äº†ã€‚è¿˜æœ‰ä¸€äº›æ¯”è¾ƒå°çš„ç‚¹å°±æ²¡å†™äº†ï¼Œä¹‹åæœ‰ç–‘é—®ä¹Ÿå¯ä»¥å»<a href="https://www.webpackjs.com/concepts/" target="_blank" rel="noopener">webpackä¸­æ–‡ç½‘</a>æŸ¥çœ‹å¯¹åº”éƒ¨åˆ†é…ç½®ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;é¦‹&lt;code&gt;webpack&lt;/code&gt;å·²ç»å¾ˆä¹…äº†ï¼Œä»Šå¤©å°±æ¥å­¦å­¦å§ã€‚ğŸ˜œã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆç¬¬ä¸€ç‰ˆå…¶å®æ˜¯2æœˆä»½çš„æ–‡ç« äº†ï¼Œä½†æ˜¯æœ€è¿‘è¿™ä¸ªæœˆå†³å®šé‡æ–°å­¦webp
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="webpack" scheme="https://xzh97.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>ä¿¡æ¯å®‰å…¨å­¦ä¹ </title>
    <link href="https://xzh97.github.io/2020/08/23/information-safe/"/>
    <id>https://xzh97.github.io/2020/08/23/information-safe/</id>
    <published>2020-08-23T09:59:27.000Z</published>
    <updated>2025-11-24T08:23:41.554Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>æ˜¨å¤©æˆ‘ä»¬å›¢é˜Ÿçš„<strong>å®‰å…¨å¤§ä½¬</strong>ç»™æˆ‘ä»¬å¼€å±•äº†ä¸€ä¸ªå®‰å…¨åŸ¹è®­ï¼Œæ€•è‡ªå·±ä¹‹åå¾ˆå®¹æ˜“ä¼šå¿˜æ‰ã€‚æ‰€ä»¥å†™ç¯‡æ–‡ç« æ¥è®°å½•ä¸€äº›å¸¸è§çš„å®‰å…¨é—®é¢˜ä»¥åŠåº”å¯¹ç­–ç•¥ã€‚åŒæ—¶ä¹Ÿæ–¹ä¾¿è‡ªå·±éšæ—¶é˜…è¯»ï¼ŒåŠ æ·±å¯¹äºä¿¡æ¯å®‰å…¨çš„ç†è§£</p><h2 id="å¸¸è§çš„å®‰å…¨é—®é¢˜"><a class="header-anchor" href="#å¸¸è§çš„å®‰å…¨é—®é¢˜"></a>å¸¸è§çš„å®‰å…¨é—®é¢˜</h2><h3 id="sql-Injectionï¼ˆsqlæ³¨å…¥ï¼‰"><a class="header-anchor" href="#sql-Injectionï¼ˆsqlæ³¨å…¥ï¼‰"></a>sql Injectionï¼ˆsqlæ³¨å…¥ï¼‰</h3><p>sqlæ³¨å…¥çš„<strong>æ ¸å¿ƒåŸç†</strong>æ˜¯å› ä¸ºæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹åš<strong>éªŒè¯</strong>å’Œ<strong>å‡€åŒ–</strong>å¤„ç†ã€‚æ”»å‡»è€…åœ¨è¾“å…¥çš„å†…å®¹é‡Œæ„é€ æ¶æ„sqlè¯­å¥ç„¶åæäº¤ç»™æœåŠ¡ç«¯æ‰§è¡Œï¼ˆå¥½éš¾ä¸¾ä¾‹ï¼Œæˆ‘åœ¨æˆ‘è‡ªå·±çš„é¡¹ç›®é‡Œæ²¡æ„é€ å‡ºæ¥ï¼‰</p><h4 id="å‡è½»æˆ–è€…å¼±åŒ–sqlæ³¨å…¥çš„æ–¹å¼ï¼š"><a class="header-anchor" href="#å‡è½»æˆ–è€…å¼±åŒ–sqlæ³¨å…¥çš„æ–¹å¼ï¼š"></a>å‡è½»æˆ–è€…å¼±åŒ–sqlæ³¨å…¥çš„æ–¹å¼ï¼š</h4><ul><li>å¯¹ç”¨æˆ·æäº¤çš„æ•°æ®è¿›è¡Œå†…å®¹è½¬ä¹‰/å†…å®¹éªŒè¯</li><li>ç™½åå•æœºåˆ¶</li><li>ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥ï¼Œå‚æ•°åŒ–æŸ¥è¯¢çš„æ–¹å¼ï¼ˆè¿™é‡Œæˆ‘ä¹‹å‰å†™åšå®¢åç«¯æœåŠ¡çš„æ—¶å€™ï¼Œæœ‰çœ‹åˆ«äººè¿™ä¹ˆå†™ä½†ä¸æ˜¯å¾ˆæ¸…æ¥šå…¶ä¸­ç¼˜ç”±ã€‚è¿™æ¬¡æœ‰ç‚¹æç„¶å¤§æ˜ç™½çš„æ„Ÿjioï¼‰</li><li>ä»ç­–ç•¥ä¸Šæ¥è¯´ï¼Œæœ€ç›´æ¥æœ‰æ•ˆçš„æ–¹å¼å°±æ˜¯<strong>å……é’±</strong>ä¹°æ”¯æŒé˜²å¾¡æ³¨å…¥æ”»å‡»çš„WAFï¼ˆåº”ç”¨ç¨‹åºé˜²ç«å¢™ï¼‰ï¼Œä½ æ‡‚çš„ï¼Œ<strong>å……é’±èƒ½ä½¿ä½ æ›´å¼º</strong></li></ul><p>å…¶ä¸­å‘¢ï¼Œå‰ç«¯èƒ½åšçš„å°±æ˜¯å¯¹è¾“å…¥çš„æ•°æ®åšä¸€äº›æ ¡éªŒï¼ˆå…¶å®ä¹Ÿæ²¡å•¥å¤ªå¤§ç”¨å¤„ï¼Œå› ä¸ºç”¨æˆ·çš„è¾“å…¥æ˜¯éšå¿ƒæ‰€æ¬²çš„ï¼Œæ€»ä¼šæœ‰æ¼æ´å¯ä»¥ç»•è¿‡éªŒè¯ï¼‰ã€‚<strong>æ ¹æºä¸Šçš„è§£å†³æ–¹æ³•è¿˜å¾—æ˜¯é¢„ç¼–è¯‘è¯­å¥å’Œå‚æ•°åŒ–çš„æŸ¥è¯¢</strong>ï¼Œå®ƒçš„å¤§ä½“è¿‡ç¨‹æ˜¯sqlæœåŠ¡å™¨å…ˆæ‰§è¡Œsqlå­˜åˆ°ç¼“å­˜æ± é‡Œï¼Œç„¶åæŠŠè¾“å…¥çš„æ•°æ®å½“ä½œ<strong>å‚æ•°å˜é‡</strong>ä¼ è¿›æ¥ã€‚è€ŒsqlæœåŠ¡å™¨ä¸ä¼šæŠŠå‚æ•°å˜é‡é‡Œçš„å€¼å½“æˆsqlè¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œä»è€Œé˜²æ­¢æ³¨å…¥ã€‚</p><h3 id="Broken-Authenticationï¼ˆä¸­æ–­èº«ä»½è®¤è¯ï¼‰"><a class="header-anchor" href="#Broken-Authenticationï¼ˆä¸­æ–­èº«ä»½è®¤è¯ï¼‰"></a>Broken Authenticationï¼ˆä¸­æ–­èº«ä»½è®¤è¯ï¼‰</h3><h4 id="å¸¸è§é—®é¢˜ï¼š"><a class="header-anchor" href="#å¸¸è§é—®é¢˜ï¼š"></a>å¸¸è§é—®é¢˜ï¼š</h4><ul><li>å¼±å£ä»¤<ul><li>å£ä»¤é•¿åº¦æ˜¯å¦å¤§äº8</li><li>å£ä»¤æ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œå¤§å†™å­—æ¯ï¼Œå°å†™å­—æ¯ï¼Œæ•°å­—çš„ä¸‰ç±»</li></ul></li><li>å¯†ç æ³„éœ²</li><li>å¯†ç çˆ†ç ´</li><li>æ˜æ–‡å¯†ç <br><img src="http://qfi1chz6p.hn-bkt.clouddn.com/broken_authentication.png" alt="image"></li></ul><p>è§£é‡Šä¸€ä¸‹Sessionè¦†ç›–ã€‚sessionæˆ–cookieçš„è¦†ç›–(å®ƒè¢«ç”¨ä½œä¿®æ”¹æŒ‡å®šç”¨æˆ·çš„å¯†ç ,å¯èƒ½å°±æ˜¯ç”¨æˆ·å),è€ŒæœåŠ¡å™¨ç«¯åªæ˜¯ç®€å•åˆ¤æ–­äº†ä¸€ä¸‹ä¿®æ”¹é“¾æ¥çš„keyæ˜¯å¦å­˜åœ¨å°±å¯ä»¥ä¿®æ”¹å¯†ç äº†,è€Œæ²¡æœ‰åˆ¤æ–­keyæ˜¯å¦å¯¹åº”æŒ‡å®šç”¨æˆ·åã€‚ä¸¾ä¸ªä¾‹å­ï¼šå…ˆå‘è‡ªå·±é‚®ç®±Aå‘ä¸€å°æ‰¾å›å¯†ç ï¼Œå†å‘ç”¨æˆ·Bçš„é‚®ç®±å‘ä¸€å°ï¼Œå½“å‰æµè§ˆå™¨è®°å½•ç”¨æˆ·Bçš„è´¦æˆ·ä¿¡æ¯ï¼Œç„¶åå»è‡ªå·±çš„é‚®ç®±Aç‚¹å‡»æ‰¾å›å¯†ç é“¾æ¥ï¼Œè¯»å–äº†å­˜åœ¨æµè§ˆå™¨ç”¨æˆ·Bçš„è´¦æˆ·ä¿¡æ¯ï¼ŒæˆåŠŸä¿®æ”¹äº†å¯†ç </p><h4 id="ä¸»è¦å¯¹ç­–ï¼š"><a class="header-anchor" href="#ä¸»è¦å¯¹ç­–ï¼š"></a>ä¸»è¦å¯¹ç­–ï¼š</h4><ul><li>ä½¿ç”¨å®‰å…¨çš„è®¤è¯æ¡†æ¶</li><li>æ­£ç¡®åŠ å¯†</li><li>ç¦ç”¨å¼±å£ä»¤</li></ul><h3 id="Sensitive-Data-Exposure-ï¼ˆæ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼‰"><a class="header-anchor" href="#Sensitive-Data-Exposure-ï¼ˆæ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼‰"></a>Sensitive Data Exposure ï¼ˆæ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼‰</h3><p>è¿™ä¸ªé—®é¢˜å¸¸è§äºhttpä¼ è¾“ä¸­ï¼Œå› ä¸ºhttpåè®®æ˜¯ä¸€ä¸ªæ˜æ–‡ä¼ è¾“çš„åè®®ã€‚</p><h4 id="æ•æ„Ÿä¿¡æ¯å®šä¹‰"><a class="header-anchor" href="#æ•æ„Ÿä¿¡æ¯å®šä¹‰"></a>æ•æ„Ÿä¿¡æ¯å®šä¹‰</h4><ul><li>ä¸šåŠ¡æµç¨‹çš„æ•æ„Ÿä¿¡æ¯ï¼ˆè‚¯å®šä¸æ­¢è¿™äº›ï¼Œè¿™é‡Œåªåˆ—å‡ºä¸€äº›æ¯”è¾ƒå¸¸è§çš„ä¿¡æ¯ï¼‰<ul><li>token</li><li>session</li><li>cookie</li><li>password</li></ul></li><li>ç”¨æˆ·/å®¢æˆ·æ ‡è¯†ä¿¡æ¯<ul><li>ç”µè¯å·ç </li><li>èº«ä»½è¯å·ç </li><li>èŒä½</li><li>å®¢æˆ·çš„èµ„äº§ä¿¡æ¯ï¼ˆæ½œåœ¨å®¢æˆ·ï¼ŒåˆåŒä¿¡æ¯ç­‰ï¼‰</li><li>ç”Ÿç‰©ç‰¹å¾ä¿¡æ¯ï¼ˆæŒ‡çº¹ï¼Œè™¹è†œç­‰ï¼‰</li></ul></li></ul><h4 id="ä¿æŠ¤æ•æ„Ÿä¿¡æ¯çš„å¯¹ç­–"><a class="header-anchor" href="#ä¿æŠ¤æ•æ„Ÿä¿¡æ¯çš„å¯¹ç­–"></a>ä¿æŠ¤æ•æ„Ÿä¿¡æ¯çš„å¯¹ç­–</h4><p>æ•æ„Ÿä¿¡æ¯çš„ä¿æŠ¤é€šå¸¸éœ€è¦è´¯ç©¿æ•´ä¸ªä¸šåŠ¡æµç¨‹</p><ul><li>åœ¨infraå±‚è¦é‡‡ç”¨ç¬¦åˆæ ‡å‡†çš„TLSç‰ˆæœ¬ï¼Œï¼ˆå¤§äºç­‰äº1.2ï¼‰ï¼Œå¹¶ä¸”æœ‰é€‰æ‹©çš„ç¦ç”¨å¯†ç å¥—ä»¶</li><li>é‡‡è´­å¯ä¿¡CAçš„è¯ä¹¦ï¼Œå¹¶ä¸”å®šæœŸæ›´æ–°</li><li>å¯¹æœåŠ¡å™¨é‡Œçš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œè„±æ•</li><li>ä½¿ç”¨å®‰å…¨çš„å¯¹ç§°/éå¯¹ç§°åŠ å¯†ç®—æ³•</li><li>é‡‡ç”¨POSTæ–¹æ³•æäº¤æ•æ„Ÿæ•°æ®</li></ul><h3 id="XML-External-Entities-XXE-ï¼ˆXML-å¤–éƒ¨å¤„ç†å™¨æ¼æ´ï¼‰"><a class="header-anchor" href="#XML-External-Entities-XXE-ï¼ˆXML-å¤–éƒ¨å¤„ç†å™¨æ¼æ´ï¼‰"></a>XML External Entities (XXE)ï¼ˆXML å¤–éƒ¨å¤„ç†å™¨æ¼æ´ï¼‰</h3><p>XXEé€šå¸¸ä¼šå‡ºç°åœ¨åŸºäºSOAPçš„ç³»ç»Ÿä¸­ï¼Œé€šå¸¸éœ€è¦å¯ç”¨DTDï¼ˆdocument type definitionsï¼‰ã€‚<br>åœ¨åº”ç”¨é‡Œæ¯”è¾ƒæœ‰å¯èƒ½å­˜åœ¨çš„XXEçš„ç‚¹æ˜¯ï¼Œå¦‚æœæŸäº›åŠŸèƒ½æ˜¯é€šè¿‡SAMLæ¥å®Œæˆçš„ï¼ŒSAMLä½¿ç”¨XMLä½œä¸ºidentity assertion<br>å¦å¤–ç»è¿‡æµ‹è¯•ï¼Œxxåº”ç”¨çš„Excelæ–‡ä»¶ä¸Šä¼ ä¸‹è½½éƒ¨åˆ†ï¼Œä¸å—XXEçš„å½±å“ï¼ˆXMLè§£æå™¨å®‰å…¨ï¼‰ã€‚<br>å¦å¤–å¦‚æœéœ€è¦æ•´ä½“ä¸Šå¿«é€Ÿæ’æŸ¥XXEæ¼æ´ï¼Œå¯ä»¥ä½¿ç”¨æºä»£ç åˆ†æå·¥å…·ï¼š<a href="https://owasp.org/www-community/Source_Code_Analysis_Tools" target="_blank" rel="noopener">https://owasp.org/www-community/Source_Code_Analysis_Tools</a></p><h3 id="Broken-Access-Controlï¼ˆä¸­æ–­è®¿é—®æ§åˆ¶ï¼‰"><a class="header-anchor" href="#Broken-Access-Controlï¼ˆä¸­æ–­è®¿é—®æ§åˆ¶ï¼‰"></a>Broken Access Controlï¼ˆä¸­æ–­è®¿é—®æ§åˆ¶ï¼‰</h3><h4 id="åŸå› "><a class="header-anchor" href="#åŸå› "></a>åŸå› </h4><p>é™åˆ¶<strong>è®¤è¯çš„ç”¨æˆ·å¯ä»¥å®ç°å“ªäº›æ“ä½œ</strong>çš„å‘½ä»¤æ²¡æœ‰å¾—åˆ°æ­£ç¡®çš„æ‰§è¡Œã€‚</p><h4 id="é—®é¢˜"><a class="header-anchor" href="#é—®é¢˜"></a>é—®é¢˜</h4><p>æ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™äº›æ¼æ´è®¿é—®æœªç»æˆæƒçš„åŠŸèƒ½å’Œæ•°æ®ï¼Œä¾‹å¦‚è®¿é—®å…¶ä»–ç”¨æˆ·çš„è´¦æˆ·ï¼ŒæŸ¥çœ‹æ•æ„Ÿæ–‡ä»¶ï¼Œç¯¡æ”¹å…¶ä»–ç”¨æˆ·çš„æ•°æ®ï¼Œæ›´æ”¹è®¿é—®æƒé™ç­‰ã€‚</p><h4 id="å¯¹ç­–"><a class="header-anchor" href="#å¯¹ç­–"></a>å¯¹ç­–</h4><ul><li>æœ€å°æƒé™åŸåˆ™ï¼šåªç»™å½“å‰ç¨‹åºè¿è¡Œéœ€è¦çš„æœ€å°ä¿¡æ¯æˆ–èµ„æºã€‚å¯ä»¥æœ‰æ•ˆé™ä½è¢«æ¶æ„ç”¨æˆ·åˆ©ç”¨æ—¶é€ æˆçš„æŸå¤±</li><li>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆå¯¹è§’è‰²æƒé™ï¼‰ï¼šå¯¹ç³»ç»Ÿæ“ä½œçš„å„ç§æƒé™ä¸æ˜¯ç›´æ¥æˆäºˆå…·ä½“çš„ç”¨æˆ·ï¼Œè€Œæ˜¯åœ¨ç”¨æˆ·é›†åˆä¸æƒé™é›†åˆä¹‹é—´å»ºç«‹ä¸€ä¸ªè§’è‰²é›†åˆã€‚æ¯ä¸€ç§è§’è‰²å¯¹åº”ä¸€ç»„ç›¸åº”çš„æƒé™ã€‚ä¸€æ—¦ç”¨æˆ·è¢«åˆ†é…äº†é€‚å½“çš„è§’è‰²åï¼Œè¯¥ç”¨æˆ·å°±æ‹¥æœ‰æ­¤è§’è‰²çš„æ‰€æœ‰æ“ä½œæƒé™ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œä¸å¿…åœ¨æ¯æ¬¡åˆ›å»ºç”¨æˆ·æ—¶éƒ½è¿›è¡Œåˆ†é…æƒé™çš„æ“ä½œï¼Œåªè¦åˆ†é…ç”¨æˆ·ç›¸åº”çš„è§’è‰²å³å¯ï¼Œè€Œä¸”è§’è‰²çš„æƒé™å˜æ›´æ¯”ç”¨æˆ·çš„æƒé™å˜æ›´è¦å°‘å¾—å¤šï¼Œè¿™æ ·å°†ç®€åŒ–ç”¨æˆ·çš„æƒé™ç®¡ç†ï¼Œå‡å°‘ç³»ç»Ÿçš„å¼€é”€ã€‚</li><li>æ—¥å¿—è®°å½•è®¿é—®ï¼šå¯¹ç”¨æˆ·çš„æ“ä½œè¿›è¡Œæ—¥å¿—è®°å½•ï¼Œå‡ºç°å¼‚å¸¸æ—¶å¯ä»¥åŠæ—¶æ’æŸ¥åŸå› ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½æŸå¤±</li></ul><h3 id="security-misconfigurationï¼ˆé”™è¯¯å®‰å…¨é…ç½®ï¼‰"><a class="header-anchor" href="#security-misconfigurationï¼ˆé”™è¯¯å®‰å…¨é…ç½®ï¼‰"></a>security misconfigurationï¼ˆé”™è¯¯å®‰å…¨é…ç½®ï¼‰</h3><h4 id="åŸå› -v2"><a class="header-anchor" href="#åŸå› -v2"></a>åŸå› </h4><ul><li>å®‰å…¨è¿è¥</li><li>æ¯”å¦‚æœªä¿®å¤çš„æ¼æ´</li><li>è®¿é—®é»˜è®¤è´¦æˆ·</li><li>ä¸å†ä½¿ç”¨çš„é¡µé¢</li><li>æœªå—ä¿æŠ¤çš„æ–‡ä»¶å’Œç›®å½•ç­‰</li></ul><h4 id="å¯¹ç­–-v2"><a class="header-anchor" href="#å¯¹ç­–-v2"></a>å¯¹ç­–</h4><p>ç¨‹åºä¸­æ¥å…¥çš„ç¬¬ä¸‰æ–¹æä¾›çš„ä¸œè¥¿éƒ½éœ€è¦è¿›è¡Œå®‰å…¨é…ç½®å¤–ï¼Œè¿˜å¿…é¡»è¦åŠæ—¶è¿›è¡Œæ›´æ–°å’Œå‡çº§ã€‚</p><h3 id="XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰"><a class="header-anchor" href="#XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰"></a>XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰</h3><h4 id="åŸå› -v3"><a class="header-anchor" href="#åŸå› -v3"></a>åŸå› </h4><p>ç½‘ç«™å°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹è¾“å‡ºåˆ°é¡µé¢ä¸Šï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½æœ‰æ¶æ„ä»£ç è¢«æµè§ˆå™¨æ‰§è¡Œ</p><p>è·¨ç«™è„šæœ¬æ”»å‡»,å®ƒæŒ‡çš„æ˜¯æ¶æ„æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„htmlä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„htmlä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„ç”¨æˆ·çš„ç‰¹æ®Šç›®çš„ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯XSSæ˜¯ä¸€ä¸ªå®Œå…¨äºå®¢æˆ·ç«¯è§¦å‘çš„å®‰å…¨é£é™©ï¼Œæ¶‰åŠåˆ°æœåŠ¡å™¨ç«¯çš„éƒ¨åˆ†åœ¨ç°å®æ„ä¹‰çš„æ”»å‡»é‡Œé€šå¸¸æ˜¯XSS+CSRFè·å¾—ç”¨æˆ·çš„Token/Cookie/å…¶ä»–Credentials</p><h4 id="å¯¹ç­–-v3"><a class="header-anchor" href="#å¯¹ç­–-v3"></a>å¯¹ç­–</h4><ul><li>éªŒè¯æ‰€æœ‰è¾“å…¥æ•°æ®ï¼Œå‰ç«¯å¯¹ç”¨æˆ·æäº¤å†…å®¹è¿›è¡Œå†…å®¹éªŒè¯/å†…å®¹è½¬ä¹‰</li><li>å¯¹è¾“å‡ºæ•°æ®è¿›è¡Œé€‚å½“ç¼–ç ï¼Œé˜²æ­¢æˆåŠŸæ³¨å…¥çš„æ¶æ„è„šæœ¬è¢«è¿è¡Œ</li></ul><p>å…·ä½“å‚è§ä¸‹é¢</p><ul><li>è¾“å…¥éªŒè¯ï¼šæŸä¸ªæ•°æ®è¢«æ¥å—ä¸ºå¯è¢«æ˜¾ç¤ºæˆ–å­˜å‚¨ä¹‹å‰ï¼Œä½¿ç”¨æ ‡å‡†è¾“å…¥éªŒè¯æœºåˆ¶ï¼ŒéªŒè¯æ‰€æœ‰è¾“å…¥æ•°æ®çš„é•¿åº¦ã€ç±»å‹ã€è¯­æ³•ä»¥åŠä¸šåŠ¡è§„åˆ™ã€‚</li><li>è¾“å‡ºç¼–ç ï¼šæ•°æ®è¾“å‡ºå‰ï¼Œç¡®ä¿ç”¨æˆ·æäº¤çš„æ•°æ®å·²è¢«æ­£ç¡®è¿›è¡Œentityç¼–ç ï¼Œå»ºè®®å¯¹æ‰€æœ‰å­—ç¬¦è¿›è¡Œç¼–ç è€Œä¸ä»…å±€é™äºæŸä¸ªå­é›†ã€‚</li><li>æ˜ç¡®æŒ‡å®šè¾“å‡ºçš„ç¼–ç æ–¹å¼ï¼šä¸è¦å…è®¸æ”»å‡»è€…ä¸ºä½ çš„ç”¨æˆ·é€‰æ‹©ç¼–ç æ–¹å¼(å¦‚ISO 8859-1æˆ– UTF 8)ã€‚</li><li>æ³¨æ„é»‘åå•éªŒè¯æ–¹å¼çš„å±€é™æ€§ï¼šä»…ä»…æŸ¥æ‰¾æˆ–æ›¿æ¢ä¸€äº›å­—ç¬¦(å¦‚&quot;&lt;&quot; &quot;&gt;&quot;æˆ–ç±»ä¼¼&quot;script&quot;çš„å…³é”®å­—)ï¼Œå¾ˆå®¹æ˜“è¢«XSSå˜ç§æ”»å‡»ç»•è¿‡éªŒè¯æœºåˆ¶ã€‚</li><li>è­¦æƒ•è§„èŒƒåŒ–é”™è¯¯ï¼šéªŒè¯è¾“å…¥ä¹‹å‰ï¼Œå¿…é¡»è¿›è¡Œè§£ç åŠè§„èŒƒåŒ–ä»¥ç¬¦åˆåº”ç”¨ç¨‹åºå½“å‰çš„å†…éƒ¨è¡¨ç¤ºæ–¹æ³•ã€‚è¯·ç¡®å®šåº”ç”¨ç¨‹åºå¯¹åŒä¸€è¾“å…¥ä¸åšä¸¤æ¬¡è§£ç ã€‚å¯¹å®¢æˆ·ç«¯æäº¤çš„æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼Œä¸€èˆ¬å»ºè®®è¿‡æ»¤æ‰åŒå¼•å·ï¼ˆâ€ï¼‰ã€å°–æ‹¬å·ï¼ˆ&lt;ã€&gt;ï¼‰ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œæˆ–è€…å¯¹å®¢æˆ·ç«¯æäº¤çš„æ•°æ®ä¸­åŒ…å«çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œå®ä½“è½¬æ¢ï¼Œæ¯”å¦‚å°†åŒå¼•å·ï¼ˆâ€ï¼‰è½¬æ¢æˆå…¶å®ä½“å½¢å¼&quot;ï¼Œ&lt;å¯¹åº”çš„å®ä½“å½¢å¼æ˜¯&lt;ï¼Œ&lt;å¯¹åº”çš„å®ä½“å½¢å¼æ˜¯&gt;ä»¥ä¸‹ä¸ºéœ€è¿‡æ»¤çš„å¸¸è§å­—ç¬¦ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[1] |ï¼ˆç«–çº¿ç¬¦å·ï¼‰</span><br><span class="line">[2] &amp; ï¼ˆ&amp; ç¬¦å·ï¼‰</span><br><span class="line">[3];ï¼ˆåˆ†å·ï¼‰</span><br><span class="line">[4] $ï¼ˆç¾å…ƒç¬¦å·ï¼‰</span><br><span class="line">[5] %ï¼ˆç™¾åˆ†æ¯”ç¬¦å·ï¼‰</span><br><span class="line">[6] @ï¼ˆat ç¬¦å·ï¼‰</span><br><span class="line">[7] &#39;ï¼ˆå•å¼•å·ï¼‰</span><br><span class="line">[8] &quot;ï¼ˆå¼•å·ï¼‰</span><br><span class="line">[9] \&#39;ï¼ˆåæ–œæ è½¬ä¹‰å•å¼•å·ï¼‰</span><br><span class="line">[10] \&quot;ï¼ˆåæ–œæ è½¬ä¹‰å¼•å·ï¼‰</span><br><span class="line">[11] &lt;&gt;ï¼ˆå°–æ‹¬å·ï¼‰</span><br><span class="line">[12] ()ï¼ˆæ‹¬å·ï¼‰</span><br><span class="line">[13] +ï¼ˆåŠ å·ï¼‰</span><br><span class="line">[14] CRï¼ˆå›è½¦ç¬¦ï¼ŒASCII 0x0dï¼‰</span><br><span class="line">[15] LFï¼ˆæ¢è¡Œï¼ŒASCII 0x0aï¼‰</span><br><span class="line">[16] ,ï¼ˆé€—å·ï¼‰</span><br><span class="line">[17] \ï¼ˆåæ–œæ ï¼‰</span><br><span class="line">2ã€åœ¨è¯·æ±‚è¿”å›é¡µé¢å…³é”®å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼›</span><br><span class="line">[1] â€œï¼ˆåŒå¼•å·ï¼‰ï¼š&amp;quot</span><br><span class="line">[2] â€™ ï¼ˆå•å¼•å·ï¼‰ï¼š&amp;apos</span><br><span class="line">[3] &amp;ï¼ˆ&amp;ç¬¦å·ï¼‰ï¼š&amp;amp</span><br><span class="line">[4] &lt;ï¼ˆå·¦å°–æ‹¬å·ï¼‰ï¼š&amp;lt</span><br><span class="line">[5] &gt;ï¼ˆå³å°–æ‹¬å·ï¼‰ï¼š&amp;gt</span><br><span class="line">åœ¨ä¸å½±å“åº”ç”¨çš„å‰æä¸‹ï¼Œå»ºè®®å°†cookieæ ‡è®°ä¸ºhttpOnly (ç¦æ­¢JSè·å¾—Cookieç­‰ä¿¡æ¯)ï¼ŒåŒæ—¶ç¦ç”¨TRACEæ–¹æ³•ã€‚</span><br></pre></td></tr></table></figure><h3 id="Insecure-Deserializationï¼ˆä¸å®‰å…¨çš„ååºåˆ—åŒ–ï¼‰"><a class="header-anchor" href="#Insecure-Deserializationï¼ˆä¸å®‰å…¨çš„ååºåˆ—åŒ–ï¼‰"></a>Insecure Deserializationï¼ˆä¸å®‰å…¨çš„ååºåˆ—åŒ–ï¼‰</h3><p>ä¸å®‰å…¨çš„ååºåˆ—åŒ–æœ€ä¸¥é‡çš„ä¼šå¸¦æ¥å¸¦æ¥RCEï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼‰ï¼Œé€šå¸¸ä¼šè¢«ç”¨äºè¿›è¡Œé‡æ”¾æ”»å‡»ï¼Œæ³¨å…¥æ”»å‡»å’Œæƒé™æå‡ã€‚</p><h4 id="åºåˆ—åŒ–"><a class="header-anchor" href="#åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h4><p>æœ€ä¸¥æ ¼çš„ç¦æ­¢ååºåˆ—åŒ–çš„æ–¹å¼æ˜¯ä¸æ¥å—éå—ä¿¡æ¥æºçš„åºåˆ—åŒ–å¯¹è±¡ï¼Œåºåˆ—åŒ–ååºåˆ—åŒ–é—®é¢˜çš„æ ¹æºæ˜¯è¯­è¨€ç‰¹æ€§ï¼Œå³é¢å‘å¯¹è±¡è¯­è¨€æ‰€å…·æœ‰çš„åå°„æœºåˆ¶ï¼ˆåŠ¨æ€è·å¾—æ‰€å±ç±»çš„å¯¹è±¡æ¥è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ï¼‰</p><h4 id="å¯¹ç­–-v4"><a class="header-anchor" href="#å¯¹ç­–-v4"></a>å¯¹ç­–</h4><ul><li>ç¼“å’Œæ–¹å¼æ˜¯åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ—¶å€™è¿›è¡Œå®Œæ•´æ€§æ ¡éªŒï¼ˆé€šå¸¸ä¸ºHashæ ¡éªŒæˆ–è€…ç­¾åï¼‰ï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥è¿›è¡ŒåŠ å¯†ï¼Œè¿›è¡Œä¸¥æ ¼ç±»å‹æ§åˆ¶ï¼›å¦‚æœå¯èƒ½ï¼Œå¯¹äºä¸åŒæƒé™çš„å¯¹è±¡è¿›è¡Œéš”ç¦»ï¼Œä¸ºåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œæä¾›æ—¥å¿—è®°å½•ï¼Œç›‘æ§inbound/outboundæµé‡ï¼Œå¯¹äºæŒç»­è¿›è¡Œååºåˆ—åŒ–çš„æ“ä½œæä¾›é¢„è­¦ã€‚</li><li>å…³æ³¨äº†è§£ä½¿ç”¨äº†çš„å“ªäº›ç»„ä»¶è¿›è¡Œäº†åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼Œä»–ä»¬çš„å®ç°æ–¹å¼å’Œå®‰å…¨æªæ–½æ˜¯ä»€ä¹ˆï¼Œæ˜¯å¦å¯ç”¨ï¼Œæ˜¯å¦å­˜åœ¨å·²çŸ¥çš„æ¼æ´ï¼Œå®šæœŸå…³æ³¨ç‰ˆæœ¬å‘å¸ƒå’Œå‡çº§ã€‚</li></ul><h3 id="Using-Components-with-Known-Vulnerabilitiesï¼ˆä½¿ç”¨å«æœ‰å·²çŸ¥æ¼æ´çš„ç»„ä»¶ï¼‰"><a class="header-anchor" href="#Using-Components-with-Known-Vulnerabilitiesï¼ˆä½¿ç”¨å«æœ‰å·²çŸ¥æ¼æ´çš„ç»„ä»¶ï¼‰"></a>Using Components with Known Vulnerabilitiesï¼ˆä½¿ç”¨å«æœ‰å·²çŸ¥æ¼æ´çš„ç»„ä»¶ï¼‰</h3><p>ä¸€æ–¹é¢æ˜¯åœ¨é€‰ç”¨ç»„ä»¶çš„æ—¶å€™é€‰ç”¨åå£°å¯ä¿¡ï¼Œç¤¾åŒºæ´»è·ƒï¼Œå®‰å…¨æœºåˆ¶è¾ƒä¸ºå®Œå–„çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼›å¦ä¸€æ–¹é¢éœ€è¦æŒç»­å…³æ³¨æ–°æ¼æ´çš„å‘å¸ƒã€‚</p><h3 id="Insufficient-Logging-Monitoring-ï¼ˆä¸è¶³çš„æ—¥å¿—å’Œç›‘æ§ï¼‰"><a class="header-anchor" href="#Insufficient-Logging-Monitoring-ï¼ˆä¸è¶³çš„æ—¥å¿—å’Œç›‘æ§ï¼‰"></a>Insufficient Logging &amp; Monitoring. ï¼ˆä¸è¶³çš„æ—¥å¿—å’Œç›‘æ§ï¼‰</h3><p>è¿™éƒ¨åˆ†å±äºå®‰å…¨è¿è¥éƒ¨åˆ†ï¼Œä¸»è¦æ˜¯åœ¨ç¨‹åºè®¾è®¡æ—¶å€™è¦ç•™æœ‰è¶³å¤Ÿçš„æ—¥å¿—æ•´æ®µä¿¡æ¯æ¥è¿½è¸ªæ¼æ´ï¼Œ</p><h3 id="Cross-site-Request-Forgery-è·¨ç«™è¯·æ±‚ä¼ªé€ "><a class="header-anchor" href="#Cross-site-Request-Forgery-è·¨ç«™è¯·æ±‚ä¼ªé€ "></a>Cross-site Request Forgery(è·¨ç«™è¯·æ±‚ä¼ªé€ )</h3><p>è¿™ä¸ªæ˜¯åŸ¹è®­æ—¶æ²¡æœ‰è¯´æ˜ä½†å®é™…ä¸Šå¯¹FEæ¥è¯´æ˜¯éœ€è¦äº†è§£çš„ã€‚æ‰€ä»¥åœ¨è¿™é‡ŒåŠ è¿›æ¥è¿›è¡Œè¡¥å……è¯´æ˜ã€‚</p><h4 id="åŸç†"><a class="header-anchor" href="#åŸç†"></a>åŸç†</h4><ul><li><strong>ç”¨æˆ·C</strong>ç™»å½•å—ä¿¡ä»»çš„<strong>ç«™ç‚¹A</strong></li><li>æµè§ˆå™¨ç”Ÿæˆç«™ç‚¹Açš„cookieä¿¡æ¯</li><li>æœªç™»å‡ºçš„æƒ…å†µä¸‹è®¿é—®<strong>æ¶æ„ç½‘ç«™B</strong>ï¼ˆå…¶å®ç™»å‡ºä¹Ÿä¸ä¸€å®šï¼Œå› ä¸ºä¸èƒ½ä¿è¯cookieç™»å‡ºåå°±ä¼šå¤±æ•ˆï¼‰</li><li>ç½‘ç«™Bå‘ç½‘ç«™Aå‘èµ·è¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¼šå¸¦ä¸Šæ­¥éª¤2çš„cookieä¿¡æ¯</li><li>ç½‘ç«™Bé€šè¿‡è¯¥cookieä¿¡æ¯ï¼Œä¼ªè£…æˆç”¨æˆ·Cè¿›è¡Œæ“ä½œï¼ˆé‚®ä»¶/ä¿¡æ¯/è½¬è´¦ç­‰ç­‰ï¼‰</li></ul><h4 id="å¯¹ç­–-v5"><a class="header-anchor" href="#å¯¹ç­–-v5"></a>å¯¹ç­–</h4><ul><li>éªŒè¯ HTTP Referer å­—æ®µï¼šRefererå­—æ®µæ˜¯ç”¨æ¥è®°å½•è¯·æ±‚çš„æ¥æºåœ°å€ï¼Œå› ä¸ºCSRFä¸€èˆ¬éœ€è¦è‡ªå·±æ„é€ è¡¨å•æ¥è¯·æ±‚ã€‚æ‰€ä»¥refererå­—æ®µä¼šä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¯¹äºrefererä¸ç¬¦åˆçš„ï¼Œç›´æ¥æ‹’ç»è¯·æ±‚</li><li>cookieä¸­åŠ å…¥hashï¼š åœ¨cookieä¸­åŠ å…¥hashï¼Œç„¶ååœ¨åç«¯æ ¡éªŒhashå€¼æ˜¯å¦æ­£ç¡®ï¼Œæ¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦æ˜¯çœŸçš„å®¢æˆ·å‘é€çš„</li><li>cookieè®¾ç½®ä¸ºhttpOnlyï¼šå¯ä»¥æœ‰æ•ˆå‡å°‘cookieè¢«è·å–çš„é£é™©</li><li>å…¶å®æ€»çš„æ¥è¯´ï¼Œä¸Šé¢çš„æ–¹æ³•å…¶å®é˜²å¾¡æ€è·¯éƒ½ä¸€æ ·ã€‚<strong>å°±æ˜¯é€šè¿‡åœ¨è¯·æ±‚ä¸­åŠ å…¥æ”»å‡»è€…ä¼ªé€ ä¸äº†çš„ä¿¡æ¯ï¼Œç„¶åé€šè¿‡è¿™äº›ä¿¡æ¯æ¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦æ˜¯çœŸæ­£çš„å®¢æˆ·å‘é€çš„ã€‚å½“ç„¶è¿™äº›ä¿¡æ¯ä¸åº”è¯¥å­˜åœ¨cookieä¸­</strong></li></ul><h2 id="ä¿¡æ¯å®‰å…¨è®¾è®¡æ€è·¯ï¼š"><a class="header-anchor" href="#ä¿¡æ¯å®‰å…¨è®¾è®¡æ€è·¯ï¼š"></a>ä¿¡æ¯å®‰å…¨è®¾è®¡æ€è·¯ï¼š</h2><ul><li>ç³»ç»Ÿè®¾è®¡è¦æœ‰é€‚åº¦å®‰å…¨å†—ä½™ï¼Œå†—ä½™æ˜¯æŒ‡å…³é”®åŠŸèƒ½çš„å®‰å…¨ä¿éšœè¦å¤šå±‚ã€‚</li><li>æµè¡Œçš„æ”»å‡»æ–¹å¼è¦ä»è®¾è®¡ä¸Šå°±é¢„ç•™åº”å¯¹ç©ºé—´ã€‚æ¯”å¦‚SQL Injectionè¦ä¿è¯ä½¿ç”¨çš„æ•°æ®åº“æ”¯æŒå‚æ•°åŒ–æŸ¥è¯¢ï¼Œæ¯”å¦‚åº”å¯¹ä¸å®‰å…¨çš„ååºåˆ—åŒ–ï¼Œè¦é¢„ç•™è®¾è®¡æ•°å­—ç­¾åæ ¡éªŒæœºåˆ¶çš„ç©ºé—´ã€‚</li><li>æœ€å°åŒ–æƒé™åŸåˆ™</li><li>éªŒè¯ç”¨æˆ·è¾“å…¥ï¼ˆå¤©ç„¶è®¤ä¸ºç”¨æˆ·çš„è¾“å…¥ä¸å®‰å…¨çš„è®¾è®¡æ€è·¯ï¼‰</li><li>å¤±è´¥é»˜è®¤åŸåˆ™ï¼Œç™½åå•ä¼˜å…ˆäºé»‘åå•</li><li>é»˜è®¤å®‰å…¨ï¼Œå°±æ˜¯é»˜è®¤é…ç½®å³è®¤ä¸ºå¯æä¾›å¯é å®‰å…¨ã€‚</li><li>æƒé™åˆ†ç¦»åŸåˆ™ï¼Œè¿›ä¸€æ­¥ï¼ŒçŸ©é˜µè®¿é—®æ§åˆ¶è®¾è®¡ã€‚</li><li>æœåŠ¡å™¨ç«¯çš„æ ¡éªŒæ¯”å®¢æˆ·ç«¯ä¼˜å…ˆ</li></ul><h3 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h3><p>ä½œä¸ºå‰ç«¯ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦äº†è§£ä¿¡æ¯å®‰å…¨çš„é‡è¦æ€§ã€‚å¹¶ä¸”åœ¨codingçš„æ—¶å€™ä¹Ÿéœ€è¦æ³¨æ„ç¨‹åºå®‰å…¨ä¸Šæ˜¯å¦æœ‰å­˜åœ¨éšæ‚£ã€‚ğŸ˜˜</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æ˜¨å¤©æˆ‘ä»¬å›¢é˜Ÿçš„&lt;strong&gt;å®‰å…¨å¤§ä½¬&lt;/strong&gt;ç»™æˆ‘ä»¬å¼€å±•äº†ä¸€ä¸ªå®‰å…¨åŸ¹è®­ï¼Œæ€•è‡ªå·±ä¹‹åå¾ˆå®¹æ˜“ä¼šå¿˜æ‰ã€‚æ‰€ä»¥å†™ç¯‡æ–‡ç« æ¥è®°å½•ä¸€äº›å¸¸è§çš„å®‰å…¨é—®é¢˜ä»¥åŠåº”å¯¹ç­–ç•¥
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="ä¿¡æ¯å®‰å…¨" scheme="https://xzh97.github.io/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>HTTPåè®®å­¦ä¹ ï¼ˆä¸€ï¼‰</title>
    <link href="https://xzh97.github.io/2020/08/01/http-protocol/"/>
    <id>https://xzh97.github.io/2020/08/01/http-protocol/</id>
    <published>2020-08-01T02:40:46.000Z</published>
    <updated>2025-11-24T08:23:41.554Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>æœ¬æ–‡ä¸»è¦æ˜¯ä¸ºäº†è®°å½•å¹³æ—¶é˜…è¯»&lt;&lt;HTTPæƒå¨æŒ‡å—&gt;&gt;çš„ä¸€äº›çŸ¥è¯†ç‚¹çš„ã€‚ æŠŠå®ƒä»¬æŠ½ç¦»å‡ºæ¥ï¼Œè®°å½•åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæ–¹ä¾¿å¹³æ—¶çš„ç†è§£</p><h3 id="URIï¼ˆUniform-Resource-Identifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰"><a class="header-anchor" href="#URIï¼ˆUniform-Resource-Identifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰"></a>URIï¼ˆUniform Resource Identifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰</h3><p><code>URI</code>çš„ä½œç”¨æ˜¯<strong>æŒ‡ç¤ºhttpåè®®å»è·å–å¯¹åº”æœåŠ¡å™¨ä¸Šçš„æ•°æ®</strong>ã€‚å®ƒæœ‰ä¸¤ç§å½¢å¼ï¼Œåˆ†åˆ«æ˜¯<code>URLï¼ˆUniform Resource Locator ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰</code>å’Œ<code>URNï¼ˆUniform Resource Name ç»Ÿä¸€èµ„æºåï¼‰</code>ã€‚</p><p>æˆ‘ä»¬å½“å‰çš„æ‰€ç”¨çš„å‡ ä¹æ‰€æœ‰çš„<code>URI</code>éƒ½æ˜¯<code>URL</code>å½¢å¼ï¼Œ<code>URN</code>ç”±äºç¼ºå°‘æ¶æ„æ”¯æ’‘ï¼Œç›®å‰è¿˜åªèƒ½åœ¨å®éªŒé˜¶æ®µã€‚æ‰€ä»¥ä¹‹åæˆ‘ä»¬è¯´çš„<code>URI</code>æŒ‡çš„éƒ½æ˜¯<code>URL</code>ã€‚</p><h3 id="URL"><a class="header-anchor" href="#URL"></a>URL</h3><h4 id="æ ¼å¼"><a class="header-anchor" href="#æ ¼å¼"></a>æ ¼å¼</h4><p>æ ¹æ®<a href="https://www.ietf.org/rfc/rfc1738.txt" target="_blank" rel="noopener">RFC 1738</a>,URLçš„æ ¼å¼ä¸ºä»¥ä¸‹ï¼š</p><blockquote><p>â€œâ€¦Only alphanumerics [0-9a-zA-Z], the special characters â€œ$-_.+!*â€™(),â€ [not including the quotes - ed], and reserved characters used for their reserved purposes may be used unencoded within a URL.â€</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ç¿»è¯‘</span><br><span class="line">åªæœ‰å­—æ¯å’Œæ•°å­—[0-9a-zA-Z]ã€ä¸€äº›ç‰¹æ®Šç¬¦å·&#96;$-_.+!*&#39;()&#96;,ä»¥åŠæŸäº›ä¿ç•™å­—ï¼Œæ‰å¯ä»¥ä¸ç»è¿‡ç¼–ç ç›´æ¥ç”¨äºURLã€‚</span><br></pre></td></tr></table></figure><h4 id="ç»„æˆ"><a class="header-anchor" href="#ç»„æˆ"></a>ç»„æˆ</h4><p>ä¸€èˆ¬æ¥è¯´ï¼ŒURLç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ol><li>åè®®ï¼ˆschemeï¼‰ï¼šæŒ‡æ˜è®¿é—®èµ„æºä½¿ç”¨çš„åè®®ç±»å‹</li><li>æœåŠ¡å™¨ï¼ˆhost:portï¼‰ï¼šæœåŠ¡å™¨åœ°å€</li><li>æœ¬åœ°èµ„æºï¼ˆurl-pathï¼‰ï¼šè®¿é—®çš„èµ„æºåœ¨æœåŠ¡å™¨çš„è·¯å¾„</li></ol><h3 id="HTTPåè®®"><a class="header-anchor" href="#HTTPåè®®"></a>HTTPåè®®</h3><h4 id="HTTPæŠ¥æ–‡"><a class="header-anchor" href="#HTTPæŠ¥æ–‡"></a>HTTPæŠ¥æ–‡</h4><ul><li>èµ·å§‹è¡Œï¼šå†…å®¹ä¸»è¦æ˜¯<code>http versionï¼Œhttp statusï¼Œmethodï¼Œurl</code>ç­‰</li><li>é¦–éƒ¨å­—æ®µï¼š<code>request Headers &amp; response Headers</code></li><li>ä¸»ä½“ï¼šçœŸæ­£ä¼ è¾“çš„æ•°æ®</li></ul><h3 id="HTTPè¿æ¥"><a class="header-anchor" href="#HTTPè¿æ¥"></a>HTTPè¿æ¥</h3><p><a href="https://xzh97.github.io/2020/01/15/url-parse/">URLä»è¾“å…¥åˆ°é¡µé¢å±•ç¤ºçš„è¿‡ç¨‹</a></p><h3 id="TCPåè®®"><a class="header-anchor" href="#TCPåè®®"></a>TCPåè®®</h3><p>HTTPåªæ˜¯ä¸€ä¸ªåº”ç”¨å±‚åè®®ï¼Œæœ¬èº«å¹¶ä¸å…³æ³¨æ•°æ®çš„ä¼ è¾“ï¼Œè´Ÿè´£ä¼ è¾“æ•°æ®çš„å°±æ˜¯åè®®å°±æ˜¯ç”¨çš„ä¼ è¾“å±‚TCP/IPåè®®ã€‚</p><p>TCPï¼ˆTransmission Control Protocolï¼‰ï¼Œæ„ä¸ºï¼šä¼ è¾“æ§åˆ¶åè®®ã€‚TCPå¯ä»¥ç»™æˆ‘ä»¬å¸¦æ¥é€šç”¨çš„ã€å¯é çš„ä¼ è¾“åè®®ã€‚</p><p>TCPä¼ è¾“çš„æ•°æ®æœ‰ä»¥ä¸‹å‡ ç‚¹ç‰¹ç‚¹ï¼š</p><ul><li>æ— å·®é”™ï¼š ä¸ä¼šä¸ä¼ ï¼Œæ¼ä¼ ï¼Œå¤šä¼ ã€‚</li><li>æŒ‰åºä¼ è¾“ï¼šä¼ è¾“çš„æŠ¥æ–‡é¡ºåºä¸ä¼šå‡ºé”™ã€‚</li><li>æœªåˆ†æ®µçš„æ•°æ®æµï¼šå¯ä»¥åœ¨ä»»æ„æ—¶é—´ä»¥ä»»æ„å¤§å°ä¼ è¾“</li></ul><h4 id="TCPåè®®çš„å¯é æ€§å¦‚ä½•ä¿è¯ï¼Ÿ"><a class="header-anchor" href="#TCPåè®®çš„å¯é æ€§å¦‚ä½•ä¿è¯ï¼Ÿ"></a>TCPåè®®çš„å¯é æ€§å¦‚ä½•ä¿è¯ï¼Ÿ</h4><p>é‚£ä¹ˆï¼ŒTCPæ˜¯å¦‚ä½•ä¿è¯è‡ªå·±ä¼ è¾“çš„æ•°æ®æ˜¯å¯é çš„å‘¢ï¼Ÿ</p><ul><li><p>æ ¡éªŒå’Œï¼š</p><ul><li>å‘é€ç«¯ï¼šåŸç ç›¸åŠ ï¼Œå°†é«˜ä½å åŠ åˆ°ä½ä½ï¼Œå–åï¼Œå¾—åˆ°åç æ±‚å’Œç»“æœï¼ŒåŠ å…¥æ ¡éªŒå’Œå­—æ®µ</li><li>æ¥æ”¶ç«¯ï¼šå°†æ‰€æœ‰åŸç ç›¸åŠ ï¼Œé«˜ä½å åŠ ï¼Œå¦‚å…¨ä¸º1ï¼Œåˆ™æ­£ç¡®</li><li>ç»“æœï¼šå¦‚æœæ ¡éªŒå’Œå‡ºé”™ï¼Œæ­¤æ•°æ®åŒ…ä¼šè¢«æ”¾å¼ƒã€‚</li></ul></li><li><p>ç¡®è®¤åº”ç­”å’Œåºåˆ—å·ï¼š</p><ul><li>åºåˆ—å·ï¼šæ‰€æœ‰æ•°æ®åŒ…ä¼šä¾åºç¼–å·</li><li>ç¡®è®¤åº”ç­”ï¼šæ¥æ”¶æ–¹æ¥æ”¶åˆ°æ•°æ®ä¹‹åå°±ä¼šç¡®è®¤</li></ul></li><li><p>è¶…æ—¶é‡ä¼ ï¼šæ•°æ®åŒ…ä¼ å‡ºä¹‹åï¼Œä¼šå¯åŠ¨ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œä¸€æ—¦æ•°æ®ä¼ è¾“è¶…æ—¶ï¼ŒTCPå°±ä¼šé‡æ–°å‘é€è¶…æ—¶çš„æ•°æ®åŒ…ã€‚</p><p><strong>æ³¨æ„ï¼šè¶…æ—¶ä»¥500msä¸ºå•ä½ï¼Œæ¯æ¬¡åˆ¤å®šè¶…æ—¶é‡å‘çš„è¶…æ—¶æ—¶é—´éƒ½æ˜¯500msçš„æ•´æ•°å€ä¸”é‡å‘æ—¶é—´æŒ‰ç…§æŒ‡æ•°å¢é•¿ï¼Œè®¡ç®—æ–¹å¼ä¸º<code>2^é‡å‘æ¬¡æ•°*500ms</code></strong></p></li><li><p>è¿æ¥ç®¡ç†ï¼šä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</p></li><li><p>æµé‡æ§åˆ¶ï¼šTCPè¿æ¥çš„ä¸¤ç«¯éƒ½æœ‰æ¥æ”¶æ•°æ®çš„ä¸€ä¸ªç¼“å†²åŒºï¼ŒTCPçš„æ¥æ”¶ç«¯åªå…è®¸å‘é€ç«¯å‘é€æ¥æ”¶ç«¯ç¼“å†²åŒºèƒ½æ¥çº³çš„æ•°æ®ã€‚å¦‚æœæ•°æ®å‘é€è¿‡å¿«ï¼Œå°±æ§åˆ¶æµé‡çš„å‘é€é€Ÿåº¦ä¸”æŠŠæ”¹å˜çš„é€Ÿåº¦å‘åˆ°å‘é€ç«¯</p></li><li><p>æ‹¥å¡æ§åˆ¶ï¼šå½“å‰ç½‘ç»œæ‹¥å µæ—¶ï¼Œä¼ é€çš„æ•°æ®è¿‡æ…¢ä¼šå¯¼è‡´è¶…æ—¶ï¼Œç„¶åTCPä¼šè¿›è¡Œé‡å‘ï¼Œä¼šé€ æˆç½‘ç»œæ›´åŠ æ‹¥å µï¼Œæ‰€ä»¥æ­¤æ—¶ä¼šå‡å°‘å‘é€æ•°æ®é€Ÿç‡ã€‚ è¿™é‡Œå’Œæµé‡æ§åˆ¶ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºï¼Œæµé‡æ§åˆ¶æ˜¯ä¸ºäº†æ¥æ”¶ç«¯èƒ½åŠæ—¶æ¥æ”¶åˆ°æ•°æ®ï¼Œè€Œæ‹¥å¡æ§åˆ¶æ˜¯ä¸ºäº†é™ä½ç½‘ç»œå µå¡çš„ç¨‹åº¦</p><p>æ‹¥å¡æ§åˆ¶ä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ä¸ªç®—æ³•</p><ul><li>æ…¢å¼€å§‹ç®—æ³•</li><li>æ‹¥å¡é¿å…</li><li>å¿«é‡ä¼ </li><li>å¿«æ¢å¤</li></ul></li></ul><h4 id="ä¸‰æ¬¡æ¡æ‰‹"><a class="header-anchor" href="#ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h4><p>TCPçš„ä¸‰æ¬¡æ¡æ‰‹å…¶å®å°±æ˜¯å¯¹æœåŠ¡ç«¯çŠ¶æ€å’Œå®¢æˆ·ç«¯çŠ¶æ€åšä¸€ä¸ªç¡®è®¤ï¼Œè¿™ä¹Ÿæ˜¯å¯¹TCPå¯é æ€§çš„ä¸€ä¸ªæ”¯æ’‘ã€‚æ¥ä¸‹æ¥è¯´ä¸€ä¸‹ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼š</p><ol><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€synåŒ…ï¼ˆseq=jï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼›SYNï¼šåŒæ­¥åºåˆ—ç¼–å·ï¼ˆSynchronize Sequence Numbersï¼‰ã€‚</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°synåŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„SYNï¼ˆack=j+1ï¼‰ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ…ï¼ˆseq=kï¼‰ï¼Œå³SYN+ACKåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ã€‚</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack=k+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDï¼ˆTCPè¿æ¥æˆåŠŸï¼‰çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚</li></ol><h4 id="å››æ¬¡æŒ¥æ‰‹"><a class="header-anchor" href="#å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h4><p>TCPçš„å››æ¬¡æŒ¥æ‰‹ç”¨äºé‡Šæ”¾TCPè¿æ¥ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>å®¢æˆ·ç«¯å‘é€æ•°æ®åŒ…ç»™æœåŠ¡ç«¯å¹¶è¿›å…¥<strong>ç»ˆæ­¢ç­‰å¾…1</strong><code>FIN-WAIT-1</code>çŠ¶æ€</li><li>æœåŠ¡ç«¯æ¥æ”¶æ•°æ®åŒ…,ç„¶åè¿”å›ä¸€ä¸ªæ•°æ®åŒ…ç»™å®¢æˆ·ç«¯å¹¶è¿›å…¥<strong>åŠå…³é—­</strong><code>CLOSE-WAIT</code>çŠ¶æ€ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°æ•°æ®åŒ…è¿›å…¥<strong>ç»ˆæ­¢ç­‰å¾…2</strong><code>FIN-WAIT-2</code>çŠ¶æ€</li><li>æœåŠ¡ç«¯å‘é€æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯å¹¶è¿›å…¥<strong>æœ€åç¡®è®¤</strong><code>LAST-ACK</code>çŠ¶æ€</li><li>å®¢æˆ·ç«¯å‘é€æ•°æ®åŒ…ç»™æœåŠ¡ç«¯ï¼Œç„¶åè¿›å…¥<strong>æ—¶é—´ç­‰å¾…</strong><code>TIME-WAIT</code>çŠ¶æ€ï¼Œåœ¨ç»è¿‡<code>2MSL</code>ï¼ˆ<code>MSL</code>æ˜¯æŒ‡ä¸€ä¸ªç½‘ç»œç‰‡æ®µçš„æœ€å¤§å­˜æ´»æ—¶é—´ï¼Œ<code>2MSL</code>åˆšå¥½æ˜¯ä¸€ä¸ªå‘é€å’Œè¿”å›çš„æœ€å¤§æ—¶é—´ï¼‰ä¹‹åï¼Œå®¢æˆ·ç«¯è¿›å…¥<strong>å…³é—­</strong><code>CLOSED</code>çŠ¶æ€ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°æ•°æ®åŒ…ä¹‹åç«‹é©¬è¿›å…¥<strong>å…³é—­</strong><code>CLOSED</code>çŠ¶æ€</li></ol><h4 id="æ»‘åŠ¨çª—å£æŠ€æœ¯"><a class="header-anchor" href="#æ»‘åŠ¨çª—å£æŠ€æœ¯"></a>æ»‘åŠ¨çª—å£æŠ€æœ¯</h4><p>TCPä¸­å®é™…çš„ä¼ è¾“æ•°æ®æ–¹å¼ã€‚è¦äº†è§£æ»‘åŠ¨çª—å£æŠ€æœ¯ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—äº†è§£çª—å£æœºåˆ¶ã€‚<strong>çª—å£å®é™…ä¸Šå°±æ˜¯æ•°æ®ä¼ è¾“çš„ç®¡é“</strong>ã€‚çª—å£å¤§å°è·Ÿæ•°æ®ä¼ è¾“é‡æˆæ­£ç›¸å…³ã€‚</p><p>æ»‘åŠ¨çª—å£æŠ€æœ¯å®è´¨ä¸Šå°±æ˜¯æŒ‡<strong>é€šè¿‡åŠ¨æ€æ§åˆ¶æ•°æ®çª—å£å¤§å°æ¥è°ƒèŠ‚ä¸¤å°ä¸»æœºé—´çš„æ•°æ®ä¼ è¾“é€Ÿç‡</strong>ï¼Œä¸Šé¢çš„æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶å®é™…ä¸Šéƒ½æ˜¯é€šè¿‡æ»‘åŠ¨çª—å£æŠ€æœ¯æ¥å®Œæˆçš„ã€‚</p><h3 id="Webé¡µé¢çš„ç»“æ„ç»„ä»¶"><a class="header-anchor" href="#Webé¡µé¢çš„ç»“æ„ç»„ä»¶"></a>Webé¡µé¢çš„ç»“æ„ç»„ä»¶</h3><p>Webä¸åªæœ‰æµè§ˆå™¨å’ŒæœåŠ¡å™¨ï¼Œè¿˜æœ‰ä¸€äº›å…¶å®ƒçš„é‡è¦çš„ç¨‹åºã€‚</p><p>ä¸»è¦æœ‰ä»¥ä¸‹ä¸€äº›ï¼š</p><ul><li>ä»£ç†ï¼šä»£ç†å°±æ˜¯åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸€å±‚ä¸­é—´å®ä½“ï¼Œå®ƒçš„ä½œç”¨åœ¨äºå¯¹httpè¯·æ±‚è¿›è¡Œ<strong>å°è£…/æ‹¦æˆª/è¿‡æ»¤/ç›‘æ§</strong>ã€‚</li><li>ç¼“å­˜ï¼šä½œç”¨å°±æ˜¯æŠŠè¯·æ±‚åˆ°çš„æ•°æ®ä¿å­˜åˆ°å†…å­˜/æœ¬åœ°ä¸­ï¼Œä½¿å¾—ç”¨æˆ·è¯·æ±‚æ•°æ®çš„æ•°æ®å¦‚æœæ²¡æœ‰å˜åŒ–æ—¶å¯ä»¥ä¸ç”¨ä¸æœåŠ¡ç«¯è¿›è¡Œè¯·æ±‚è¿æ¥ï¼Œè€Œå¯ä»¥ç›´æ¥ä»æœ¬åœ°/å†…å­˜é‡Œå–å·²æœ‰çš„æ•°æ®</li><li>ç½‘å…³ï¼šèµ„æºå¤„ç†å™¨/åè®®è½¬æ¢å™¨ï¼Œå¯ä»¥ç”¨æ¥å¯¹è¯·æ±‚è¿›è¡Œå“åº”æˆ–è€…å¯¹åè®®è¿›è¡Œå¤„ç†ã€‚</li><li>éš§é“ï¼šä½¿å¾—ç”¨æˆ·å¯ä»¥é€šè¿‡httpç¨‹åºè®¿é—®éhttpåè®®çš„ç¨‹åº</li><li>agentä»£ç†ï¼šä»£è¡¨ç”¨æˆ·å¯¹httpå‘èµ·è¯·æ±‚çš„ç¨‹åºï¼Œç›®å‰æˆ‘ä»¬çš„webæµè§ˆå™¨å°±æ˜¯ä¸€ç§agentä»£ç†ã€‚çˆ¬è™«ç¨‹åºä¹Ÿæ˜¯agentä»£ç†</li></ul><h3 id="HTTPS"><a class="header-anchor" href="#HTTPS"></a>HTTPS</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬éƒ½çŸ¥é“HTTPè¯·æ±‚å…¶å®æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œä½†æ˜¯è¿™æ ·çš„è¯ä¸€äº›éšç§çš„ä¿¡æ¯å°±å¾ˆå®¹æ˜“è¢«åˆ«äººçŸ¥é“ã€‚æ‰€ä»¥ä¸ºäº†ä¿æŠ¤éšç§ä¿¡æ¯ï¼Œæ¨å‡ºäº†HTTPSï¼Œé€šä¿—çš„è®²ï¼ŒHTTPSå…¶å®å°±æ˜¯åœ¨HTTPè¿æ¥ä¸­æ–°å¢äº†ä¸€å±‚å®‰å…¨å±‚é¢çš„å¤„ç†ã€‚</p><p>HTTPçš„è¿æ¥è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼šå‘é€ç«¯ --&gt; HTTP --&gt; TCP --&gt; IPã€‚</p><p>è€ŒHTTPSå…¶å®å°±æ˜¯åœ¨HTTP --&gt; TCPè¿™é‡ŒåŠ äº†ä¸€å±‚SSLå±‚æ¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ä¿æŠ¤ã€‚</p><h4 id="æœåŠ¡å™¨è¯ä¹¦-Server-Certificates"><a class="header-anchor" href="#æœåŠ¡å™¨è¯ä¹¦-Server-Certificates"></a>æœåŠ¡å™¨è¯ä¹¦(Server Certificates)</h4><p>è¦æƒ³äº†è§£HTTPSï¼Œæˆ‘ä»¬è¿˜å¾—å…ˆäº†è§£ä¸€ä¸‹æœåŠ¡å™¨è¯ä¹¦æ˜¯ä»€ä¹ˆã€‚</p><p>æœåŠ¡å™¨è¯ä¹¦æ˜¯ä¸€ä¸ªæ˜¾ç¤ºäº†ç»„ç»‡çš„åç§°ã€åœ°å€ã€æœåŠ¡å™¨ DNS åŸŸåä»¥åŠå…¶ä»–ä¿¡æ¯çš„ X.509 v3 æ´¾ç”Ÿè¯ä¹¦ï¼ˆå‚è§å›¾ 14-17ï¼‰ã€‚ä½ å’Œä½ æ‰€ç”¨çš„å®¢æˆ·ç«¯è½¯ä»¶å¯ä»¥æ£€æŸ¥è¯ä¹¦ï¼Œä»¥ç¡® ä¿æ‰€æœ‰çš„ä¿¡æ¯éƒ½æ˜¯å¯ä¿¡çš„ã€‚</p><p>å®ƒæ˜¯ç»„æˆWebæœåŠ¡å™¨çš„SSLå®‰å…¨åŠŸèƒ½çš„å”¯ä¸€çš„æ•°å­—æ ‡è¯†ã€‚é€šè¿‡ç›¸äº’ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹ç»„ç»‡è·å¾—ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›éªŒè¯æ‚¨Webç«™ç‚¹èº«ä»½çš„æ‰‹æ®µã€‚æœåŠ¡å™¨è¯ä¹¦åŒ…å«è¯¦ç»†çš„èº«ä»½éªŒè¯ä¿¡æ¯ï¼Œå¦‚æœåŠ¡å™¨å†…å®¹é™„å±çš„ç»„ç»‡ã€é¢å‘è¯ä¹¦çš„ç»„ç»‡ä»¥åŠç§°ä¸ºå…¬å¼€å¯†é’¥çš„å”¯ä¸€çš„èº«ä»½éªŒè¯æ–‡ä»¶ã€‚è¿™æ„å‘³ç€æœåŠ¡å™¨è¯ä¹¦ç¡®ä¿ç”¨æˆ·å…³äºwebæœåŠ¡å™¨å†…å®¹çš„éªŒè¯ï¼ŒåŒæ—¶æ„å‘³ç€å»ºç«‹çš„HTTPè¿æ¥æ˜¯å®‰å…¨çš„ã€‚</p><h5 id="HTTPSè¯ä¹¦åŒ…å«äº†å“ªäº›å†…å®¹"><a class="header-anchor" href="#HTTPSè¯ä¹¦åŒ…å«äº†å“ªäº›å†…å®¹"></a>HTTPSè¯ä¹¦åŒ…å«äº†å“ªäº›å†…å®¹</h5><p><img src="http://122.51.73.210:3000/upload/2020-9-24/20209248424.png" alt="HTTPSè¯ä¹¦å†…å®¹"></p><h4 id="æµè§ˆå™¨å¦‚ä½•æ ¡éªŒè¯ä¹¦"><a class="header-anchor" href="#æµè§ˆå™¨å¦‚ä½•æ ¡éªŒè¯ä¹¦"></a>æµè§ˆå™¨å¦‚ä½•æ ¡éªŒè¯ä¹¦</h4><p>ç½‘æ™¯å…¬å¸æå‡ºçš„ä¸€ç§ Web æœåŠ¡å™¨è¯ä¹¦æœ‰æ•ˆæ€§ç®—æ³•æ˜¯å¤§éƒ¨åˆ†æµè§ˆå™¨æœ‰æ•ˆæ€§éªŒè¯æŠ€æœ¯çš„åŸºç¡€ã€‚éªŒè¯æ­¥éª¤å¦‚ä¸‹æ‰€è¿°</p><h5 id="æ—¥æœŸæ£€æµ‹"><a class="header-anchor" href="#æ—¥æœŸæ£€æµ‹"></a>æ—¥æœŸæ£€æµ‹</h5><p>é¦–å…ˆï¼Œæµè§ˆå™¨æ£€æŸ¥è¯ä¹¦çš„èµ·å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸï¼Œä»¥ç¡®ä¿è¯ä¹¦ä»ç„¶æœ‰æ•ˆã€‚å¦‚æœè¯ä¹¦è¿‡æœŸäº†ï¼Œæˆ–è€…è¿˜æœªè¢«æ¿€æ´»ï¼Œåˆ™è¯ä¹¦æœ‰æ•ˆæ€§éªŒè¯å¤±è´¥ï¼Œæµè§ˆå™¨æ˜¾ç¤ºä¸€æ¡é”™è¯¯ä¿¡æ¯ã€‚</p><h5 id="ç­¾åé¢å‘è€…å¯ä¿¡åº¦æ£€æµ‹ã€‚"><a class="header-anchor" href="#ç­¾åé¢å‘è€…å¯ä¿¡åº¦æ£€æµ‹ã€‚"></a>ç­¾åé¢å‘è€…å¯ä¿¡åº¦æ£€æµ‹ã€‚</h5><p>æ¯ä¸ªè¯ä¹¦éƒ½æ˜¯ç”±æŸäº›è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾å‘çš„ï¼Œå®ƒä»¬è´Ÿè´£ä¸ºæœåŠ¡å™¨æ‹…ä¿ã€‚è¯ä¹¦æœ‰ä¸åŒçš„ç­‰çº§ï¼Œæ¯ç§è¯ä¹¦éƒ½è¦æ±‚ä¸åŒçº§åˆ«çš„èƒŒæ™¯éªŒè¯ã€‚æ¯”å¦‚ï¼Œå¦‚æœç”³è¯·æŸä¸ªç”µå­å•†åŠ¡æœåŠ¡å™¨è¯ä¹¦ï¼Œé€šå¸¸éœ€è¦æä¾›ä¸€ä¸ªè¥ä¸šçš„åˆæ³•è¯æ˜ã€‚</p><p>ä»»ä½•äººéƒ½å¯ä»¥ç”Ÿæˆè¯ä¹¦ï¼Œä½†æœ‰äº› CA æ˜¯éå¸¸è‘—åçš„ç»„ç»‡ï¼Œå®ƒä»¬é€šè¿‡éå¸¸æ¸…æ™°çš„æµ ç¨‹æ¥éªŒè¯è¯ä¹¦ç”³è¯·äººçš„èº«ä»½åŠå•†ä¸šè¡Œä¸ºçš„åˆæ³•æ€§ã€‚å› æ­¤ï¼Œæµè§ˆå™¨ä¼šé™„å¸¦ä¸€ä¸ªç­¾ åé¢å‘æœºæ„çš„å—ä¿¡åˆ—è¡¨ã€‚å¦‚æœæµè§ˆå™¨æ”¶åˆ°äº†æŸæœªçŸ¥ï¼ˆå¯èƒ½æ˜¯æ¶æ„çš„ï¼‰é¢å‘æœºæ„<br>ç­¾å‘çš„è¯ä¹¦ï¼Œé‚£å®ƒé€šå¸¸ä¼šæ˜¾ç¤ºä¸€æ¡è­¦å‘Šä¿¡æ¯ã€‚æœ‰äº›è¯ä¹¦ä¼šæºå¸¦åˆ°å—ä¿¡ CA çš„æœ‰æ•ˆ ç­¾åè·¯å¾„ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šé€‰æ‹©æ¥å—æ‰€æœ‰æ­¤ç±»è¯ä¹¦ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæŸå—ä¿¡ CA ä¸º â€œSam çš„ç­¾åå•†åº—â€ç­¾å‘äº†ä¸€ä¸ªè¯ä¹¦ï¼Œè€Œ Sam çš„ç­¾åå•†åº—ä¹Ÿç­¾å‘äº†ä¸€ä¸ªç«™ç‚¹è¯ ä¹¦ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šå°†å…¶ä½œä¸ºä»æœ‰æ•ˆ CA è·¯å¾„å¯¼å‡ºçš„è¯ä¹¦æ¥å—ã€‚</p><h5 id="ç­¾åæ£€æµ‹"><a class="header-anchor" href="#ç­¾åæ£€æµ‹"></a>ç­¾åæ£€æµ‹</h5><p>ä¸€æ—¦åˆ¤å®šç­¾åæˆæƒæ˜¯å¯ä¿¡çš„ï¼Œæµè§ˆå™¨å°±è¦å¯¹ç­¾åä½¿ç”¨ç­¾åé¢å‘æœºæ„çš„å…¬å¼€å¯†é’¥ï¼Œå¹¶å°†å…¶ä¸æ ¡éªŒç è¿›è¡Œæ¯”è¾ƒï¼Œä»¥æŸ¥çœ‹è¯ä¹¦çš„å®Œæ•´æ€§ã€‚</p><h5 id="ç«™ç‚¹èº«ä»½æ£€æµ‹"><a class="header-anchor" href="#ç«™ç‚¹èº«ä»½æ£€æµ‹"></a>ç«™ç‚¹èº«ä»½æ£€æµ‹</h5><p>ä¸ºé˜²æ­¢æœåŠ¡å™¨å¤åˆ¶å…¶ä»–äººçš„è¯ä¹¦ï¼Œæˆ–æ‹¦æˆªå…¶ä»–äººçš„æµé‡ï¼Œå¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½ä¼šè¯•ç€ å»éªŒè¯è¯ä¹¦ä¸­çš„åŸŸåä¸å®ƒä»¬æ‰€å¯¹è¯çš„æœåŠ¡å™¨çš„åŸŸåæ˜¯å¦åŒ¹é…ã€‚æœåŠ¡å™¨è¯ä¹¦ä¸­é€šå¸¸ éƒ½åŒ…å«ä¸€ä¸ªåŸŸåï¼Œä½†æœ‰äº› CA ä¼šä¸ºä¸€ç»„æˆ–ä¸€ç¾¤æœåŠ¡å™¨åˆ›å»ºä¸€äº›åŒ…å«äº†æœåŠ¡å™¨åç§° åˆ—è¡¨æˆ–é€šé…åŸŸåçš„è¯ä¹¦ã€‚å¦‚æœä¸»æœºåä¸è¯ä¹¦ä¸­çš„æ ‡è¯†ç¬¦ä¸åŒ¹é…ï¼Œé¢å‘ç”¨æˆ·çš„å®¢æˆ· ç«¯è¦ä¹ˆå°±å»é€šçŸ¥ç”¨æˆ·ï¼Œè¦ä¹ˆå°±ä»¥è¡¨ç¤ºè¯ä¹¦ä¸æ­£ç¡®çš„å·®é”™æŠ¥æ–‡æ¥ç»ˆæ­¢è¿æ¥ã€‚</p><h4 id="æ•´ä½“è¯·æ±‚è¿‡ç¨‹"><a class="header-anchor" href="#æ•´ä½“è¯·æ±‚è¿‡ç¨‹"></a>æ•´ä½“è¯·æ±‚è¿‡ç¨‹</h4><p>HTTPSçš„è¯·æ±‚è¿‡ç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯è¯ä¹¦éªŒè¯ï¼Œä¸€ä¸ªæ˜¯æ•°æ®ä¼ è¾“ï¼Œå…·ä½“çš„äº¤äº’è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º:<br><img src="http://122.51.73.210:3000/upload/2020-9-24/20209243367.jpg" alt="httpsçš„åŠ å¯†éªŒè¯å’Œæ•°æ®ä¼ è¾“è¿‡ç¨‹"></p><h4 id="åŠ å¯†éªŒè¯å’Œæ•°æ®ä¼ è¾“çš„å…·ä½“è¿‡ç¨‹"><a class="header-anchor" href="#åŠ å¯†éªŒè¯å’Œæ•°æ®ä¼ è¾“çš„å…·ä½“è¿‡ç¨‹"></a>åŠ å¯†éªŒè¯å’Œæ•°æ®ä¼ è¾“çš„å…·ä½“è¿‡ç¨‹</h4><p>å¾…æ·»åŠ å…·ä½“å†…å®¹</p><h3 id="å‚è€ƒ"><a class="header-anchor" href="#å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://blog.csdn.net/qq_42046105/article/details/103396972" target="_blank" rel="noopener">ã€å›¾æ–‡è®²è§£ã€‘ä½ ä¸€å®šèƒ½çœ‹æ‡‚çš„HTTPSåŸç†å‰–æï¼</a></li><li><a href="https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6/808219?fr=aladdin" target="_blank" rel="noopener">æœåŠ¡å™¨è¯ä¹¦-ç™¾åº¦ç™¾ç§‘</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦æ˜¯ä¸ºäº†è®°å½•å¹³æ—¶é˜…è¯»&amp;lt;&amp;lt;HTTPæƒå¨æŒ‡å—&amp;gt;&amp;gt;çš„ä¸€äº›çŸ¥è¯†ç‚¹çš„ã€‚ æŠŠå®ƒä»¬æŠ½ç¦»å‡ºæ¥ï¼Œè®°å½•åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæ–¹ä¾¿å¹³æ—¶çš„ç†è§£&lt;/p&gt;
&lt;h
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="http" scheme="https://xzh97.github.io/tags/http/"/>
    
      <category term="åè®®" scheme="https://xzh97.github.io/tags/%E5%8D%8F%E8%AE%AE/"/>
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>ç»„ä»¶è®¾è®¡æ€è€ƒ-CustomTransfer</title>
    <link href="https://xzh97.github.io/2020/07/22/component-design-custom-transfer/"/>
    <id>https://xzh97.github.io/2020/07/22/component-design-custom-transfer/</id>
    <published>2020-07-22T13:40:46.000Z</published>
    <updated>2025-11-24T08:23:41.553Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç»„ä»¶è®¾è®¡"><a class="header-anchor" href="#ç»„ä»¶è®¾è®¡"></a>ç»„ä»¶è®¾è®¡</h2><h3 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h3><p>æœ¬æ¥ä¹‹å‰éƒ¨é—¨é‚£è¾¹æœ‰è¿™æ ·ç±»ä¼¼çš„æ¡†ï¼Œæˆ‘è¿˜ä»¥ä¸ºè¿™ä¸ªç»„ä»¶æ˜¯é€šç”¨ç»„ä»¶ï¼Œç»“æœå‘ç°å¹¶ä¸æ˜¯ã€‚è€Œä¸”é€‰æ‹©éƒ¨é—¨é‚£å—ä¸šåŠ¡ç›¸å…³ä»£ç å®åœ¨å¤ªå¤šã€‚æ‰€ä»¥æ­¤æ¬¡éœ€æ±‚é‡Œï¼Œæˆ‘å‡†å¤‡å†™ä¸ªé€šç”¨çš„</p><h3 id="è®¾è®¡"><a class="header-anchor" href="#è®¾è®¡"></a>è®¾è®¡</h3><h4 id="æˆå“å›¾"><a class="header-anchor" href="#æˆå“å›¾"></a>æˆå“å›¾</h4><p><img src="http://122.51.73.210:3000/upload/2020-07-22/202007224899.jpg" alt="image"></p><h3 id="ç»„ä»¶å®ä¾‹ä¹‹CustomTransferç»„ä»¶è®¾è®¡"><a class="header-anchor" href="#ç»„ä»¶å®ä¾‹ä¹‹CustomTransferç»„ä»¶è®¾è®¡"></a>ç»„ä»¶å®ä¾‹ä¹‹CustomTransferç»„ä»¶è®¾è®¡</h3><h4 id="è®¾è®¡æ€è·¯"><a class="header-anchor" href="#è®¾è®¡æ€è·¯"></a>è®¾è®¡æ€è·¯</h4><h5 id="å†…å®¹å¸ƒå±€"><a class="header-anchor" href="#å†…å®¹å¸ƒå±€"></a>å†…å®¹å¸ƒå±€</h5><p><img src="http://122.51.73.210:3000/upload/2020-07-22/20200722319.png" alt="image"></p><h5 id="æ•°æ®å¤„ç†"><a class="header-anchor" href="#æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h5><ul><li>é€šç”¨æ•°æ®æ ¼å¼:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">    key: &#39;&#39;,  &#x2F;&#x2F; ç´¢å¼•ï¼Œåšdiffç”¨</span><br><span class="line">    value: &#39;&#39;, &#x2F;&#x2F; å˜é‡value</span><br><span class="line">    label: &#39;&#39;, &#x2F;&#x2F; å˜é‡åç§°</span><br><span class="line">    type: &#39;&#39;, &#x2F;&#x2F; å˜é‡ç±»å‹</span><br><span class="line">    children:[] &#x2F;&#x2F; å˜é‡å­çº§æ•°ç»„</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ•°æ®è·å–æ–¹å¼<ul><li>å¤–éƒ¨ä¼ å…¥<code>dataSource</code></li><li>å¤–éƒ¨ä¼ å…¥<code>method, getUrl, extraParams, searchKey</code></li></ul></li><li>æ•°æ®è½¬æ¢æ–¹å¼ï¼š<ul><li>ä¼ å…¥<code>labelKeyï¼ŒvalueKeyï¼ŒchildKeyï¼ŒtypeKey</code>ç„¶åé€šè¿‡<code>formater</code>è½¬æ¢æ•°æ®æ ¼å¼ã€‚</li></ul></li></ul><h4 id="äº¤äº’"><a class="header-anchor" href="#äº¤äº’"></a>äº¤äº’</h4><ul><li>æœªå¼¹æ¡†æ˜¾ç¤ºä¸€ä¸ª<code>multiple</code>æ¨¡å¼çš„<code>select</code>æ§ä»¶</li><li>ç‚¹å‡»<code>Select</code> å‡ºç°<code>Modal</code>å¼¹æ¡†</li><li>å·¦ä¸Š<code>Input</code>å¯ä»¥å®æ—¶æ¨¡ç³ŠæŸ¥è¯¢</li><li>æœç´¢å‡ºçš„åˆ—è¡¨å±•ç¤ºåœ¨å·¦ä¸‹æ–¹ï¼Œç‚¹å‡»åˆ—è¡¨<code>item</code>æ¥é€‰æ‹©æ§ä»¶ï¼Œè‹¥ä¼ å…¥<code>typeCheck</code>ï¼Œåˆ™ç‚¹å‡»æ—¶å¯¹é€‰æ‹©åšç±»å‹æ ¡éªŒ</li><li>å·²é€‰æ‹©çš„åˆ—è¡¨å±•ç¤ºåœ¨å³ä¸‹æ–¹ï¼Œå¯ä»¥ç‚¹å‡»å³ä¾§Xæ ·å¼çš„<code>icon</code>åˆ é™¤</li><li>ç‚¹å‡»å–æ¶ˆ ä¸ä¿å­˜å·²é€‰æ‹©æ§ä»¶åˆ—è¡¨</li><li>ç‚¹å‡»ç¡®å®šï¼Œä¿å­˜å·²é€‰æ‹©æ§ä»¶åˆ—è¡¨</li></ul><h3 id="ä¼˜ç‚¹"><a class="header-anchor" href="#ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>å¸ƒå±€æ¸…æ™°ï¼Œå„æ¨¡å—åŠŸèƒ½æ€è·¯æ¸…æ¥šï¼Œå¯è¯»æ€§å¥½ã€‚</li><li>åœ¨å¤–éƒ¨åŠ è½½æ•°æ®ä¼ å…¥ç»„ä»¶å†…ï¼Œç”±äºç»„ä»¶åœ¨å¤–éƒ¨å¯èƒ½å¹¶å‘ä½¿ç”¨è¾ƒå¤šï¼Œæ‰€ä»¥ä¸ºäº†é¿å…åŒæ—¶è°ƒç”¨æ­¤æ¥å£ï¼Œå»ºè®®åœ¨å¤–éƒ¨ä¼ å…¥<code>dataSource</code>ã€‚</li></ul><h3 id="ä¸è¶³"><a class="header-anchor" href="#ä¸è¶³"></a>ä¸è¶³</h3><ul><li>ä¼ å…¥çš„<code>typeCheck</code>å’Œ<code>isError</code>å±æ€§ï¼Œè¿™é‡Œå¹¶ä¸ç¬¦åˆæˆ‘çš„é¢„æœŸã€‚å› ä¸ºè¿™é‡Œæ˜¯ä¸šåŠ¡çš„éœ€æ±‚ï¼Œè€Œä¸æ˜¯ç»„ä»¶æœ¬èº«çš„éœ€æ±‚ã€‚ä½†ç”±äºå¤–éƒ¨é¡µé¢å¸ƒå±€æœªä½¿ç”¨<code>FormItem</code>åŒ…è£¹ï¼Œä¸å¥½åšå¤„ç†ä¿å­˜çš„æŠ¥é”™æç¤ºå¤„ç†ã€‚</li><li>ç»„ä»¶è®¾è®¡ä¹Ÿè®¸å¯ä»¥æ›´å¥½</li></ul><h3 id="æ€è€ƒ"><a class="header-anchor" href="#æ€è€ƒ"></a>æ€è€ƒ</h3><ul><li>å¯¹ç»„ä»¶åšä¸€ä¸ªå¤§è‡´çš„å¸ƒå±€ï¼Œå¯ä»¥æ¸…æ™°çš„çŸ¥é“æœ‰å“ªäº›äº¤äº’éœ€è¦å®ç°ã€‚</li><li>å¯¹ä¼ å…¥çš„æ•°æ®ä½œé€‚é…å¤„ç†ï¼Œè¿™é‡Œä¹Ÿæ˜¯æš‚æ—¶æœ‰ç‚¹å›°æƒ‘æˆ‘çš„åœ°æ–¹ï¼Œå› ä¸ºä¸åŒæ¥å£æ•°æ®æ ¼å¼å¯èƒ½ä¸åŒï¼Œç›®å‰è®¾è®¡ä¸­ï¼Œæ˜¯åœ¨å¤–éƒ¨ä¼ å…¥<code>valueKey</code>ï¼Œ<code>labelKey</code>ï¼Œ<code>childKey</code>æ¥åˆ¤æ–­ã€‚è¿™é‡Œå¯ä»¥æ€è€ƒä¸‹æ˜¯å¦æœ‰æ›´å¥½çš„å¤„ç†æ–¹å¼</li><li>åœ¨åŠ å…¥ä¸šåŠ¡éœ€æ±‚å¤„ç†æ—¶ï¼Œè¿™é‡Œæ›´å¥½çš„å¤„ç†æ–¹å¼æ˜¯å†™ä¸€ä¸ªæ–°çš„ä¸šåŠ¡ç»„ä»¶ï¼Œç„¶åæŠŠ<code>customTransfer</code>ä½œä¸ºä¸€ä¸ªå­ç»„ä»¶åŠ è¿›å»ï¼Œå…¶å®ƒåœ°æ–¹åŠ å…¥ä¸šåŠ¡å¤„ç†ã€‚ è€Œä¸åº”è¯¥ç›´æ¥åŠ è¿›æ¥ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ç»„ä»¶è®¾è®¡&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#ç»„ä»¶è®¾è®¡&quot;&gt;&lt;/a&gt;ç»„ä»¶è®¾è®¡&lt;/h2&gt;
&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;
&lt;p&gt;æœ¬æ¥ä¹‹å‰éƒ¨é—¨é‚£è¾¹æœ‰è¿™æ ·
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="ç»„ä»¶è®¾è®¡" scheme="https://xzh97.github.io/tags/%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>Vueæºç å­¦ä¹ ï¼ˆä¸€ï¼‰ï¼šå“åº”å¼-1</title>
    <link href="https://xzh97.github.io/2020/05/12/vue-reactivty/"/>
    <id>https://xzh97.github.io/2020/05/12/vue-reactivty/</id>
    <published>2020-05-12T04:39:34.000Z</published>
    <updated>2025-11-24T08:23:41.556Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h3><p>é¦–å…ˆå£°æ˜ä¸€ä¸‹ï¼Œæœ¬æ¥è®¡åˆ’æ˜¯ä¸€æœˆä¸€ç¯‡ï¼Œä¸‰æœˆåŠ äº†ä¸€æ•´ä¸ªæœˆçš„ç­ï¼Œ9107çš„è¿™ç§ï¼ŒçœŸæŒºç´¯çš„ã€‚æ‰€ä»¥å››æœˆä»½å°±æ²¡æœ‰å†™äº†ï¼Œè€Œä¸”æœ€è¿‘è§‰å¾—æœ‰é“äº‘ç¬”è®°æŒºå¥½ç”¨ï¼Œæ‰€ä»¥å¾ˆå¤šä¸œè¥¿éƒ½å…ˆåœ¨æœ‰é“äº‘é‡Œå†™äº†ã€‚å°±çœ‹åé¢å•¥æ—¶å€™æœ‰ç©ºè´´å‡ºæ¥ã€‚å¥½äº†ï¼Œæ­¥å…¥æ­£é¢˜ã€‚å…¶å®åœ¨è¿™ä¹‹å‰å‘¢ï¼Œå°±é™†é™†ç»­ç»­çš„é˜…è¯»è¿‡<code>vue2</code>çš„æºç ï¼Œä½†æ˜¯çœ‹çš„éƒ½é›¶é›¶æ•£æ•£çš„ï¼Œè¿™æ¬¡å†³å®šæ¥ç³»ç»Ÿçš„è§£è¯»ä¸‹<code>vue2</code>çš„æºç ï¼Œå¸Œæœ›è‡ªå·±èƒ½å¯¹<code>vue2</code>æŒæ¡çš„æ›´åŠ æ·±åˆ»ä»¥åŠæå‡è‡ªå·±çš„æ°´å¹³ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦è§£è¯»ä¸€ä¸‹<code>vue2</code>çš„å“åº”å¼åŸç†ï¼Œwhyï¼Ÿ å› ä¸ºè¿™ä¸ªé—®é¢˜å®åœ¨æ˜¯å¤ªå¸¸è§äº†ã€‚ğŸ˜œ</p><h3 id="è¿‡ç¨‹å›¾"><a class="header-anchor" href="#è¿‡ç¨‹å›¾"></a>è¿‡ç¨‹å›¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">æœ‰é“äº‘ç¬”è®°çš„è¿‡ç¨‹å›¾å®åœ¨å¤ªä¸‘äº†ï¼Œæˆ‘ä¹‹åç”¨å…¶ä»–çš„è½¯ä»¶ç”»ä¸€ä¸ªQWQ</span><br><span class="line">&lt;!--graph TD</span><br><span class="line">    A[data&#x2F;props]</span><br><span class="line">    A --&gt; B(defineReactive)</span><br><span class="line">    B --&gt; |tracking| D[ä¾èµ–æ”¶é›†]</span><br><span class="line">    B --&gt; |trigger| E[è§¦å‘]</span><br><span class="line">    D --&gt; |depend| F[Dep]</span><br><span class="line">    E --&gt; |notify| F[Dep]</span><br><span class="line">    </span><br><span class="line">    G[computed]</span><br><span class="line">    G --&gt; H(computedWatcher)</span><br><span class="line">    H --&gt; |tracking| I[ä¾èµ–æ”¶é›†]</span><br><span class="line">    H --&gt; |trigger| J[ä¾èµ–æ”¶é›†]</span><br><span class="line">    I --&gt; |depend| F[Dep]</span><br><span class="line">    J --&gt; |notify| F[Dep]</span><br><span class="line">    </span><br><span class="line">    K[watch]</span><br><span class="line">    K --&gt; L(Watcher)</span><br><span class="line">    L --&gt; |update| F[Dep]</span><br><span class="line">    L --&gt; |addDep| F[Dep]</span><br><span class="line">    L --&gt; |run| M(callback)</span><br><span class="line">    </span><br><span class="line">    N[$mount]</span><br><span class="line">    N --&gt; O(render watcher)</span><br><span class="line">    N --&gt; P(updateComponent)</span><br><span class="line">    N --&gt; |update| F[Dep]</span><br><span class="line">    N --&gt; |addDep| F[Dep]--&gt;</span><br></pre></td></tr></table></figure><h3 id="Object-defineProperty"><a class="header-anchor" href="#Object-defineProperty"></a>Object.defineProperty</h3><blockquote><p>Object.defineProperty()ï¼Œå®ƒä¼šåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§å¹¶è¿”å›æ­¤å¯¹è±¡</p></blockquote><p>vueçš„å“åº”å¼ä¸»è¦æ˜¯é€šè¿‡<code>Object.defineProperty()</code>æ¥å®Œæˆçš„ã€‚ä½†ç”±äº<code>Object.defineProperty()</code>æ˜¯<code>ES5</code>çš„å†…å®¹ï¼Œæ‰€ä»¥<code>vue</code>æœ¬èº«å…¼å®¹ä¸äº†<code>ie8</code>ã€‚è¿™é‡Œå¤§è‡´è¯´æ˜ä¸€ä¸‹<code>Object.defineProperty()</code>çš„ä½œç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'zh'</span>,</span><br><span class="line">  age: <span class="string">'23'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Šé¢çš„èµ‹å€¼ç­‰ä»·äº</span></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj1, <span class="string">'name'</span>, &#123;</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    writable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="string">'zh'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj1, <span class="string">'age'</span>, &#123;</span><br><span class="line">    enumerable: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¯æšä¸¾</span></span><br><span class="line">    configurable: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¯ä»¥è¢«æ”¹å˜ä»¥åŠè¢«åˆ é™¤</span></span><br><span class="line">    writable: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¯ä»¥è¢«èµ‹å€¼</span></span><br><span class="line">    value: <span class="number">23</span> <span class="comment">// èµ‹å€¼ï¼Œ ä¸å†™value é»˜è®¤èµ‹å€¼undefined</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// enumerableï¼Œconfigurableï¼Œwritableï¼Œvalueè¢«ç§°ä¸ºæ•°æ®æè¿°ç¬¦ï¼Œ</span></span><br><span class="line"><span class="comment">// enumerableï¼Œconfigurableï¼Œget(),set()è¢«ç§°ä¸ºå­˜å–æè¿°ç¬¦ã€‚</span></span><br><span class="line"><span class="comment">//enumerableï¼ŒconfigurableåŒæ—¶æ˜¯ä¸¤ç§æè¿°ç¬¦ï¼Œæ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ä¸èƒ½åŒæ—¶å­˜åœ¨ï¼ŒåŒæ—¶å­˜åœ¨æ—¶ä¼šæŠ¥é”™ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj,key,&#123;</span><br><span class="line">    <span class="comment">// æ˜¯ä¸€ä¸ªç»™keyæä¾›çš„getteræ–¹æ³•ï¼Œå½“æˆ‘ä»¬ è®¿é—® è¯¥keyå€¼çš„æ—¶å€™ä¼šè¢«è§¦å‘</span></span><br><span class="line">    <span class="keyword">get</span>()&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`get<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ˜¯ä¸€ä¸ªç»™keyæä¾›çš„setteræ–¹æ³•ï¼Œå½“æˆ‘ä»¬ æ”¹å˜ è¯¥keyå€¼çš„æ—¶å€™ä¼šè¢«è§¦å‘</span></span><br><span class="line">    <span class="keyword">set</span>(newVal)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`setå˜åŒ–ï¼Œ<span class="subst">$&#123;key&#125;</span>çš„newValæ˜¯<span class="subst">$&#123;newVal&#125;</span>`</span>)</span><br><span class="line">      <span class="keyword">return</span> newVal;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(obj.age);</span><br><span class="line">obj.name = <span class="string">'zh1'</span>;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬ç»™<code>obj</code>è®¾ç½®å¥½äº†<code>get</code>å’Œ<code>set</code>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç®€å•çš„æŠŠè¿™ä¸ªå¯¹è±¡ç§°ä¸ºæ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚é‚£ä¹ˆï¼Œ<code>vue</code>ä¸­çš„å“åº”å¼å¯¹è±¡ç©¶ç«Ÿæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p><h3 id="å“åº”å¼å¯¹è±¡å…¥å£"><a class="header-anchor" href="#å“åº”å¼å¯¹è±¡å…¥å£"></a>å“åº”å¼å¯¹è±¡å…¥å£</h3><p>æƒ³äº†è§£å“åº”å¼ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹<code>vue</code>çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vueçš„æœ€åˆå…¥å£</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Vue</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span> &amp;&amp;</span><br><span class="line">    !(<span class="keyword">this</span> <span class="keyword">instanceof</span> Vue)</span><br><span class="line">  ) &#123;</span><br><span class="line">    warn(<span class="string">'Vue is a constructor and should be called with the `new` keyword'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>._init(options) </span><br><span class="line">  <span class="comment">// æˆ‘ä»¬å¯ä»¥çœ‹åˆ°vueè°ƒç”¨æ—¶å…¶å®å°±è°ƒç”¨äº†ä¸€ä¸ª_initæ–¹æ³•</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®šä¹‰äº†_initæ–¹æ³•</span></span><br><span class="line">initMixin(Vue)</span><br><span class="line"><span class="comment">// æ·»åŠ æ•°æ®ç›¸å…³å¤„ç†æ–¹æ³•ï¼Œ$set,$delete,$watch</span></span><br><span class="line">stateMixin(Vue)  </span><br><span class="line"><span class="comment">// æ·»åŠ äº‹ä»¶æ–¹æ³•ï¼Œ$on,$once,$off,$emit</span></span><br><span class="line">eventsMixin(Vue)</span><br><span class="line"><span class="comment">// æ·»åŠ ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œ _update,$forceUpdate,$destory</span></span><br><span class="line">lifecycleMixin(Vue)</span><br><span class="line"><span class="comment">// æ·»åŠ æ¸²æŸ“ç›¸å…³å¤„ç† $nextTick, _render</span></span><br><span class="line">renderMixin(Vue)</span><br><span class="line"></span><br><span class="line"><span class="comment">// _initæ–¹æ³•å†…å®¹</span></span><br><span class="line">Vue.prototype._init = <span class="function"><span class="keyword">function</span> (<span class="params">options?: Object</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> vm: Component = <span class="keyword">this</span></span><br><span class="line">    <span class="comment">// a uid</span></span><br><span class="line">    vm._uid = uid++</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> startTag, endTag</span><br><span class="line">    <span class="comment">/* istanbul ignore if */</span></span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span> &amp;&amp; config.performance &amp;&amp; mark) &#123;</span><br><span class="line">      startTag = <span class="string">`vue-perf-start:<span class="subst">$&#123;vm._uid&#125;</span>`</span></span><br><span class="line">      endTag = <span class="string">`vue-perf-end:<span class="subst">$&#123;vm._uid&#125;</span>`</span></span><br><span class="line">      mark(startTag)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// a flag to avoid this being observed</span></span><br><span class="line">    vm._isVue = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// merge options</span></span><br><span class="line">    <span class="keyword">if</span> (options &amp;&amp; options._isComponent) &#123;</span><br><span class="line">      <span class="comment">// optimize internal component instantiation</span></span><br><span class="line">      <span class="comment">// since dynamic options merging is pretty slow, and none of the</span></span><br><span class="line">      <span class="comment">// internal component options needs special treatment.</span></span><br><span class="line">      initInternalComponent(vm, options)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      vm.$options = mergeOptions(</span><br><span class="line">        resolveConstructorOptions(vm.constructor),</span><br><span class="line">        options || &#123;&#125;,</span><br><span class="line">        vm</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* istanbul ignore else */</span></span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span>) &#123;</span><br><span class="line">      initProxy(vm)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      vm._renderProxy = vm</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// expose real self</span></span><br><span class="line">    vm._self = vm</span><br><span class="line">    initLifecycle(vm) <span class="comment">// åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸç›¸å…³</span></span><br><span class="line">    initEvents(vm) <span class="comment">// åˆå§‹åŒ–äº‹ä»¶ä¸­å¿ƒç›¸å…³</span></span><br><span class="line">    initRender(vm) <span class="comment">// åˆå§‹åŒ–æ¸²æŸ“ç›¸å…³</span></span><br><span class="line">    callHook(vm, <span class="string">'beforeCreate'</span>) </span><br><span class="line">    initInjections(vm) <span class="comment">// resolve injections before data/props</span></span><br><span class="line">    <span class="comment">// æ•°æ®åˆå§‹åŒ–ï¼Œå“åº”å¼åŸç† start</span></span><br><span class="line">    initState(vm) <span class="comment">// å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯æˆ‘ä»¬çš„ç›®æ ‡</span></span><br><span class="line">    <span class="comment">// æ•°æ®åˆå§‹åŒ–ï¼Œå“åº”å¼åŸç† end</span></span><br><span class="line">    initProvide(vm) <span class="comment">// resolve provide after data/props</span></span><br><span class="line">    callHook(vm, <span class="string">'created'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* istanbul ignore if */</span></span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span> &amp;&amp; config.performance &amp;&amp; mark) &#123;</span><br><span class="line">      vm._name = formatComponentName(vm, <span class="literal">false</span>)</span><br><span class="line">      mark(endTag)</span><br><span class="line">      measure(<span class="string">`vue <span class="subst">$&#123;vm._name&#125;</span> init`</span>, startTag, endTag)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (vm.$options.el) &#123;</span><br><span class="line">      vm.$mount(vm.$options.el)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// initState æ•°æ®åˆå§‹åŒ–ã€‚æ ¹æ®ä½ ä¼ å…¥çš„optionsçš„å†…å®¹å†³å®šéœ€è¦è·‘å“ªäº›å¯¹åº”çš„æ•°æ®åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">initState</span> (<span class="params">vm: Component</span>) </span>&#123;</span><br><span class="line">  vm._watchers = []</span><br><span class="line">  <span class="keyword">const</span> opts = vm.$options</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œçš„åˆå§‹åŒ–å…¶å®æ²¡æœ‰å•¥ç‰¹åˆ«çš„ä¸œè¥¿ï¼Œä¸»è¦é€»è¾‘å¦‚ä¸‹ï¼š</span></span><br><span class="line">  <span class="comment">// 1. æ•°æ®æ˜¯å¦é‡å¤å£°æ˜</span></span><br><span class="line">  <span class="comment">// 2. é€šè¿‡proxyå¤„ç†æ•°æ®ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡this.xxæ¥è®¿é—®æ•°æ®</span></span><br><span class="line">  <span class="comment">// 3. å¯¹ä¼ å…¥çš„æ•°æ®åšå“åº”å¼å¤„ç†</span></span><br><span class="line">  <span class="keyword">if</span> (opts.props) initProps(vm, opts.props)</span><br><span class="line">  <span class="keyword">if</span> (opts.methods) initMethods(vm, opts.methods)</span><br><span class="line">  <span class="keyword">if</span> (opts.data) &#123;</span><br><span class="line">    initData(vm)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    observe(vm._data = &#123;&#125;, <span class="literal">true</span> <span class="comment">/* asRootData */</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (opts.computed) initComputed(vm, opts.computed)</span><br><span class="line">  <span class="keyword">if</span> (opts.watch &amp;&amp; opts.watch !== nativeWatch) &#123;</span><br><span class="line">    initWatch(vm, opts.watch)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–ä¼ å…¥çš„dataæ•°æ®ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initData</span> (<span class="params">vm: Component</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> data = vm.$options.data</span><br><span class="line">  <span class="comment">// dataä¸ºä»€ä¹ˆæ˜¯ä»¥æ–¹æ³•ä¼ å…¥çš„ï¼Ÿ</span></span><br><span class="line">  <span class="comment">// vueå®ä¾‹å¯èƒ½æ˜¯ç»„ä»¶ã€‚è€Œå¯¹äºç»„ä»¶æ¥è¯´ï¼Œæ¯ä¸ªç»„ä»¶çš„dataåº”è¯¥æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œä¸èƒ½äº’ç›¸å½±å“ã€‚ </span></span><br><span class="line">  <span class="comment">// æ‰€ä»¥è¯´dataä¸ºä»€ä¹ˆæ¨èçš„æ˜¯ä¼ å…¥function</span></span><br><span class="line">  data = vm._data = <span class="keyword">typeof</span> data === <span class="string">'function'</span></span><br><span class="line">    ? getData(data, vm)</span><br><span class="line">    : data || &#123;&#125;</span><br><span class="line">  <span class="keyword">if</span> (!isPlainObject(data)) &#123;</span><br><span class="line">    data = &#123;&#125;</span><br><span class="line">    process.env.NODE_ENV !== <span class="string">'production'</span> &amp;&amp; warn(</span><br><span class="line">      <span class="string">'data functions should return an object:\n'</span> +</span><br><span class="line">      <span class="string">'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function'</span>,</span><br><span class="line">      vm</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// proxy data on instance</span></span><br><span class="line">  <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(data)</span><br><span class="line">  <span class="keyword">const</span> props = vm.$options.props</span><br><span class="line">  <span class="keyword">const</span> methods = vm.$options.methods</span><br><span class="line">  <span class="keyword">let</span> i = keys.length</span><br><span class="line">  <span class="comment">// é˜²æ­¢é‡å¤å˜é‡å£°æ˜</span></span><br><span class="line">  <span class="keyword">while</span> (i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> key = keys[i]</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (methods &amp;&amp; hasOwn(methods, key)) &#123;</span><br><span class="line">        warn(</span><br><span class="line">          <span class="string">`Method "<span class="subst">$&#123;key&#125;</span>" has already been defined as a data property.`</span>,</span><br><span class="line">          vm</span><br><span class="line">        )</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (props &amp;&amp; hasOwn(props, key)) &#123;</span><br><span class="line">      process.env.NODE_ENV !== <span class="string">'production'</span> &amp;&amp; warn(</span><br><span class="line">        <span class="string">`The data property "<span class="subst">$&#123;key&#125;</span>" is already declared as a prop. `</span> +</span><br><span class="line">        <span class="string">`Use prop default value instead.`</span>,</span><br><span class="line">        vm</span><br><span class="line">      )</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isReserved(key)) &#123;</span><br><span class="line">    <span class="comment">// ä»£ç†æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬çš„this.xxå±æ€§å®é™…æ˜¯è®¿é—®çš„this._data.xx</span></span><br><span class="line">      proxy(vm, <span class="string">`_data`</span>, key) </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// observe data</span></span><br><span class="line">  <span class="comment">// é‡ç‚¹åœ°æ–¹ï¼Œ å“åº”å¼å¤„ç†çš„æ–¹æ³•</span></span><br><span class="line">  observe(data, <span class="literal">true</span> <span class="comment">/* asRootData */</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="observe"><a class="header-anchor" href="#observe"></a>observe</h3><p><code>observe</code>å®šä¹‰åœ¨<code>core/instance/observer.js</code>ä¸­ã€‚æˆ‘ä»¬çœ‹ä¸‹<code>observe</code>é‡Œåšäº†å“ªäº›äº‹æƒ…ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">observe</span> (<span class="params">value: any, asRootData: ?boolean</span>): <span class="title">Observer</span> | <span class="title">void</span> </span>&#123;</span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡ä»¥åŠæ˜¯å¦ä¸ºv-dom</span></span><br><span class="line">  <span class="keyword">if</span> (!isObject(value) || value <span class="keyword">instanceof</span> VNode) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> ob: Observer | <span class="keyword">void</span></span><br><span class="line">  <span class="keyword">if</span> (hasOwn(value, <span class="string">'__ob__'</span>) &amp;&amp; value.__ob__ <span class="keyword">instanceof</span> Observer) &#123;</span><br><span class="line">  <span class="comment">// ç¼“å­˜å¤„ç†</span></span><br><span class="line">    ob = value.__ob__</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (</span><br><span class="line">    shouldObserve &amp;&amp;</span><br><span class="line">    !isServerRendering() &amp;&amp;</span><br><span class="line">    (<span class="built_in">Array</span>.isArray(value) || isPlainObject(value)) &amp;&amp;</span><br><span class="line">    <span class="built_in">Object</span>.isExtensible(value) &amp;&amp;</span><br><span class="line">    !value._isVue</span><br><span class="line">  ) &#123;</span><br><span class="line">  <span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ªObserverç±»</span></span><br><span class="line">    ob = <span class="keyword">new</span> Observer(value)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (asRootData &amp;&amp; ob) &#123;</span><br><span class="line">    ob.vmCount++</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ob</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>observe()</code>ä¸»è¦æ˜¯å¯¹ä¼ å…¥çš„<code>value</code>åšäº†æ˜¯å¦ç¼“å­˜è¿‡çš„åˆ¤æ–­ï¼Œç„¶åè¿”å›çš„ä»ç„¶æ˜¯ä¸€ä¸ª<code>Observer</code>å®ä¾‹å¯¹è±¡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>Observer</code>é‡Œåšäº†ä»€ä¹ˆå¤„ç†</p><h3 id="Observer"><a class="header-anchor" href="#Observer"></a>Observer</h3><p>Observerçš„å®šä¹‰å’Œobserveæ–¹æ³•åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>Observer</code>æ˜¯ä¸€ä¸ªç±»ã€‚æˆ‘ä»¬çœ‹ä¸‹è¿™ä¸ªç±»ä¸­åšäº†å“ªäº›å¤„ç†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayProto = <span class="built_in">Array</span>.prototype</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> arrayMethods = <span class="built_in">Object</span>.create(arrayProto)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">protoAugment</span> (<span class="params">target, src: Object</span>) </span>&#123;</span><br><span class="line">  target.__proto__ = src</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">  value: any;</span><br><span class="line">  dep: Dep;</span><br><span class="line">  <span class="comment">// number of vms that have this object as root $data</span></span><br><span class="line">  vmCount: number; </span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span> (value: any) &#123;</span><br><span class="line">    <span class="keyword">this</span>.value = value <span class="comment">// ä¼ å…¥å€¼</span></span><br><span class="line">    <span class="keyword">this</span>.dep = <span class="keyword">new</span> Dep() <span class="comment">// å£°æ˜Depç±»</span></span><br><span class="line">    <span class="keyword">this</span>.vmCount = <span class="number">0</span> </span><br><span class="line">    <span class="comment">// ç»‘å®šObserverå®ä¾‹åˆ°valueçš„__ob__å±æ€§ä¸Š</span></span><br><span class="line">    def(value, <span class="string">'__ob__'</span>, <span class="keyword">this</span>) </span><br><span class="line">    <span class="comment">// todo çœ‹ä»£ç æ³¨é‡Šè¯´æ˜¯æ‹¦æˆªï¼Œç„¶ååŠ å¼ºå¯¹arrayçš„å¤„ç†ã€‚å…·ä½“éœ€è¦çœ‹åé¢æ˜¯æ€ä¹ˆç”¨çš„ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (hasProto) &#123;</span><br><span class="line">        protoAugment(value, arrayMethods) </span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        copyAugment(value, arrayMethods, arrayKeys)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.observeArray(value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.walk(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Walk through all properties and convert them into</span></span><br><span class="line"><span class="comment">   * getter/setters. This method should only be called when</span></span><br><span class="line"><span class="comment">   * value type is Object.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  walk (obj: <span class="built_in">Object</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(obj)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</span><br><span class="line">      defineReactive(obj, keys[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Observe a list of Array items.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  observeArray (items: <span class="built_in">Array</span>&lt;any&gt;) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = items.length; i &lt; l; i++) &#123;</span><br><span class="line">      observe(items[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹å¯¹è±¡åšä¸€ä¸ªå£°æ˜</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">def</span> (<span class="params">obj: Object, key: string, val: any, enumerable?: boolean</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    value: val,</span><br><span class="line">    enumerable: !!enumerable,</span><br><span class="line">    writable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢å¯ä»¥çŸ¥é“ï¼Œ<code>Observer</code>ç±»å°±æ˜¯ç»™ä¼ å…¥çš„<code>object/array</code>è®¾ç½®<code>getter</code>å’Œ<code>setter</code>ï¼Œå¹¶æ²¡æœ‰åšä»€ä¹ˆå¤ªå¤šçš„å¤„ç†ï¼Œå°±æ˜¯å£°æ˜äº†ä¸€ä¸ª<code>Dep</code>ç±»ã€‚ç„¶åæŠŠè‡ªèº«å®ä¾‹è®¾ç½®åˆ°<code>value</code>çš„<code>__ob__</code>å±æ€§ä¸Šï¼Œæœ€åå°±æ˜¯å¯¹å¯¹è±¡å’Œæ•°ç»„çš„å·®å¼‚åŒ–å¤„ç†ã€‚</p><h3 id="defineReactive"><a class="header-anchor" href="#defineReactive"></a>defineReactive</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ‰æ˜¯çœŸæ­£å£°æ˜ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  obj: Object,</span></span></span><br><span class="line"><span class="function"><span class="params">  key: string,</span></span></span><br><span class="line"><span class="function"><span class="params">  val: any,</span></span></span><br><span class="line"><span class="function"><span class="params">  customSetter?: ?Function,</span></span></span><br><span class="line"><span class="function"><span class="params">  shallow?: boolean</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dep = <span class="keyword">new</span> Dep()</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦å¯ä»¥æ”¹å˜objçš„å€¼</span></span><br><span class="line">  <span class="keyword">const</span> property = <span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, key)</span><br><span class="line">  <span class="keyword">if</span> (property &amp;&amp; property.configurable === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// cater for pre-defined getter/setters</span></span><br><span class="line">  <span class="keyword">const</span> getter = property &amp;&amp; property.get</span><br><span class="line">  <span class="keyword">const</span> setter = property &amp;&amp; property.set</span><br><span class="line">  <span class="keyword">if</span> ((!getter || setter) &amp;&amp; <span class="built_in">arguments</span>.length === <span class="number">2</span>) &#123;</span><br><span class="line">    val = obj[key]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> childOb = !shallow &amp;&amp; observe(val)</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    <span class="keyword">get</span>: function reactiveGetter () &#123;</span><br><span class="line">      <span class="keyword">const</span> value = getter ? getter.call(obj) : val</span><br><span class="line">      <span class="comment">// ä¾èµ–æ”¶é›†</span></span><br><span class="line">      <span class="keyword">if</span> (Dep.target) &#123;</span><br><span class="line">        dep.depend()</span><br><span class="line">        <span class="keyword">if</span> (childOb) &#123;</span><br><span class="line">          childOb.dep.depend()</span><br><span class="line">          <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(value)) &#123;</span><br><span class="line">            dependArray(value)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> value</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>: function reactiveSetter (newVal) &#123;</span><br><span class="line">      <span class="keyword">const</span> value = getter ? getter.call(obj) : val</span><br><span class="line">      <span class="comment">/* eslint-disable no-self-compare */</span></span><br><span class="line">      <span class="keyword">if</span> (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/* eslint-enable no-self-compare */</span></span><br><span class="line">      <span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span> &amp;&amp; customSetter) &#123;</span><br><span class="line">        customSetter()</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// #7981: for accessor properties without setter</span></span><br><span class="line">      <span class="keyword">if</span> (getter &amp;&amp; !setter) <span class="keyword">return</span></span><br><span class="line">      <span class="keyword">if</span> (setter) &#123;</span><br><span class="line">        setter.call(obj, newVal)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        val = newVal</span><br><span class="line">      &#125;</span><br><span class="line">      childOb = !shallow &amp;&amp; observe(newVal)</span><br><span class="line">      <span class="comment">// è§¦å‘æ›´æ–°</span></span><br><span class="line">      dep.notify()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ<code>defineReactive()</code>ä¸»è¦æ˜¯é€šè¿‡<code>Object.defineProperty()</code>å¯¹<code>obj</code>è®¾ç½®<code>getter</code>å’Œ<code>setter</code>ã€‚å¹¶ä¸”è¿˜å¯¹<code>childObj</code>è¿›è¡Œäº†<code>observe</code>æ“ä½œï¼Œè¿™æ ·å°±èƒ½ä¿è¯ä¸ç®¡<code>obj</code>çš„ç»“æ„å¤šå¤æ‚ï¼Œéƒ½èƒ½å¤ŸæŠŠå­å±æ€§å˜æˆå“åº”å¼å¯¹è±¡å¹¶èƒ½åœ¨è®¿é—®æˆ–ä¿®æ”¹æ—¶åŠæ—¶çš„è§¦å‘<code>getter</code>æˆ–<code>setter</code>ã€‚æœ€åï¼Œæˆ‘ä»¬åœ¨<code>getter</code>ä¸­è¿›è¡Œä¾èµ–æ”¶é›†çš„æ“ä½œï¼Œåœ¨<code>setter</code>ä¸­è§¦å‘æ›´æ–°çš„æ“ä½œã€‚</p><h3 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h3><p><code>vue</code>çš„å“åº”å¼æ ¸å¿ƒå°±æ˜¯é€šè¿‡<code>Object.defineProperty()</code>æ¥å¯¹ä¼ å…¥å¯¹è±¡æ·»åŠ <code>getter</code>å’Œ<code>setter</code>ã€‚ç”±äºç¯‡å¹…å·²ç»æŒºé•¿çš„äº†ï¼Œä¹‹åçš„ä¾èµ–æ”¶é›†å’Œè§¦å‘æ›´æ–°æ”¾åˆ°ä¸‹ä¸€ç¯‡ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆå£°æ˜ä¸€ä¸‹ï¼Œæœ¬æ¥è®¡åˆ’æ˜¯ä¸€æœˆä¸€ç¯‡ï¼Œä¸‰æœˆåŠ äº†ä¸€æ•´ä¸ªæœˆçš„ç­ï¼Œ9107çš„è¿™ç§ï¼ŒçœŸæŒºç´¯çš„ã€‚æ‰€ä»¥å››æœˆä»½å°±æ²¡æœ‰å†™äº†ï¼Œè€Œä¸”æœ€è¿‘è§‰å¾—æœ‰é“äº‘ç¬”è®°æŒºå¥½ç”¨ï¼Œæ‰€ä»¥å¾ˆå¤šä¸œè¥¿éƒ½å…ˆåœ¨æœ‰
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="vue" scheme="https://xzh97.github.io/tags/vue/"/>
    
      <category term="æºç " scheme="https://xzh97.github.io/tags/%E6%BA%90%E7%A0%81/"/>
    
      <category term="å“åº”å¼" scheme="https://xzh97.github.io/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>ä»è¾“å…¥URLåˆ°é¡µé¢å±•ç¤ºçš„è¿‡ç¨‹</title>
    <link href="https://xzh97.github.io/2020/01/15/url-parse/"/>
    <id>https://xzh97.github.io/2020/01/15/url-parse/</id>
    <published>2020-01-15T12:56:57.000Z</published>
    <updated>2025-11-24T08:23:41.556Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>è®²é“ç†ï¼Œä¹‹å‰è¯´è¿‡çš„ä¸€<s>å¤©</s>æœˆä¸€ç¯‡å…¶å®æ˜¯å¼€ç©ç¬‘çš„ã€‚è«åå…¶å¦™å°±è¿™ä¹ˆä¹…æ²¡å†™è¿‡åšå®¢äº†ã€‚ä»Šå¤©åœ¨å›å®¶çš„è·¯ä¸Šçªç„¶æƒ³èµ·äº†è¿™ä¸ªé—®é¢˜----â€œä»è¾“å…¥urlåˆ°é¡µé¢å±•ç¤ºçš„è¿‡ç¨‹æœ‰å“ªäº›ï¼Ÿâ€ã€‚å…¶å®ä¹Ÿä¸ç®—çªç„¶å§ï¼Œå…¶å®æƒ³æƒ³å¥½åƒçœ‹é¢è¯•é¢˜çš„æ—¶å€™ç»å¸¸ä¼šå‡ºç°è¿™ä¹ˆä¸€é“é¢˜ç›®ã€‚ä»Šå¤©å°±ç…§ç€è‡ªå·±æƒ³åˆ°çš„ä¸œè¥¿æ¥å†™è¿™ä¹ˆä¸€ç¯‡ã€‚</p><h2 id="è¿‡ç¨‹"><a class="header-anchor" href="#è¿‡ç¨‹"></a>è¿‡ç¨‹</h2><ul><li>DNSè§£æè¾“å…¥çš„åŸŸå<ul><li>ç›®çš„ï¼šè§£æåŸŸåè·å–ip</li><li>è¿‡ç¨‹ï¼š<ol><li>æµè§ˆå™¨ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¯¥åŸŸåå¯¹åº”çš„ipåœ°å€</li><li>æ“ä½œç³»ç»Ÿç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¯¥åŸŸåå¯¹åº”çš„ipåœ°å€</li><li>å‘æœ¬åœ°åŸŸåæœåŠ¡å™¨æ¥è¯·æ±‚è§£æ</li><li>å‘ä¸Šä¸€çº§åŸŸåæœåŠ¡å™¨è¯·æ±‚è§£æ</li><li>é‡å¤4æ­¥éª¤ï¼Œä¸€ç›´åˆ°æ ¹æœåŠ¡å™¨ä¸ºæ­¢</li><li>è¿”å›è§£æå‡ºçš„ç»“æœï¼Œå¹¶ä¸”ç¼“å­˜åˆ°æœ¬åœ°åŸŸåæœåŠ¡å™¨ä»¥åŠæ“ä½œç³»ç»Ÿç¼“å­˜ä¸­</li></ol></li></ul></li><li>å‘æœåŠ¡ç«¯å‘å‡ºTCPè¿æ¥<ul><li>ç›®çš„ï¼šè·å–ç¨³å®šå¯é çš„è¿æ¥</li><li>TCPä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼š<ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…</li><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®åŒ…å¹¶æ‰“ä¸Šç¡®è®¤çš„æ ‡è®°ï¼Œç„¶åè¿”å›ç»™å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°æ•°æ®åŒ…ï¼ŒåŠ ä¸Šç¡®è®¤æ ‡è®°ã€‚å†æ¬¡å‘é€ç»™æœåŠ¡ç«¯ã€‚</li><li>å»ºç«‹è¿æ¥</li></ol></li></ul></li><li>webç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯è¿”å›èµ„æºç»™å®¢æˆ·ç«¯ã€‚</li><li>webç«¯è§£æå¹¶æ¸²æŸ“èµ„æºï¼ˆæ­£å¸¸ç»“æ„ï¼‰<ul><li>çŸ¥è¯†ç‚¹ï¼šwebç«¯å¦‚ä½•æ¸²æŸ“</li><li>æ¸²æŸ“è¿‡ç¨‹ï¼š<ol><li>è§£æHTMLæ–‡æ¡£æ„å»ºDOMæ ‘ï¼Œè§£æCSSæ„å»ºCSSOM</li><li>DOMæ ‘å’ŒCSSOMåˆå¹¶æˆä¸€ä¸ªèŠ‚ç‚¹æ ‘</li><li>æµè§ˆå™¨é€šè¿‡èŠ‚ç‚¹æ ‘è®¡ç®—èŠ‚ç‚¹åœ¨é¡µé¢æ‰€å¤„çš„ä½ç½®</li><li>æµè§ˆå™¨æ¸²æŸ“èŠ‚ç‚¹</li></ol></li><li>å…¶å®ƒçŸ¥è¯†ï¼š<ol><li>é‡ç»˜ï¼šèŠ‚ç‚¹çš„è§†è§‰å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œä¾‹å¦‚<code>color</code>,<code>font</code>ç­‰çš„å˜åŒ–ï¼Œå¼•èµ·çš„æµè§ˆå™¨é‡æ–°ç»˜åˆ¶èŠ‚ç‚¹çš„è¡Œä¸ºã€‚</li><li>å›æµï¼šèŠ‚ç‚¹çš„ä½ç½®å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œä¾‹å¦‚<code>left,top,right,bottom,display:none,width,height</code>ç­‰çš„å˜åŒ–ï¼Œå¼•èµ·çš„æµè§ˆå™¨é‡æ–°è®¡ç®—èŠ‚ç‚¹ä½ç½®å¹¶ç»˜åˆ¶èŠ‚ç‚¹çš„è¡Œä¸º</li><li>é‡ç»˜å’Œå›æµçš„å…³ç³»ï¼š é‡ç»˜ä¸ä¸€å®šå›æµï¼Œå›æµå¿…ç„¶ä¼šå¼•èµ·é‡ç»˜</li><li>ä¼˜åŒ–ï¼š<ul><li>å°½é‡é¿å…ç›´æ¥æ“ä½œDOMèŠ‚ç‚¹</li><li>å¯ä»¥ä½¿ç”¨<code>position</code>æŠŠä¸€äº›å¤æ‚åŠ¨ç”»çš„èŠ‚ç‚¹è„±ç¦»æ–‡æ¡£æµã€‚ä»è€Œé¿å…å…¶çˆ¶å…ƒç´ åŠå‘¨å›´å…ƒç´ å‘ç”Ÿå˜åŒ–ä»è€Œå¼•èµ·å›æµ</li></ul></li></ol></li></ul></li></ul><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯å¯¹urlè¾“å…¥åˆ°é¡µé¢å±•ç¤ºçš„è¿‡ç¨‹çš„ä¸€äº›çŸ¥è¯†çš„ç†è§£å’Œæ€»ç»“ã€‚å…¶å®è¿˜å¯ä»¥å†å¾€ç»†æ¥è®²ï¼Œä¸è¿‡ç”±äºè‡ªå·±çŸ¥è¯†æ°´å¹³æœ‰é™ï¼Œå¯¹äºç½‘ç»œåè®®ä»¥åŠæ•°æ®åŒ…ç»“æ„çš„ç†è§£ä¸æ·±ï¼Œæƒ³äº†æƒ³è¿˜æ˜¯ä¸ä¸¢äººç°çœ¼äº†å“ˆå“ˆå“ˆã€‚<br>Thatâ€™s all!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;è®²é“ç†ï¼Œä¹‹å‰è¯´è¿‡çš„ä¸€&lt;s&gt;å¤©&lt;/s&gt;æœˆä¸€ç¯‡å…¶å®æ˜¯å¼€ç©ç¬‘çš„ã€‚è«åå…¶å¦™å°±è¿™ä¹ˆä¹…æ²¡å†™è¿‡åšå®¢äº†ã€‚ä»Šå¤©åœ¨å›å®¶çš„è·¯ä¸Šçªç„¶æƒ³èµ·äº†è¿™ä¸ªé—®é¢˜----â€œä»è¾“å…¥urlåˆ°é¡µé¢å±•ç¤º
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="HTML" scheme="https://xzh97.github.io/tags/HTML/"/>
    
  </entry>
  
  <entry>
    <title>hexoæ·»åŠ gitalkä½œä¸ºåšå®¢è¯„è®ºç³»ç»Ÿ</title>
    <link href="https://xzh97.github.io/2019/12/18/hexo-add-gitalk/"/>
    <id>https://xzh97.github.io/2019/12/18/hexo-add-gitalk/</id>
    <published>2019-12-18T14:55:05.000Z</published>
    <updated>2025-11-24T08:23:41.554Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>è«å¾—è¯„è®ºçš„åšå®¢è«å¾—çµé­‚â€”â€”<s>é²è¿…</s>ã€‚</p><h2 id="Gitalkæ˜¯ä»€ä¹ˆ"><a class="header-anchor" href="#Gitalkæ˜¯ä»€ä¹ˆ"></a>Gitalkæ˜¯ä»€ä¹ˆ</h2><p>Gitalk ä¸€å¼€å§‹åº”è¯¥æ˜¯<code>github</code>æ¨å‡ºæ¥é…åˆæ­å»ºåšå®¢è€Œåšçš„è¯„è®ºæ’ä»¶ã€‚ç„¶è€Œéšç€å…¶ä»–è¯„è®ºæ’ä»¶çš„æ²¡è½ï¼ŒGitalk å°±ç«èµ·æ¥äº†ã€‚<br>å®ƒåŸºäº <code>Github Issue</code> å’Œ <code>Preact</code> å¼€å‘ã€‚<br>é™¤äº†æ”¯æŒ <code>Hexo</code> å¤–ï¼Œè¿˜æ”¯æŒ <code>java</code>ï¼Œ<code>php</code> ç­‰è¯­è¨€å¼€å‘çš„åšå®¢ã€‚</p><h2 id="ä¸ºå•¥ç”¨Gitalk"><a class="header-anchor" href="#ä¸ºå•¥ç”¨Gitalk"></a>ä¸ºå•¥ç”¨Gitalk</h2><p>ä¹‹å‰å…¶å®è¿˜å»çœ‹äº†å…¶å®ƒçš„è¯„è®ºæ’ä»¶ã€‚ä¸€å¼€å§‹æ˜¯æ‰“ç®—ç”¨<code>duoshuo</code>æˆ–è€…<code>disqus</code>è¿™ä¸¤ä¸ªæ’ä»¶å…¶ä¸­ä¸€ä¸ªï¼ˆapolloä¸»é¢˜è‡ªå¸¦ï¼‰ã€‚ç„¶å:</p><ul><li><code>duoshuo</code>å·²ç»åœæ­¢æœåŠ¡ï¼ˆè¿˜æœ‰ç½‘æ˜“äº‘æ›´è´´ï¼‰</li><li><code>disqus</code>çš„éœ€è¦<s>ç§‘å­¦ä¸Šç½‘</s></li><li>ç„¶ååœ¨å¯»æ‰¾å…¶å®ƒæ’ä»¶çš„æ—¶å€™ç¢°å·§çœ‹åˆ°äº†<code>Gitalk</code>ï¼Œä¸€å®šæ˜¯ç‰¹åˆ«çš„ç¼˜åˆ†ã€‚ï¼ˆå…¶å®æ˜¯çœ‹åˆ°äº†<code>git</code>ä¸‰ä¸ªå­—çœ¼ï¼‰</li></ul><p><strong>æ­å»ºæ­¥éª¤</strong></p><ol><li>åœ¨githubæ­å»ºä¸€ä¸ªä»“åº“æ¥å­˜æ”¾è¯„è®º(å› ä¸ºæˆ‘çš„hexoåšå®¢æ˜¯å’ŒgithubPageç»‘å®šçš„ï¼Œå°±ä¸åˆ›å»ºæ–°çš„äº†ã€‚ç›´æ¥ç”¨çš„æˆ‘çš„åšå®¢ä»“åº“)</li><li>æŠŠä»“åº“Issueå¼€å¯ï¼ˆè¿™ä¸ªå¥½åƒæ˜¯é»˜è®¤å¼€å¯çš„ï¼Œå¦‚æœæ²¡æ”¹çš„è¯å°±ä¸ç”¨åŠ¨äº†ï¼‰</li><li>æ³¨å†Œç”³è¯·ä¸€ä¸ª<code>Github Application</code>(<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">ç‚¹å‡»æ­¤å¤„å¯è¿›å…¥</a>)<br>åˆ›å»ºå¥½äº†ä¹‹åï¼Œå¤åˆ¶ä½ çš„<code>ClientIDï¼ŒClientSecret</code>ã€‚</li><li>åœ¨<code>hexo</code>ä¸»é¢˜ä¸‹çš„<code>config.yml</code>æ–‡ä»¶åŠ å…¥è¿™æ®µï¼š</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#ç”¨æ¥åšå¯ç”¨åˆ¤æ–­å¯ä»¥ä¸ç”¨ï¼Œç›®å‰æ²¡æœ‰å†™ç›¸å…³é€»è¾‘</span></span><br><span class="line">    <span class="attr">owner:</span> <span class="comment">#Github ç”¨æˆ·å,</span></span><br><span class="line">    <span class="attr">repo:</span>  <span class="comment">#å‚¨å­˜è¯„è®ºissueçš„githubä»“åº“å</span></span><br><span class="line">    <span class="attr">admin:</span> <span class="string">[]</span> <span class="comment">#Github ç”¨æˆ·å,</span></span><br><span class="line">    <span class="attr">oauth:</span></span><br><span class="line">        <span class="attr">clientID:</span>  <span class="comment">#`Github Application clientID`</span></span><br><span class="line">        <span class="attr">clientSecret:</span>  <span class="comment">#`Github Application clientSecret`</span></span><br></pre></td></tr></table></figure><ol start="5"><li>æ‰¾åˆ°<code>hexo</code>ä¸»é¢˜å†…çš„è¯„è®ºæ¨¡æ¿<code>comment.jade</code>å’Œå¤´éƒ¨æ¨¡æ¿<code>head.jade</code>ï¼Œåœ¨é‡Œé¢æ–°åŠ ä»¥ä¸‹ä»£ç ï¼š</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; æˆ‘æå‰æŠŠgitalkçš„csså’Œjsæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°äº†</span><br><span class="line">&#x2F;&#x2F; åŒæ—¶å…¶ä¸­çš„ä»£ç æ ¹æ®ä¸åŒçš„æ¨¡æ¿ä¹Ÿä¸ä¸€æ ·ï¼Œè¿™é‡Œç”¨çš„jadeä»…ä¾›å‚è€ƒ</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; head</span><br><span class="line">if theme.gitalk.enable</span><br><span class="line">    link(rel&#x3D;&quot;stylesheet&quot;, href&#x3D;url_for(&quot;css&#x2F;gitalk.1.5.0.css&quot;))</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; comment</span><br><span class="line">if theme.gitalk.enable</span><br><span class="line">    #gitalk-container</span><br><span class="line">    script(src&#x3D;url_for(&quot;js&#x2F;gitalk.1.5.0.min.js&quot;))</span><br><span class="line">    script.</span><br><span class="line">        var params &#x3D; &#123;</span><br><span class="line">            clientID:&quot;#&#123;theme.gitalk.oauth.clientID&#125;&quot;,</span><br><span class="line">            clientSecret:&quot;#&#123;theme.gitalk.oauth.clientSecret&#125;&quot;,</span><br><span class="line">            repo:&quot;#&#123;theme.gitalk.repo&#125;&quot;,</span><br><span class="line">            admin:&quot;#&#123;theme.gitalk.admin&#125;&quot;,</span><br><span class="line">            id:window.location.pathname,</span><br><span class="line">            owner:&quot;#&#123;theme.gitalk.owner&#125;&quot;,</span><br><span class="line">            distractionFreeMode: false,</span><br><span class="line">        &#125;;</span><br><span class="line">        var gitalk &#x3D; new Gitalk(params)</span><br><span class="line">        gitalk.render(&#39;gitalk-container&#39;);</span><br></pre></td></tr></table></figure><p><strong>é‡åˆ°çš„é—®é¢˜</strong><br>ä¸€å¼€å§‹ï¼Œæˆ‘å‘ç°åœ¨è°ƒç”¨githubçš„apiæ—¶æ€»æ˜¯æŠ¥é”™ï¼Œè¿”å›çŠ¶æ€ç ä¸º:422ã€‚ç”±äºä¹‹å‰422æˆ‘ä»æ¥æ²¡æœ‰ç¢°åˆ°è¿‡ã€‚äºæ˜¯æˆ‘å°±å»æœç´¢äº†ä¸€ä¸‹422çš„å«ä¹‰ï¼š<br><strong>422 Unprocessable Entityï¼šè¯·æ±‚æ ¼å¼æ­£ç¡®ï¼Œä½†æ˜¯ç”±äºå«æœ‰è¯­ä¹‰é”™è¯¯ï¼Œæ— æ³•å“åº”ã€‚422 åˆ™è¡¨ç°ä¸ºè¯·æ±‚æ ¼å¼é”™è¯¯ï¼Œä½†å‡ºç°äº† è¯­ä¹‰ é”™è¯¯ï¼Œä»¥è‡³äºæœåŠ¡ç«¯æ— æ³•å“åº”ã€‚å¯ä»¥ç†è§£ä¸ºæœåŠ¡ç«¯èƒ½ç†è§£è¯·æ±‚èµ„æºç±»å‹<code>content-type</code>ï¼Œå¦åˆ™åº”è¯¥è¿”å› 415ï¼ˆUnsupported Media Typeï¼‰ï¼Œä¹Ÿèƒ½ç†è§£è¯·æ±‚å®ä½“å†…å®¹ï¼Œå¦åˆ™åº”è¯¥è¿”å› 400ï¼ˆBad Requestï¼‰ã€‚</strong><br>åé¢æˆ‘æ ¹æ®æ¥å£å»æ…¢æ…¢è°ƒè¯•ï¼Œå‘ç°æ˜¯è¯·æ±‚ä½“ä¸­çš„<code>label=['Gitalk,location.pathname']</code>å‚æ•°å†…åŒ…å«äº†<code>location.pathname</code>å¯¼è‡´çš„é”™è¯¯ã€‚å…¶å®è¿™é‡Œæˆ‘å¹¶æ²¡æƒ³ä¼ è¿™ä¸ª<code>location.pathname</code>,æˆ‘ä¼ çš„åº”è¯¥æ˜¯<code>pathname</code>çš„<code>value</code>æ‰å¯¹ã€‚ ç„¶åæˆ‘æ‰å‘ç°ï¼ŒåŸæ¥<code>config.yml</code>é‡Œé¢çš„å†…å®¹å…¶å®éƒ½æ˜¯<code>string</code>ç±»å‹ã€‚äºæ˜¯æŠŠ<code>params.id</code>å†™åœ¨äº†<code>comment.jade</code>é‡Œã€‚æœ€åæˆåŠŸè§£å†³äº†é—®é¢˜ã€‚</p><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h2><p>æ‰€ä»¥è¯´ï¼Œå¹³æ—¶è¿˜æ˜¯è¦ç»†å¿ƒç‚¹æ‰å¥½ã€‚ä¸è¿‡è¿™æ³¢ä¹Ÿä¸äºã€‚å­¦åˆ°äº†httpçŠ¶æ€ç çš„çŸ¥è¯†ã€‚422ï¼ˆ<strong>æ ¼å¼æ­£ç¡®ï¼Œè¯­ä¹‰æœ‰é”™è¯¯</strong>ï¼‰ï¼Œ415ï¼ˆ<strong>ä¸æ”¯æŒè¯¥è¯·æ±‚èµ„æºç±»å‹</strong>ï¼‰,400ï¼ˆ<strong>è¯·æ±‚å®ä½“å†…å®¹æœ‰è¯¯ã€‚è¿™ä¸ªä¸€èˆ¬æ˜¯è¯·æ±‚ä½“å†…çš„å‚æ•°æœ‰é—®é¢˜</strong>ï¼‰<br>Thatâ€™s all! Thanks for watching!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;è«å¾—è¯„è®ºçš„åšå®¢è«å¾—çµé­‚â€”â€”&lt;s&gt;é²è¿…&lt;/s&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Gitalkæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=
      
    
    </summary>
    
    
      <category term="hexo" scheme="https://xzh97.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://xzh97.github.io/tags/hexo/"/>
    
      <category term="gitalk" scheme="https://xzh97.github.io/tags/gitalk/"/>
    
      <category term="apollo" scheme="https://xzh97.github.io/tags/apollo/"/>
    
  </entry>
  
  <entry>
    <title>BFCæ€»ç»“</title>
    <link href="https://xzh97.github.io/2019/12/16/css-bfc/"/>
    <id>https://xzh97.github.io/2019/12/16/css-bfc/</id>
    <published>2019-12-16T14:04:16.000Z</published>
    <updated>2025-11-24T08:23:41.553Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¤©åœ¨é¢˜ç›®é‡Œçœ‹åˆ°äº†BFCçš„æé—®ï¼Œè™½ç„¶ä¹‹å‰å¯¹äºBFCæœ‰ç²—æµ…çš„äº†è§£è¿‡ã€‚ä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢å·²ç»æ¯”è¾ƒä¹…è¿œäº†ï¼Œå¯¹BFCçš„è®°å¿†å·²ç»ä¸æ˜¯å¾ˆæ¸…æ¥šäº†ã€‚åªè®°å¾—BFCçš„è§¦å‘æ–¹æ³•ä»¥åŠç”¨æˆ·ã€‚æ‰€ä»¥ä»Šå¤©å†™è¿™ç¯‡æ–‡ç« æ¥å¯¹ä¹‹å‰çš„å­¦ä¹ åšä¸€ä¸ªæ€»ç»“ã€‚</p><p><strong>BFCæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br>BFCå…¨ç§°ä¸ºå—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼‰ã€‚æ˜¯CSSçš„ä¸€ç§æ¸²æŸ“æœºåˆ¶ã€‚å®ƒæ˜¯é¡µé¢ä¸­çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œå®ƒå†³å®šäº†å…¶å­å…ƒç´ å°†å¦‚ä½•å®šä½ï¼Œä»¥åŠå’Œå…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚</p><p><strong>BFCè§„åˆ™</strong></p><ul><li>å†…éƒ¨çš„ç›’å­ä¼šåœ¨å‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ’åˆ—</li><li>ç›’å­å‚ç›´æ–¹å‘çš„è·ç¦»ç”±<code>margin</code>æ¥å†³å®šï¼Œå±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›’å­ï¼Œåœ¨ç›¸é‚»æ–¹å‘çš„å¤–è¾¹è·ä¼šå‘ç”Ÿé‡å </li><li>BFCåŒºåŸŸä¸ä¼šå’Œ<code>float</code>ç›’å­åŒºåŸŸé‡å ã€‚</li><li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œ å®¹å™¨å†…çš„å­å…ƒç´ å’ŒBFCå¤–é¢çš„å…ƒç´ äº’ä¸å½±å“.</li><li>å¯¹äºä»å·¦å¾€å³çš„æ ¼å¼åŒ–æ¥è¯´æ¯ä¸ªç›’å­çš„<code>margin-left</code>ä¸åŒ…å«å—å®¹å™¨çš„<code>border-left</code>ç›¸æ¥è§¦ï¼Œå¯¹äºä»å³å¾€å·¦çš„æ ¼å¼åŒ–åˆšå¥½ç›¸åã€‚å³ä½¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</li></ul><p><strong>å¦‚ä½•è§¦å‘BFC</strong></p><ul><li>æ ¹å…ƒç´ <code>html</code></li><li><code>overflow</code>ä¸ä¸º<code>visible</code></li><li><code>position</code>ä¸º<code>absolute</code>æˆ–<code>fixed</code></li><li><code>float</code>ä¸ä¸º`none</li><li><code>display</code> çš„å€¼ä¸º <code>table-cell</code>, <code>table-caption</code>,<code>inline-block</code> ä¸­ä»»ä½•ä¸€ä¸ª</li><li><code>display</code>ä¸º<code>table</code>ã€<code>table-row</code>ã€<code>table-row-group</code>ã€<code>table-header-group</code>ã€<code>table-footer-group</code>ï¼ˆåˆ†åˆ«æ˜¯HTML <code>table</code>ã€<code>row</code>ã€<code>tbody</code>ã€<code>thead</code>ã€<code>tfoot</code>çš„é»˜è®¤å±æ€§ï¼‰æˆ– <code>inline-table</code>ï¼‰</li><li><code>display</code>ä¸º<code>flow-root</code>çš„å…ƒç´ </li><li><code>contain</code>å€¼ä¸º<code>layout</code>ã€<code>content</code>æˆ–<code>paint</code>çš„å…ƒç´ </li><li><code>display</code>ä¸º<code>flex</code>æˆ–<code>inline-flex</code>å…ƒç´ çš„ç›´æ¥å­å…ƒç´ </li><li><code>display</code>ä¸º<code>grid</code>æˆ–<code>inline-grid</code>å…ƒç´ çš„ç›´æ¥å­å…ƒç´ </li><li>å…ƒç´ çš„<code>column-count</code>æˆ–<code>column-width</code>ä¸ä¸º<code>auto</code>ï¼ŒåŒ…æ‹¬<code>column-count</code>ä¸º <strong>1</strong></li><li><code>column-span</code>ä¸º<code>all</code>çš„å…ƒç´ å§‹ç»ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„BFCï¼Œå³ä½¿è¯¥å…ƒç´ æ²¡æœ‰åŒ…è£¹åœ¨ä¸€ä¸ªå¤šåˆ—å®¹å™¨ä¸­ï¼ˆ<a href="https://github.com/w3c/csswg-drafts/commit/a8634b96900279916bd6c505fda88dda71d8ec51" target="_blank" rel="noopener">æ ‡å‡†å˜æ›´</a>ï¼Œ<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=709362" target="_blank" rel="noopener">Chrome bug</a>ï¼‰ã€‚</li></ul><p><strong>BFCç”¨å¤„</strong></p><ul><li>æ¸…é™¤æµ®åŠ¨</li><li>é˜²æ­¢<code>margin</code>é‡å (å…¶å®è¿™é‡Œæˆ‘è§‰å¾—ä¸ç”¨ç›¸é‚»çš„<code>margin</code>å°±å¯ä»¥äº†ã€‚ã€‚)</li><li>ä¸¤æ è‡ªé€‚åº”å¸ƒå±€</li></ul><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h2><p>BFCçš„å†…å®¹å…¶å®ä¸å¤šï¼Œè§„åˆ™çœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒæ‹—å£ï¼Œä½†æ˜¯BFCæœ¬èº«å…¶å®æˆ‘ä»¬ä¸€ç›´éƒ½åœ¨ä½¿ç”¨ã€‚å¸Œæœ›ä»¥åçš„æŸå¤©å›å¿†BFCçš„æ—¶å€™æˆ‘è¿˜èƒ½æ¸…æ™°è®°ä½BFCçš„è§„åˆ™<br>Thatâ€™s all! Thanks for watching!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä»Šå¤©åœ¨é¢˜ç›®é‡Œçœ‹åˆ°äº†BFCçš„æé—®ï¼Œè™½ç„¶ä¹‹å‰å¯¹äºBFCæœ‰ç²—æµ…çš„äº†è§£è¿‡ã€‚ä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢å·²ç»æ¯”è¾ƒä¹…è¿œäº†ï¼Œå¯¹BFCçš„è®°å¿†å·²ç»ä¸æ˜¯å¾ˆæ¸…æ¥šäº†ã€‚åªè®°å¾—BFCçš„è§¦å‘æ–¹æ³•ä»¥åŠ
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="BFC" scheme="https://xzh97.github.io/tags/BFC/"/>
    
      <category term="CSS3" scheme="https://xzh97.github.io/tags/CSS3/"/>
    
  </entry>
  
  <entry>
    <title>CSSæ€»ç»“</title>
    <link href="https://xzh97.github.io/2019/12/15/css-summary/"/>
    <id>https://xzh97.github.io/2019/12/15/css-summary/</id>
    <published>2019-12-15T13:35:25.000Z</published>
    <updated>2025-11-24T08:23:41.553Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>åœ¨å‰å‡ å¤©çš„é¢è¯•é¢˜ä¸­ï¼Œç¢°åˆ°äº†ä¸€äº›cssçš„é—®é¢˜ã€‚å‘ç°è‡ªå·±è™½ç„¶å¯ä»¥ç­”å‡ºå¤§éƒ¨åˆ†çš„ä¸œè¥¿ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€äº›ä¸å¤ªå¸¸è§çš„åœ°æ–¹è¯´çš„ä¸å‡†ç¡®ã€‚</p><h2 id="CSS"><a class="header-anchor" href="#CSS"></a>CSS</h2><p>CSSå°±æ˜¯æŒ‡å±‚å æ ·å¼è¡¨(Cascading Style Sheets)ï¼Œä¸»è¦æ˜¯ç”¨æ¥å®šä¹‰å¦‚ä½•æ˜¾ç¤ºHTMLæ–‡æ¡£ã€‚æ˜¯é¡µé¢æ›´åŠ å¥½çœ‹ï¼Œç¾è§‚ã€‚</p><h2 id="é€‰æ‹©å™¨"><a class="header-anchor" href="#é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h2><p>é€‰æ‹©å™¨å°±æ˜¯ç”¨æ¥é€šè¿‡æŸäº›æ¡ä»¶æ¥é€‰æ‹©ä¸CSSè§„åˆ™ç›¸åŒ¹é…çš„HTMLå…ƒç´ ã€‚<br>é€‰æ‹©å™¨ä¸»è¦æœ‰ä»¥ä¸‹è¿™äº›</p><ul><li>é€šé…ç¬¦ï¼ˆ*ï¼‰ï¼šé€šé…ç¬¦ä¼šåŒ¹é…HTMLæ–‡æ¡£çš„æ‰€æœ‰å…ƒç´ </li><li>å…ƒç´ é€‰æ‹©å™¨ï¼šä¾‹ï¼š<code>body{}</code>é€‰æ‹©HTMLæ–‡æ¡£ä¸­çš„<code>body</code>å…ƒç´ </li><li>ç±»é€‰æ‹©å™¨ï¼šä¾‹ï¼š<code>.wrapper{}</code>é€‰æ‹©HTMLæ–‡æ¡£ä¸­<code>class</code>å±æ€§ä¸º<code>wrapper</code>çš„å…ƒç´ </li><li>idé€‰æ‹©å™¨ï¼šä¾‹ï¼š<code>#root</code>é€‰æ‹©HTMLæ–‡æ¡£ä¸­<code>id</code>å±æ€§ä¸º<code>root</code>çš„å…ƒç´ </li><li>åä»£é€‰æ‹©å™¨ï¼šä¾‹ï¼š<code>body .wrapper{}</code>é€‰æ‹©<code>body</code>å…ƒç´ ä¸­çš„å­å…ƒç´ ç±»åä¸º<code>wrapper</code>çš„å…ƒç´ </li><li>ç›¸é‚»å…ƒç´ é€‰æ‹©å™¨ï¼šä¾‹ï¼š<code>div + p{}</code>ä¸<code>div</code>ç›¸é‚»çš„<code>p</code>å…ƒç´ ï¼ˆpsï¼š<code>div</code>å’Œ<code>p</code>æœ‰åŒä¸€ä¸ªçˆ¶çº§ï¼‰</li><li>å±æ€§é€‰æ‹©å™¨ï¼šä¾‹ï¼š<code>input[type='text']{}</code>é€‰æ‹©<code>input</code>ä¸­<code>type</code>ä¸º<code>text</code>çš„å…ƒç´ </li><li>ä¼ªç±»é€‰æ‹©å™¨ï¼šä¾‹ï¼š<code>div:hover{ cursor:'pointer'}</code>ä¼šåœ¨é¼ æ ‡æ»‘è¿‡<code>div</code>æ—¶æŠŠé¼ æ ‡å˜æˆä¸€ä¸ªå°æ‰‹</li></ul><h2 id="ä¼˜å…ˆçº§"><a class="header-anchor" href="#ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h2><p>å¯¹äºé€‰æ‹©å™¨æ¥è¯´ï¼Œæ˜¯ä¼šæœ‰ä¼˜å…ˆçº§çš„ã€‚ä¸»è¦æŒ‡æµè§ˆå™¨é€šè¿‡ä¼˜å…ˆçº§æ¥åˆ¤æ–­å“ªä¸€äº›å±æ€§å€¼ä¸ä¸€ä¸ªå…ƒç´ æœ€ä¸ºç›¸å…³ï¼Œä»è€Œåœ¨è¯¥å…ƒç´ ä¸Šåº”ç”¨è¿™äº›å±æ€§å€¼ã€‚ä¼˜å…ˆçº§æ˜¯åŸºäºä¸åŒç§ç±»é€‰æ‹©å™¨ç»„æˆçš„åŒ¹é…è§„åˆ™ã€‚<br><strong>ä¼˜å…ˆçº§çš„è®¡ç®—æ–¹å¼ï¼š!important &gt; å†…è” &gt; idé€‰æ‹©å™¨(#) &gt; ç±»é€‰æ‹©å™¨(.) &gt; å…ƒç´ é€‰æ‹©å™¨</strong></p><h2 id="ç»§æ‰¿"><a class="header-anchor" href="#ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>htmlå…ƒç´ å¯ä»¥ä»çˆ¶å…ƒç´ é‚£é‡Œç»§æ‰¿ä¸€éƒ¨åˆ†csså±æ€§ï¼Œå³ä½¿å½“å‰å…ƒç´ æ²¡æœ‰å®šä¹‰è¯¥å±æ€§ã€‚è¿™æ ·å¯ä»¥å°‘é‡å¤å®šä¹‰å¾ˆå¤šçš„å±æ€§ã€‚</p><ul><li>ä¸å¯ç»§æ‰¿çš„ï¼šdisplayã€marginã€borderã€paddingã€backgroundã€heightã€min-heightã€max-heightã€widthã€min-widthã€max-widthã€overflowã€positionã€leftã€rightã€topã€bottomã€z-indexã€floatã€clearã€table-layoutã€vertical-alignã€page-break-afterã€page-bread-beforeå’Œunicode-bidiã€‚</li><li>æ‰€æœ‰å…ƒç´ å¯ç»§æ‰¿ï¼švisibilityå’Œcursorã€‚</li><li>å†…è”å…ƒç´ å¯ç»§æ‰¿ï¼šletter-spacingã€word-spacingã€white-spaceã€line-heightã€colorã€fontã€font-familyã€font-sizeã€font-styleã€font-variantã€font-weightã€text-decorationã€text-transformã€directionã€‚</li><li>ç»ˆç«¯å—çŠ¶å…ƒç´ å¯ç»§æ‰¿ï¼štext-indentå’Œtext-alignã€‚</li><li>åˆ—è¡¨å…ƒç´ å¯ç»§æ‰¿ï¼šlist-styleã€list-style-typeã€list-style-positionã€list-style-imageã€‚</li><li>è¡¨æ ¼å…ƒç´ å¯ç»§æ‰¿ï¼šborder-collapseã€‚</li></ul><h2 id="CSS3"><a class="header-anchor" href="#CSS3"></a>CSS3</h2><p>CSS3å…¶å®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¾ˆå¤šä¸œè¥¿ï¼Œä¸»è¦å°±æ˜¯å¯¹äºCSSçš„ä¸€äº›è¡¥å……å’ŒåŠ å¼ºã€‚</p><ul><li>font-face å¯ä»¥è®¾ç½®å­—ä½“é›†</li><li>@media åª’ä½“æŸ¥è¯¢ï¼Œå¯ä»¥è®¾ç½®å…ƒç´ åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„css</li><li>transform å¯¹å…ƒç´ è¿›è¡Œ2dã€3dè½¬æ¢å®ç°å¯¹å…ƒç´ çš„ç§»åŠ¨ã€ç¼©æ”¾ã€è½¬åŠ¨ã€æ‹‰é•¿æˆ–æ‹‰ä¼¸ã€‚</li><li>transition è¿‡æ¸¡ å…ƒç´ ä»ä¸€ç§æ ·å¼é€æ¸æ”¹å˜ä¸ºå¦ä¸€ç§çš„æ•ˆæœã€‚</li><li>border-radius è¾¹æ¡†åœ†è§’ æ˜¯è¾¹æ¡†å¯ä»¥æœ‰åœ†è§’</li><li>box-shadow è¾¹æ¡†é˜´å½±</li><li>box-sizing ç›’å­æ¨¡å‹ è®¾ç½®widthå’Œheightæ˜¯å¦åŒ…æ‹¬å†…è¾¹è·ï¼ˆpaddingï¼‰å’Œå¤–è¾¹è·ï¼ˆmarginï¼‰<ul><li>border-boxï¼šè®¾ç½®çš„ width/height = width/height + margin + padding</li><li>content-boxï¼šè®¾ç½®çš„width/height = width/height</li></ul></li><li>animationï¼Œ@keyframes åŠ¨ç”»</li><li>flex å¼¹æ€§å¸ƒå±€æ¨¡å¼ ä½¿å¸ƒå±€æ›´åŠ èˆ’æœ</li></ul><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h2><p>cssè™½ç„¶å¹³æ—¶ç”¨èµ·æ¥å…¶å®å¹¶ä¸éš¾ï¼Œå¯å®é™…ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤šçš„çŸ¥è¯†ç‚¹éœ€è¦å­¦ä¹ ã€‚æ¯•ç«Ÿä¸–ç•Œä¸æ˜¯ä¸€æˆä¸å˜çš„ã€‚å¾ˆå¤šæ—¶å€™éƒ½éœ€è¦å‘å±•æ‰èƒ½æ›´å¥½çš„æ»¡è¶³å¼€å‘éœ€è¦ã€‚å“¦å¯¹äº†,è¿™é‡Œå¼ºçƒˆæ¨è<a href="https://www.zhangxinxu.com/" target="_blank" rel="noopener">å¼ é‘«æ—­</a>çš„åšå®¢ç½‘ç«™ã€‚ä»–å¯¹äºcssçš„ç†è§£çœŸçš„éå¸¸æ·±ï¼Œç½‘ç«™æœ‰å¾ˆå¤šå¥½æ–‡ï¼Œçœ‹äº†è®©äººå—ç›Šè‰¯å¤šã€‚<br>Thatâ€™s all! Thanks for watching!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;åœ¨å‰å‡ å¤©çš„é¢è¯•é¢˜ä¸­ï¼Œç¢°åˆ°äº†ä¸€äº›cssçš„é—®é¢˜ã€‚å‘ç°è‡ªå·±è™½ç„¶å¯ä»¥ç­”å‡ºå¤§éƒ¨åˆ†çš„ä¸œè¥¿ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€äº›ä¸å¤ªå¸¸è§çš„åœ°æ–¹è¯´çš„ä¸å‡†ç¡®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;CSS&quot;&gt;
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="CSS" scheme="https://xzh97.github.io/tags/CSS/"/>
    
      <category term="é€‰æ‹©å™¨" scheme="https://xzh97.github.io/tags/%E9%80%89%E6%8B%A9%E5%99%A8/"/>
    
      <category term="ä¼˜å…ˆçº§" scheme="https://xzh97.github.io/tags/%E4%BC%98%E5%85%88%E7%BA%A7/"/>
    
      <category term="CSSç»§æ‰¿" scheme="https://xzh97.github.io/tags/CSS%E7%BB%A7%E6%89%BF/"/>
    
  </entry>
  
  <entry>
    <title>webç«¯çš„ç¦»çº¿å­˜å‚¨æ–¹å¼</title>
    <link href="https://xzh97.github.io/2019/12/15/offline-storage/"/>
    <id>https://xzh97.github.io/2019/12/15/offline-storage/</id>
    <published>2019-12-15T10:02:35.000Z</published>
    <updated>2025-11-24T08:23:41.556Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€"></a>å‰è¨€</h2><p>è®²é“ç†ï¼Œä¹‹å‰è¯´è¿‡çš„ä¸€<s>å¤©</s>æœˆä¸€ç¯‡å…¶å®æ˜¯å¼€ç©ç¬‘çš„ã€‚è«åå…¶å¦™å°±è¿™ä¹ˆä¹…æ²¡å†™è¿‡åšå®¢äº†ã€‚ä»Šå¤©åœ¨å›å®¶çš„è·¯ä¸Šçªç„¶æƒ³èµ·äº†è¿™ä¸ªé—®é¢˜----â€œä»è¾“å…¥urlåˆ°é¡µé¢å±•ç¤ºçš„è¿‡ç¨‹æœ‰å“ªäº›ï¼Ÿâ€ã€‚å…¶å®ä¹Ÿä¸ç®—çªç„¶å§ï¼Œå…¶å®æƒ³æƒ³å¥½åƒçœ‹é¢è¯•é¢˜çš„æ—¶å€™ç»å¸¸ä¼šå‡ºç°è¿™ä¹ˆä¸€é“é¢˜ç›®ã€‚ä»Šå¤©å°±ç…§ç€è‡ªå·±æƒ³åˆ°çš„ä¸œè¥¿æ¥å†™è¿™ä¹ˆä¸€ç¯‡ã€‚</p><h2 id="è¿‡ç¨‹"><a class="header-anchor" href="#è¿‡ç¨‹"></a>è¿‡ç¨‹</h2><ul><li>DNSè§£æè¾“å…¥çš„åŸŸå<ul><li>ç›®çš„ï¼šè§£æåŸŸåè·å–ip</li><li>è¿‡ç¨‹ï¼š<ol><li>æµè§ˆå™¨ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¯¥åŸŸåå¯¹åº”çš„ipåœ°å€</li><li>æ“ä½œç³»ç»Ÿç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¯¥åŸŸåå¯¹åº”çš„ipåœ°å€</li><li>å‘æœ¬åœ°åŸŸåæœåŠ¡å™¨æ¥è¯·æ±‚è§£æ</li><li>å‘ä¸Šä¸€çº§åŸŸåæœåŠ¡å™¨è¯·æ±‚è§£æ</li><li>é‡å¤4æ­¥éª¤ï¼Œä¸€ç›´åˆ°æ ¹æœåŠ¡å™¨ä¸ºæ­¢</li><li>è¿”å›è§£æå‡ºçš„ç»“æœï¼Œå¹¶ä¸”ç¼“å­˜åˆ°æœ¬åœ°åŸŸåæœåŠ¡å™¨ä»¥åŠæ“ä½œç³»ç»Ÿç¼“å­˜ä¸­</li></ol></li></ul></li><li>å‘æœåŠ¡ç«¯å‘å‡ºTCPè¿æ¥<ul><li>ç›®çš„ï¼šè·å–ç¨³å®šå¯é çš„è¿æ¥</li><li>TCPä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼š<ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…</li><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®åŒ…å¹¶æ‰“ä¸Šç¡®è®¤çš„æ ‡è®°ï¼Œç„¶åè¿”å›ç»™å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°æ•°æ®åŒ…ï¼ŒåŠ ä¸Šç¡®è®¤æ ‡è®°ã€‚å†æ¬¡å‘é€ç»™æœåŠ¡ç«¯ã€‚</li><li>å»ºç«‹è¿æ¥</li></ol></li><li>TCPå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ï¼š<ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ã€‚æ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥<code>FIN-WAIT-1</code>ï¼ˆç»ˆæ­¢ç­‰å¾…1ï¼‰é˜¶æ®µ</li><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°æ•°æ®åŒ…ç„¶åè¿”å›ä¸€ä¸ªç¡®è®¤æ•°æ®åŒ…ç»™å®¢æˆ·ç«¯ã€‚æ­¤æ—¶æœåŠ¡ç«¯è¿›å…¥<code>CLOSE-WAIT</code>ï¼ˆåŠå…³é—­é˜¶æ®µï¼‰ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°æŠ¥æ–‡ä¹‹åè¿›å…¥<code>FIN-WAIT-2</code>ï¼ˆç»ˆæ­¢ç­‰å¾…2ï¼‰é˜¶æ®µ</li><li>æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆè¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼‰ã€‚æ­¤æ—¶æœåŠ¡ç«¯è¿›å…¥<code>LAST-ACK</code>ï¼ˆæœ€åç¡®è®¤é˜¶æ®µï¼‰</li><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆç¡®è®¤æŠ¥æ–‡ï¼‰ã€‚æ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥<code>TIME-WAIT</code>ï¼ˆæ—¶é—´ç­‰å¾…ï¼‰é˜¶æ®µã€‚åœ¨è¿‡äº†<code>2MSL</code>(MSLæŒ‡ä¸€ä¸ªç‰‡æ®µåœ¨ç½‘ç»œä¸­æœ€å¤§çš„å­˜æ´»æ—¶é—´ï¼Œ2MSLå°±æ˜¯ä¸€ä¸ªå‘é€å’Œä¸€ä¸ªå›å¤æ‰€éœ€çš„æœ€å¤§æ—¶é—´)ã€‚ä¹‹åå®¢æˆ·ç«¯è¿›å…¥<code>CLOSED</code>é˜¶æ®µï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤æŠ¥æ–‡ä¹‹åç«‹é©¬è¿›å…¥<code>CLOSED</code>é˜¶æ®µã€‚</li></ol></li></ul></li><li>webç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯è¿”å›èµ„æºç»™å®¢æˆ·ç«¯ã€‚</li><li>webç«¯è§£æå¹¶æ¸²æŸ“èµ„æºï¼ˆæ­£å¸¸ç»“æ„ï¼‰<ul><li>çŸ¥è¯†ç‚¹ï¼šwebç«¯å¦‚ä½•æ¸²æŸ“</li><li>æ¸²æŸ“è¿‡ç¨‹ï¼š<ol><li>è§£æHTMLæ–‡æ¡£æ„å»ºDOMæ ‘ï¼Œ</li><li>è§£æCSSæ„å»ºCSSOM</li><li>DOMæ ‘å’ŒCSSOMåˆå¹¶æˆä¸€ä¸ªèŠ‚ç‚¹æ ‘</li><li>æµè§ˆå™¨é€šè¿‡èŠ‚ç‚¹æ ‘è®¡ç®—èŠ‚ç‚¹åœ¨é¡µé¢æ‰€å¤„çš„ä½ç½®</li><li>æµè§ˆå™¨æ¸²æŸ“èŠ‚ç‚¹</li></ol></li><li>å…¶å®ƒçŸ¥è¯†ï¼š<ol><li><code>script</code>çš„åŠ è½½/æ‰§è¡Œé»˜è®¤éƒ½æ˜¯ä¼šé˜»å¡æ¸²æŸ“æµç¨‹çš„ï¼Œé™¤éåŠ äº†<code>defer</code>(å¼‚æ­¥åŠ è½½ï¼Œå»¶è¿ŸæŒ‰åºæ‰§è¡Œ)/<code>async</code>ï¼ˆå¼‚æ­¥åŠ è½½ï¼ŒåŠ è½½å®Œæ‰§è¡Œï¼‰ã€‚ä½†æ˜¯åœ¨å®é™…ä¸­ï¼ŒåŠ äº†<code>defer</code>çš„<code>script</code>è„šæœ¬ä¹Ÿæœªå¿…ä¼šçœŸçš„æŒ‰ç…§é¡ºåºå»¶è¿Ÿæ‰§è¡Œã€‚</li><li><strong>DOMæ ‘å’ŒCSSOMçš„æ¸²æŸ“æ˜¯ä¼šé˜»å¡çš„ï¼Œä¹‹å‰è®¤ä¸ºçš„ä¸é˜»å¡å…¶å®æŒ‡çš„æ˜¯CSSçš„è§£æä¸ä¼šå½±å“åˆ°DOMçš„è§£æï¼Œè€Œæ¸²æŸ“æ˜¯ä¼šé˜»æ­¢çš„</strong></li><li>é‡ç»˜ï¼šèŠ‚ç‚¹çš„è§†è§‰å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œä¾‹å¦‚<code>color</code>,<code>font</code>ç­‰çš„å˜åŒ–ï¼Œå¼•èµ·çš„æµè§ˆå™¨é‡æ–°ç»˜åˆ¶èŠ‚ç‚¹çš„è¡Œä¸ºã€‚</li><li>å›æµï¼šèŠ‚ç‚¹çš„ä½ç½®å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œä¾‹å¦‚<code>left,top,right,bottom,display:none,width,height</code>ç­‰çš„å˜åŒ–ï¼Œå¼•èµ·çš„æµè§ˆå™¨é‡æ–°è®¡ç®—èŠ‚ç‚¹ä½ç½®å¹¶ç»˜åˆ¶èŠ‚ç‚¹çš„è¡Œä¸º</li><li>é‡ç»˜å’Œå›æµçš„å…³ç³»ï¼š é‡ç»˜ä¸ä¸€å®šå›æµï¼Œå›æµå¿…ç„¶ä¼šå¼•èµ·é‡ç»˜</li><li>ä¼˜åŒ–ï¼š<ul><li>å°½é‡é¿å…ç›´æ¥æ“ä½œDOMèŠ‚ç‚¹</li><li>å¯ä»¥ä½¿ç”¨<code>position</code>æŠŠä¸€äº›å¤æ‚åŠ¨ç”»çš„èŠ‚ç‚¹è„±ç¦»æ–‡æ¡£æµã€‚ä»è€Œé¿å…å…¶çˆ¶å…ƒç´ åŠå‘¨å›´å…ƒç´ å‘ç”Ÿå˜åŒ–ä»è€Œå¼•èµ·å›æµ</li></ul></li></ol></li></ul></li></ul><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“"></a>æ€»ç»“</h2><p>ä»urlè¾“å…¥åˆ°é¡µé¢å±•ç¤ºçš„è¿‡ç¨‹å…¶å®å¤§è‡´å¯åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯è¯·æ±‚ï¼Œä¸€éƒ¨åˆ†æ˜¯æ¸²æŸ“çš„éƒ¨åˆ†ã€‚è¯·æ±‚éƒ¨åˆ†ä¸»è¦åˆåˆ†ä¸ºdnsè§£æï¼Œä»¥åŠå»ºç«‹/é‡Šæ”¾tcpè¿æ¥ã€‚æ¸²æŸ“éƒ¨åˆ†ä¸»è¦æ˜¯æ¸²æŸ“çš„æ­¥éª¤ã€‚è¿™ç¯‡æ–‡ç« å…¶å®è¿˜å¯ä»¥æ›´ç»†è‡´ä¸€äº›ï¼Œæ¯”å¦‚å¯ä»¥è®²è®²DNSï¼ŒTCPçš„å…·ä½“çš„ä¸œè¥¿ã€‚ä¹‹åæœ‰ç©ºå†å†™æŠŠ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;è®²é“ç†ï¼Œä¹‹å‰è¯´è¿‡çš„ä¸€&lt;s&gt;å¤©&lt;/s&gt;æœˆä¸€ç¯‡å…¶å®æ˜¯å¼€ç©ç¬‘çš„ã€‚è«åå…¶å¦™å°±è¿™ä¹ˆä¹…æ²¡å†™è¿‡åšå®¢äº†ã€‚ä»Šå¤©åœ¨å›å®¶çš„è·¯ä¸Šçªç„¶æƒ³èµ·äº†è¿™ä¸ªé—®é¢˜----â€œä»è¾“å…¥urlåˆ°é¡µé¢å±•ç¤º
      
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://xzh97.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="HTML5" scheme="https://xzh97.github.io/tags/HTML5/"/>
    
      <category term="cache" scheme="https://xzh97.github.io/tags/cache/"/>
    
      <category term="web" scheme="https://xzh97.github.io/tags/web/"/>
    
      <category term="ç¦»çº¿å­˜å‚¨" scheme="https://xzh97.github.io/tags/%E7%A6%BB%E7%BA%BF%E5%AD%98%E5%82%A8/"/>
    
  </entry>
  
</feed>
